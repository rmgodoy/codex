(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6535:(e,s,t)=>{"use strict";t.d(s,{C8:()=>i,OG:()=>r,PW:()=>d,RW:()=>n,ZK:()=>c,s2:()=>a});var l=t(82489);let r=async()=>{let e=(await (0,l.Lf)()).transaction(l.RN,"readonly").objectStore(l.RN).getAll();return new Promise((s,t)=>{e.onsuccess=()=>s(e.result),e.onerror=()=>t(e.error)})},a=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readonly").objectStore(l.RN).get(e);return new Promise((e,t)=>{s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})},i=async e=>{if(!e||0===e.length)return[];let s=(await (0,l.Lf)()).transaction(l.RN,"readonly").objectStore(l.RN),t=[],r=e.map(e=>new Promise((l,r)=>{let a=s.get(e);a.onsuccess=()=>{a.result&&t.push(a.result),l()},a.onerror=()=>r(a.error)}));return await Promise.all(r),t},n=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readwrite").objectStore(l.RN),t=(0,l.$C)(),r={...e,id:t},a=s.add(r);return new Promise((e,s)=>{a.onsuccess=()=>e(t),a.onerror=()=>s(a.error)})},c=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readwrite").objectStore(l.RN).put(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})},d=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readwrite").objectStore(l.RN).delete(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})}},8643:(e,s,t)=>{"use strict";t.d(s,{Ke:()=>i,Nt:()=>r,R6:()=>a});var l=t(27242);let r=l.bL,a=l.R6,i=l.Ke},13930:(e,s,t)=>{"use strict";t.d(s,{W$:()=>i,kO:()=>n,pT:()=>d,rp:()=>a,wz:()=>c,xy:()=>r});var l=t(82489);let r=async()=>{let e=(await (0,l.Lf)()).transaction(l.qi,"readonly").objectStore(l.qi).getAll();return new Promise((s,t)=>{e.onsuccess=()=>s(e.result),e.onerror=()=>t(e.error)})},a=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readonly").objectStore(l.qi).get(e);return new Promise((e,t)=>{s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})},i=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readwrite").objectStore(l.qi),t=(0,l.$C)(),r={...e,id:t},a=s.add(r);return new Promise((e,s)=>{a.onsuccess=()=>e(t),a.onerror=()=>s(a.error)})},n=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readwrite").objectStore(l.qi).put(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})},c=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readwrite").objectStore(l.qi).delete(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})},d=async e=>{if(!e||0===e.length)return[];let s=(await (0,l.Lf)()).transaction(l.qi,"readonly").objectStore(l.qi),t=[],r=e.map(e=>new Promise((l,r)=>{let a=s.get(e);a.onsuccess=()=>{a.result&&t.push(a.result),l()},a.onerror=()=>r(a.error)}));return await Promise.all(r),t}},23062:(e,s,t)=>{"use strict";t.d(s,{FC:()=>r,GW:()=>l,H1:()=>h,OJ:()=>a,Rb:()=>u,Vx:()=>p,Vz:()=>m,Yh:()=>i,_d:()=>j,ag:()=>n,gG:()=>v,gV:()=>o,qY:()=>d,w$:()=>c,zE:()=>x});let l=["attack","support"],r=["melee","missile","innate","unarmed","spell","item","versatile"],a=["guard","resist","10","special"],i=["potion","powder","oil","bomb"],n=["lesser","greater"],c=["weapon","armor","shield","tool"],d=["crude","normal","fine"],o=["normal","magical","artifact"],u=["melee","missile","spell","unarmed"],x=["d4","d6","d8","d10","d12","d20"],m=["one-handed","two-handed","thrown"],h=["head","chest","arms","legs","outer"],p=["head","chest","arms","legs","outer","shield"],j=["None","Light","Heavy"],v=["d4","d6","d8","d10","d12","d20"]},47262:(e,s,t)=>{"use strict";t.d(s,{S:()=>c});var l=t(95155),r=t(12115),a=t(76981),i=t(10518),n=t(59434);let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.bL,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,l.jsx)(a.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,l.jsx)(i.A,{className:"h-4 w-4"})})})});c.displayName=a.bL.displayName},54165:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>x,Es:()=>h,L3:()=>p,c7:()=>m,lG:()=>c,rr:()=>j,zM:()=>d});var l=t(95155),r=t(12115),a=t(45821),i=t(25318),n=t(59434);let c=a.bL,d=a.l9,o=a.ZL;a.bm;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=a.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:t,children:r,...c}=e;return(0,l.jsxs)(o,{children:[(0,l.jsx)(u,{}),(0,l.jsxs)(a.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[r,(0,l.jsxs)(a.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(i.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=a.UC.displayName;let m=e=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};m.displayName="DialogHeader";let h=e=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};h.displayName="DialogFooter";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});p.displayName=a.hE.displayName;let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});j.displayName=a.VY.displayName},54768:(e,s,t)=>{Promise.resolve().then(t.bind(t,56563))},56563:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eG});var l=t(95155),r=t(12115),a=t(6535),i=t(13930);let n=async e=>{if(!e||0===e.length)return[];let s=await (0,a.C8)(e);if(0===s.length)return[];let t=[...new Set(s.flatMap(e=>e.deeds))],l=new Map((await (0,i.pT)(t)).map(e=>[e.id,e]));return s.map(e=>{let s=[];return"string"==typeof e.abilities&&e.abilities.length>0?s=e.abilities.split("\n\n").map(e=>{let s=e.match(RegExp("\\*\\*(.*?):\\*\\*\\s*(.*)","s"));return s&&s[1]&&s[2]?{id:crypto.randomUUID(),name:s[1],description:s[2].trim()}:!s&&e.trim()?{id:crypto.randomUUID(),name:"Ability",description:e.trim()}:null}).filter(e=>null!==e):Array.isArray(e.abilities)&&(s=e.abilities.map(e=>({...e,id:e.id||crypto.randomUUID()}))),{...e,abilities:s,deeds:e.deeds.map(e=>l.get(e)).filter(e=>!!e)}})},c=["Archer","Enchanter","Enforcer","Guardian","Harrier","Hellion","Stalker","Sorcerer"],d={Archer:[{level:1,HP:20,Initiative:14,Accuracy:16,Guard:12,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:30,Initiative:14,Accuracy:16,Guard:12,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:40,Initiative:15,Accuracy:17,Guard:13,Resist:13,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:50,Initiative:15,Accuracy:17,Guard:13,Resist:13,rollBonus:"+5",Speed:5,DMG:"d8"},{level:5,HP:60,Initiative:16,Accuracy:18,Guard:14,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:6,HP:70,Initiative:16,Accuracy:18,Guard:14,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:7,HP:75,Initiative:17,Accuracy:19,Guard:15,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:8,HP:80,Initiative:17,Accuracy:19,Guard:15,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:9,HP:85,Initiative:18,Accuracy:20,Guard:16,Resist:16,rollBonus:"+8",Speed:8,DMG:"d10"},{level:10,HP:90,Initiative:18,Accuracy:20,Guard:16,Resist:16,rollBonus:"+8",Speed:8,DMG:"d12"}],Enchanter:[{level:1,HP:20,Initiative:12,Accuracy:14,Guard:16,Resist:16,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:30,Initiative:12,Accuracy:14,Guard:16,Resist:16,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:40,Initiative:13,Accuracy:15,Guard:17,Resist:17,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:50,Initiative:13,Accuracy:15,Guard:17,Resist:17,rollBonus:"+5",Speed:5,DMG:"d6"},{level:5,HP:60,Initiative:14,Accuracy:16,Guard:18,Resist:18,rollBonus:"+6",Speed:6,DMG:"d8"},{level:6,HP:70,Initiative:14,Accuracy:16,Guard:18,Resist:18,rollBonus:"+6",Speed:6,DMG:"d8"},{level:7,HP:80,Initiative:15,Accuracy:17,Guard:19,Resist:19,rollBonus:"+7",Speed:7,DMG:"d8"},{level:8,HP:90,Initiative:15,Accuracy:17,Guard:19,Resist:19,rollBonus:"+7",Speed:7,DMG:"d10"},{level:9,HP:95,Initiative:16,Accuracy:18,Guard:20,Resist:20,rollBonus:"+8",Speed:8,DMG:"d10"},{level:10,HP:100,Initiative:16,Accuracy:18,Guard:20,Resist:20,rollBonus:"+8",Speed:8,DMG:"d10"}],Enforcer:[{level:1,HP:40,Initiative:12,Accuracy:14,Guard:12,Resist:14,rollBonus:"+6",Speed:5,DMG:"d8"},{level:2,HP:60,Initiative:12,Accuracy:14,Guard:12,Resist:14,rollBonus:"+6",Speed:5,DMG:"d8"},{level:3,HP:80,Initiative:13,Accuracy:15,Guard:13,Resist:15,rollBonus:"+7",Speed:5,DMG:"d8"},{level:4,HP:90,Initiative:13,Accuracy:15,Guard:13,Resist:15,rollBonus:"+7",Speed:5,DMG:"d8"},{level:5,HP:100,Initiative:14,Accuracy:16,Guard:14,Resist:16,rollBonus:"+8",Speed:5,DMG:"d10"},{level:6,HP:110,Initiative:14,Accuracy:16,Guard:14,Resist:16,rollBonus:"+8",Speed:5,DMG:"d10"},{level:7,HP:120,Initiative:15,Accuracy:17,Guard:15,Resist:17,rollBonus:"+9",Speed:5,DMG:"d10"},{level:8,HP:130,Initiative:15,Accuracy:17,Guard:15,Resist:17,rollBonus:"+9",Speed:5,DMG:"d12"},{level:9,HP:140,Initiative:16,Accuracy:18,Guard:16,Resist:18,rollBonus:"+10",Speed:5,DMG:"d12"},{level:10,HP:150,Initiative:16,Accuracy:18,Guard:16,Resist:18,rollBonus:"+10",Speed:5,DMG:"d12"}],Guardian:[{level:1,HP:25,Initiative:12,Accuracy:14,Guard:16,Resist:14,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:40,Initiative:12,Accuracy:14,Guard:16,Resist:14,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:50,Initiative:13,Accuracy:15,Guard:17,Resist:15,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:60,Initiative:13,Accuracy:15,Guard:17,Resist:15,rollBonus:"+5",Speed:5,DMG:"d6"},{level:5,HP:70,Initiative:14,Accuracy:16,Guard:18,Resist:16,rollBonus:"+6",Speed:5,DMG:"d8"},{level:6,HP:80,Initiative:14,Accuracy:16,Guard:18,Resist:16,rollBonus:"+6",Speed:5,DMG:"d8"},{level:7,HP:85,Initiative:15,Accuracy:17,Guard:19,Resist:17,rollBonus:"+7",Speed:5,DMG:"d10"},{level:8,HP:90,Initiative:15,Accuracy:17,Guard:19,Resist:17,rollBonus:"+7",Speed:5,DMG:"d10"},{level:9,HP:95,Initiative:16,Accuracy:18,Guard:20,Resist:18,rollBonus:"+8",Speed:5,DMG:"d10"},{level:10,HP:100,Initiative:16,Accuracy:18,Guard:20,Resist:18,rollBonus:"+8",Speed:5,DMG:"d12"}],Harrier:[{level:1,HP:20,Initiative:16,Accuracy:14,Guard:14,Resist:12,rollBonus:"+2",Speed:6,DMG:"d6"},{level:2,HP:30,Initiative:16,Accuracy:14,Guard:14,Resist:12,rollBonus:"+2",Speed:6,DMG:"d6"},{level:3,HP:40,Initiative:17,Accuracy:15,Guard:15,Resist:13,rollBonus:"+3",Speed:7,DMG:"d6"},{level:4,HP:50,Initiative:17,Accuracy:15,Guard:15,Resist:13,rollBonus:"+3",Speed:7,DMG:"d6"},{level:5,HP:60,Initiative:18,Accuracy:16,Guard:16,Resist:14,rollBonus:"+4",Speed:8,DMG:"d8"},{level:6,HP:70,Initiative:18,Accuracy:16,Guard:16,Resist:14,rollBonus:"+4",Speed:8,DMG:"d8"},{level:7,HP:75,Initiative:19,Accuracy:17,Guard:17,Resist:15,rollBonus:"+5",Speed:9,DMG:"d8"},{level:8,HP:80,Initiative:19,Accuracy:17,Guard:17,Resist:15,rollBonus:"+5",Speed:9,DMG:"d8"},{level:9,HP:85,Initiative:20,Accuracy:18,Guard:18,Resist:16,rollBonus:"+6",Speed:10,DMG:"d10"},{level:10,HP:90,Initiative:20,Accuracy:18,Guard:18,Resist:16,rollBonus:"+6",Speed:10,DMG:"d10"}],Hellion:[{level:1,HP:30,Initiative:14,Accuracy:16,Guard:12,Resist:14,rollBonus:"+2",Speed:6,DMG:"d8"},{level:2,HP:50,Initiative:14,Accuracy:16,Guard:12,Resist:14,rollBonus:"+2",Speed:6,DMG:"d8"},{level:3,HP:60,Initiative:15,Accuracy:17,Guard:13,Resist:15,rollBonus:"+3",Speed:6,DMG:"d8"},{level:4,HP:70,Initiative:15,Accuracy:17,Guard:13,Resist:15,rollBonus:"+3",Speed:6,DMG:"d8"},{level:5,HP:80,Initiative:16,Accuracy:18,Guard:14,Resist:16,rollBonus:"+4",Speed:7,DMG:"d10"},{level:6,HP:90,Initiative:16,Accuracy:18,Guard:14,Resist:16,rollBonus:"+4",Speed:7,DMG:"d10"},{level:7,HP:100,Initiative:17,Accuracy:19,Guard:15,Resist:17,rollBonus:"+5",Speed:7,DMG:"d10"},{level:8,HP:110,Initiative:17,Accuracy:19,Guard:15,Resist:17,rollBonus:"+5",Speed:7,DMG:"d12"},{level:9,HP:115,Initiative:18,Accuracy:20,Guard:16,Resist:18,rollBonus:"+6",Speed:8,DMG:"d12"},{level:10,HP:120,Initiative:18,Accuracy:20,Guard:16,Resist:18,rollBonus:"+6",Speed:8,DMG:"d12"}],Stalker:[{level:1,HP:20,Initiative:14,Accuracy:16,Guard:14,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:30,Initiative:14,Accuracy:16,Guard:14,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:40,Initiative:15,Accuracy:17,Guard:15,Resist:13,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:50,Initiative:15,Accuracy:17,Guard:15,Resist:13,rollBonus:"+5",Speed:5,DMG:"d6"},{level:5,HP:60,Initiative:16,Accuracy:18,Guard:16,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:6,HP:70,Initiative:16,Accuracy:18,Guard:16,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:7,HP:80,Initiative:17,Accuracy:19,Guard:17,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:8,HP:90,Initiative:17,Accuracy:19,Guard:17,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:9,HP:95,Initiative:18,Accuracy:20,Guard:18,Resist:16,rollBonus:"+7",Speed:8,DMG:"d12"},{level:10,HP:100,Initiative:18,Accuracy:20,Guard:18,Resist:16,rollBonus:"+8",Speed:8,DMG:"d12"}],Sorcerer:[{level:1,HP:20,Initiative:12,Accuracy:16,Guard:12,Resist:16,rollBonus:"+4",Speed:5,DMG:"d8"},{level:2,HP:30,Initiative:12,Accuracy:16,Guard:12,Resist:16,rollBonus:"+4",Speed:5,DMG:"d8"},{level:3,HP:40,Initiative:13,Accuracy:17,Guard:13,Resist:17,rollBonus:"+5",Speed:5,DMG:"d8"},{level:4,HP:50,Initiative:13,Accuracy:17,Guard:13,Resist:17,rollBonus:"+5",Speed:5,DMG:"d8"},{level:5,HP:55,Initiative:14,Accuracy:18,Guard:14,Resist:18,rollBonus:"+6",Speed:5,DMG:"d10"},{level:6,HP:60,Initiative:14,Accuracy:18,Guard:14,Resist:18,rollBonus:"+6",Speed:5,DMG:"d10"},{level:7,HP:65,Initiative:15,Accuracy:19,Guard:15,Resist:19,rollBonus:"+7",Speed:6,DMG:"d10"},{level:8,HP:70,Initiative:15,Accuracy:19,Guard:15,Resist:19,rollBonus:"+7",Speed:6,DMG:"d12"},{level:9,HP:75,Initiative:16,Accuracy:20,Guard:16,Resist:20,rollBonus:"+8",Speed:7,DMG:"d12"},{level:10,HP:80,Initiative:16,Accuracy:20,Guard:16,Resist:20,rollBonus:"+8",Speed:7,DMG:"d12"}]},o={Normal:[10,20,30,40,50,60,70,80,90,100],Underling:[3,5,7,10,12,15,17,20,22,25],Paragon:[20,40,60,80,100,120,140,160,180,200],Tyrant:[40,80,120,160,200,240,280,320,360,400]},u=["d6","d8","d10","d12"];function x(e,s){var t;if(!e||s<1||s>10)return null;let l=null==(t=d[e])?void 0:t[s-1];if(!l)return null;let r=parseInt(l.rollBonus,10);return{...l,rollBonus:isNaN(r)?0:r}}var m=t(62523),h=t(30285),p=t(66424),j=t(22346),v=t(87481),f=t(85057),g=t(59409),b=t(50172),y=t(34301),N=t(68718),w=t(75074),S=t(20203),R=t(73926),G=t(90648),A=t(54165),C=t(47262),M=t(58962);let B=e=>{switch(e){case"light":return"L";case"heavy":return"H";case"mighty":return"M";case"tyrant":return"T";case"special":return"S"}},I=(e,s)=>e?e.replace(/\\dd/g,s).split(/(\bconfer\s+\w+\s+\d+\b)/gi).map((e,s)=>{if(e.match(/\bconfer\s+\w+\s+\d+\b/i)){let t=e.split(" ");return(0,l.jsxs)("span",{children:[t.slice(0,-1).join(" ")," ",(0,l.jsx)("span",{className:"font-bold",children:t[t.length-1]})]},s)}return e}):null,P=e=>{let{template:s}=e;switch(s){case"Underling":return(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-bold",children:"Underling:"})," Any amount of damage from a hit is enough to kill this creature. It is immune to state damage, environmental damage and damage from missed attacks."]});case"Paragon":return(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-bold",children:"Extra Turn:"})," This creature takes an additional turn at the end of the round. Immune to effects that delay its turn (loses an action point on its next turn instead)."]});case"Tyrant":return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-bold",children:"Extra Turn:"})," This creature takes an additional turn at the end of the round. Immune to effects that delay its turn (loses an action point on its next turn instead)."]}),(0,l.jsxs)("p",{className:"mt-1",children:[(0,l.jsx)("span",{className:"font-bold",children:"Unstoppable:"})," Can make a free prevail check against one state at the end of each round."]})]});default:return null}};function D(e){let{creature:s}=e;if(!s)return null;let t={light:0,heavy:1,mighty:2,tyrant:3,special:4},r=[...s.deeds].sort((e,s)=>t[e.tier]-t[s.tier]),a=(e,t)=>{if(!t)return null;let r=I(t,s.attributes.DMG);return(0,l.jsxs)("p",{children:[(0,l.jsxs)("span",{className:"font-bold",children:[e,":"]})," ",r]})};return(0,l.jsxs)("div",{className:"bg-stone-200 text-black font-sans text-xs w-[350px] shadow-lg",style:{fontFamily:"Literata, serif"},children:[(0,l.jsxs)("header",{className:"flex bg-gray-700 text-white font-bold uppercase",children:[(0,l.jsx)("h1",{className:"flex-1 p-1.5 pl-2",children:s.name}),(0,l.jsxs)("div",{className:"border-l-2 border-white p-1.5 px-3",children:["TR ",s.TR]})]}),(0,l.jsxs)("section",{className:"p-2 grid grid-cols-2 gap-x-4 bg-white border-b border-stone-300",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," ",s.role," ","Normal"!==s.template&&s.template," ",s.level]}),(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," HP: ",s.attributes.HP]}),(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," Speed: ",s.attributes.Speed]}),(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," Initiative: ",s.attributes.Initiative]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," Accuracy: ",s.attributes.Accuracy]}),(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," Guard: ",s.attributes.Guard]}),(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," Resist: ",s.attributes.Resist]}),(0,l.jsxs)("p",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(M.A,{className:"w-2 h-2 fill-current"})," Roll Bonus: ",s.attributes.rollBonus>0?"+".concat(s.attributes.rollBonus):s.attributes.rollBonus]})]})]}),"Normal"!==s.template&&(0,l.jsx)("section",{className:"p-2 bg-stone-100 border-b border-stone-300 text-stone-800",children:(0,l.jsx)(P,{template:s.template})}),s.abilities&&s.abilities.length>0&&(0,l.jsx)("section",{className:"p-2 bg-white border-b border-stone-300",children:(0,l.jsx)("div",{className:"space-y-1",children:s.abilities.map((e,s)=>(0,l.jsxs)("p",{children:[(0,l.jsxs)("span",{className:"font-bold",children:[e.name,":"]})," ",e.description]},e.id||s))})}),(0,l.jsx)("section",{className:"space-y-1",children:r.map(e=>(0,l.jsxs)("div",{className:"p-2 border-t border-stone-300",children:[(0,l.jsxs)("h2",{className:"font-bold",children:["(",B(e.tier),") ",e.name.toUpperCase()," ",(0,l.jsx)(M.A,{className:"w-2 h-2 inline-block fill-current"})," ",e.deedType.toUpperCase()," ATTACK VS. ",e.versus.toUpperCase()]}),(0,l.jsxs)("div",{className:"pl-3 text-stone-800 space-y-0.5",children:[e.target&&(0,l.jsxs)("p",{children:["Target: ",e.target]}),a("Start",e.effects.start),a("Base",e.effects.base),a("Hit",e.effects.hit),a("Spark",e.effects.spark),a("Shadow",e.effects.shadow),a("After",e.effects.after)]})]},e.id))})]})}var T=t(78064),H=t(59311),z=t.n(H);let k=["Normal","Underling","Paragon","Tyrant"];function F(e){let{onSelectCreature:s,onNewCreature:t,selectedCreatureId:i,dataVersion:d,filters:o,setFilters:u,onClearFilters:x}=e,[M,B]=(0,r.useState)([]),[I,P]=(0,r.useState)(!0),{toast:H}=(0,v.dj)(),[F,L]=(0,r.useState)(!1),[E,J]=(0,r.useState)(new Set),[U,$]=(0,r.useState)(!1),[V,q]=(0,r.useState)(null),[O,W]=(0,r.useState)(""),Z=(0,r.useRef)(null),_={searchTerm:"",roleFilter:"all",templateFilter:"all",minLevel:"",maxLevel:"",minTR:"",maxTR:"",tagFilter:""},[K,Y]=(0,r.useState)(_);(0,r.useEffect)(()=>{(async()=>{P(!0);try{let e=await (0,a.OG)();B(e)}catch(e){console.error("Error fetching creatures:",e),H({variant:"destructive",title:"Error",description:"Could not fetch creatures from database."})}finally{P(!1)}})()},[d,H]);let Q=async()=>{if(0===E.size)return void H({variant:"destructive",title:"No creatures selected",description:"Please select at least one creature to export."});$(!0),H({title:"Starting Export...",description:"Preparing ".concat(E.size," creature(s).")});try{let e=await n(Array.from(E)),s=new(z()),t=1;for(let l of e){if(q(l),W("Exporting ".concat(t," of ").concat(e.length,": ").concat(l.name)),await new Promise(e=>requestAnimationFrame(()=>setTimeout(e,50))),Z.current)try{let e=await T.$E(Z.current,{quality:1,pixelRatio:2,backgroundColor:"#e7e5e4"}),t=await (await fetch(e)).blob();s.file("".concat(l.name.replace(/ /g,"_"),".png"),t)}catch(e){console.error("Failed to export ".concat(l.name,":"),e),H({variant:"destructive",title:"Failed to export ".concat(l.name)})}t++}let l=await s.generateAsync({type:"blob"}),r=document.createElement("a");r.href=URL.createObjectURL(l),r.download="exported_creatures.zip",document.body.appendChild(r),r.click(),document.body.removeChild(r),H({title:"Export finished!",description:"".concat(e.length," creature(s) have been exported.")})}catch(e){console.error("Export failed",e),H({variant:"destructive",title:"Export Failed",description:"An unexpected error occurred."})}finally{$(!1),q(null),W(""),L(!1),J(new Set)}},X=(e,s)=>e.filter(e=>{let t=e.name.toLowerCase().includes(s.searchTerm.toLowerCase()),l="all"===s.roleFilter||e.role===s.roleFilter,r="all"===s.templateFilter||e.template===s.templateFilter,a=!0;s.minLevel&&!isNaN(parseInt(s.minLevel))&&(a=a&&e.level>=parseInt(s.minLevel,10)),s.maxLevel&&!isNaN(parseInt(s.maxLevel))&&(a=a&&e.level<=parseInt(s.maxLevel,10));let i=!0;s.minTR&&!isNaN(parseInt(s.minTR))&&(i=i&&e.TR>=parseInt(s.minTR,10)),s.maxTR&&!isNaN(parseInt(s.maxTR))&&(i=i&&e.TR<=parseInt(s.maxTR,10));let n=!0;if(s.tagFilter){let t=s.tagFilter.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean);t.length>0&&(n=e.tags&&e.tags.length>0&&t.every(s=>e.tags.some(e=>e.toLowerCase().includes(s))))}return t&&l&&r&&a&&i&&n}),ee=(0,r.useMemo)(()=>X(M,K),[M,K]),es=(0,r.useMemo)(()=>{let e=X(M,o).sort((e,s)=>{if("TR"===o.sortBy){let t=e.TR-s.TR;if(0!==t)return t}if("level"===o.sortBy){let t=e.level-s.level;if(0!==t)return t}return e.name.localeCompare(s.name)});return"desc"===o.sortOrder&&e.reverse(),e},[M,o]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.lG,{open:U,children:(0,l.jsxs)(A.Cf,{className:"sm:max-w-md",onInteractOutside:e=>e.preventDefault(),children:[(0,l.jsxs)(A.c7,{children:[(0,l.jsx)(A.L3,{children:"Exporting Creatures"}),(0,l.jsx)(A.rr,{children:"Please wait while the creature cards are being generated."})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 p-4",children:[(0,l.jsx)("div",{className:"min-h-[200px]",children:(0,l.jsx)("div",{ref:Z,children:V&&(0,l.jsx)(D,{creature:V})})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,l.jsx)(b.A,{className:"animate-spin h-4 w-4"}),(0,l.jsx)("span",{children:O})]})]})]})}),(0,l.jsxs)("div",{className:"border-r border-border bg-card flex flex-col h-full",children:[(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(h.$,{onClick:t,className:"w-full",children:[(0,l.jsx)(y.A,{})," New Creature"]}),(0,l.jsxs)(A.lG,{open:F,onOpenChange:L,children:[(0,l.jsx)(A.zM,{asChild:!0,children:(0,l.jsx)(h.$,{variant:"outline",className:"px-3",title:"Export as PNG",children:(0,l.jsx)(N.A,{})})}),(0,l.jsxs)(A.Cf,{className:"max-w-4xl",children:[(0,l.jsxs)(A.c7,{children:[(0,l.jsx)(A.L3,{children:"Export Creatures to PNG"}),(0,l.jsx)(A.rr,{children:"Select the creatures you want to export. They will be downloaded as a single ZIP file."})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("div",{className:"w-64 flex-shrink-0 space-y-4",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"Filters"}),(0,l.jsx)(m.p,{placeholder:"Search...",value:K.searchTerm,onChange:e=>Y(s=>({...s,searchTerm:e.target.value}))}),(0,l.jsxs)(g.l6,{value:K.templateFilter,onValueChange:e=>Y(s=>({...s,templateFilter:e})),children:[(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"All Templates"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"all",children:"All Templates"}),k.map(e=>(0,l.jsx)(g.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)(g.l6,{value:K.roleFilter,onValueChange:e=>Y(s=>({...s,roleFilter:e})),children:[(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"All Roles"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"all",children:"All Roles"}),c.map(e=>(0,l.jsx)(g.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(m.p,{placeholder:"Min Lvl",type:"number",value:K.minLevel,onChange:e=>Y(s=>({...s,minLevel:e.target.value}))}),(0,l.jsx)(m.p,{placeholder:"Max Lvl",type:"number",value:K.maxLevel,onChange:e=>Y(s=>({...s,maxLevel:e.target.value}))})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(m.p,{placeholder:"Min TR",type:"number",value:K.minTR,onChange:e=>Y(s=>({...s,minTR:e.target.value}))}),(0,l.jsx)(m.p,{placeholder:"Max TR",type:"number",value:K.maxTR,onChange:e=>Y(s=>({...s,maxTR:e.target.value}))})]}),(0,l.jsx)(G.F,{value:K.tagFilter?K.tagFilter.split(",").map(e=>e.trim()).filter(Boolean):[],onChange:e=>Y(s=>({...s,tagFilter:e.join(",")})),placeholder:"Tags...",tagSource:"creature"}),(0,l.jsx)(h.$,{variant:"ghost",className:"w-full",onClick:()=>Y(_),children:"Clear Filters"})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)(f.J,{children:[E.size," of ",ee.length," selected"]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(h.$,{variant:"link",className:"p-0 h-auto",onClick:()=>{let e=new Set(ee.map(e=>e.id));J(s=>new Set([...Array.from(s),...Array.from(e)]))},children:"Select All Visible"}),(0,l.jsx)(h.$,{variant:"link",className:"p-0 h-auto",onClick:()=>{let e=new Set(ee.map(e=>e.id));J(s=>{let t=new Set(s);return e.forEach(e=>t.delete(e)),t})},children:"Deselect All Visible"})]})]}),(0,l.jsx)(p.F,{className:"h-64 border rounded-md",children:(0,l.jsx)("div",{className:"p-4 space-y-2",children:ee.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(C.S,{id:"export-".concat(e.id),checked:E.has(e.id),onCheckedChange:s=>{J(t=>{let l=new Set(t);return s?l.add(e.id):l.delete(e.id),l})}}),(0,l.jsx)(f.J,{htmlFor:"export-".concat(e.id),className:"font-normal",children:e.name})]},e.id))})})]})]}),(0,l.jsxs)(A.Es,{className:"mt-4",children:[(0,l.jsx)(h.$,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),(0,l.jsx)(h.$,{onClick:Q,disabled:U||0===E.size,children:U?"Exporting...":"Export ".concat(E.size," Creature(s)")})]})]})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(w.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(m.p,{placeholder:"Search creatures...",value:o.searchTerm,onChange:e=>u.setSearchTerm(e.target.value),className:"pl-9"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(f.J,{children:"Filter"}),(0,l.jsx)(h.$,{variant:"ghost",size:"sm",onClick:x,className:"text-xs h-auto p-1",children:"Clear"})]}),(0,l.jsxs)(g.l6,{value:o.templateFilter,onValueChange:u.setTemplateFilter,children:[(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Filter by template"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"all",children:"All Templates"}),k.map(e=>(0,l.jsx)(g.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)(g.l6,{value:o.roleFilter,onValueChange:u.setRoleFilter,children:[(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Filter by role"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"all",children:"All Roles"}),c.map(e=>(0,l.jsx)(g.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(m.p,{placeholder:"Min Lvl",type:"number",value:o.minLevel,onChange:e=>u.setMinLevel(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,l.jsx)(m.p,{placeholder:"Max Lvl",type:"number",value:o.maxLevel,onChange:e=>u.setMaxLevel(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(m.p,{placeholder:"Min TR",type:"number",value:o.minTR,onChange:e=>u.setMinTR(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,l.jsx)(m.p,{placeholder:"Max TR",type:"number",value:o.maxTR,onChange:e=>u.setMaxTR(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,l.jsx)(G.F,{value:o.tagFilter?o.tagFilter.split(",").map(e=>e.trim()).filter(Boolean):[],onChange:e=>u.setTagFilter(e.join(",")),placeholder:"Tags (e.g. undead, goblin)",tagSource:"creature"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"Sort by"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(g.l6,{value:o.sortBy,onValueChange:e=>u.setSortBy(e),children:[(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Sort by"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"name",children:"Name"}),(0,l.jsx)(g.eb,{value:"TR",children:"TR"}),(0,l.jsx)(g.eb,{value:"level",children:"Level"})]})]}),(0,l.jsxs)(h.$,{variant:"ghost",size:"icon",onClick:()=>u.setSortOrder(e=>"asc"===e?"desc":"asc"),children:["asc"===o.sortOrder?(0,l.jsx)(S.A,{className:"h-4 w-4"}):(0,l.jsx)(R.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Toggle sort order"})]})]})]})]}),(0,l.jsx)(j.w,{}),(0,l.jsx)(p.F,{className:"flex-1",children:(0,l.jsx)("div",{className:"p-4",children:I?(0,l.jsx)("p",{className:"text-muted-foreground text-center",children:"Loading creatures..."}):es.length>0?(0,l.jsx)("ul",{className:"space-y-1",children:es.map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("button",{onClick:()=>s(e.id),className:"w-full text-left p-2 rounded-md transition-colors ".concat(i===e.id?"bg-primary text-primary-foreground":"hover:bg-accent/50"),children:[e.name," ",(0,l.jsxs)("span",{className:"text-xs opacity-70",children:["(Lvl ",e.level," / TR ",e.TR,")"]})]})},e.id))}):(0,l.jsx)("p",{className:"text-muted-foreground text-center",children:"No creatures found."})})})]})]})}var L=t(62177),E=t(90221),J=t(55594),U=t(44218),$=t(23062),V=t(66695),q=t(88539),O=t(90010),W=t(17759),Z=t(14337),_=t(12543),K=t(15599),Y=t(18763),Q=t(68098),X=t(14014),ee=t(89829),es=t(64442),et=t(45731),el=t(69479),er=t(77119),ea=t(18051),ei=t(77223),en=t(25318),ec=t(18046),ed=t(21887),eo=t(53054),eu=t(68856),ex=t(8643),em=t(88911),eh=t(26126),ep=t(47906);let ej=["Normal","Underling","Paragon","Tyrant"],ev=J.z.object({start:J.z.string().optional(),base:J.z.string().optional(),hit:J.z.string().optional(),spark:J.z.string().optional(),shadow:J.z.string().optional(),after:J.z.string().optional()}),ef=J.z.object({id:J.z.string().optional(),name:J.z.string().min(1,"Deed name is required"),tier:J.z.enum(["light","heavy","mighty","tyrant","special"]),actionType:J.z.enum($.GW),deedType:J.z.enum($.FC),versus:J.z.enum($.OJ),target:J.z.string().optional(),effects:ev,tags:J.z.array(J.z.string()).optional()}),eg=J.z.object({id:J.z.string(),name:J.z.string().min(1,"Ability name is required"),description:J.z.string().min(1,"Ability description is required")}),eb=J.z.object({name:J.z.string().min(1,"Name is required"),level:J.z.coerce.number().int().min(1).max(10),role:J.z.enum(c),template:J.z.enum(ej),TR:J.z.coerce.number().int().min(0),attributes:J.z.object({HP:J.z.coerce.number().int().min(0),Speed:J.z.coerce.number().int().min(0),Initiative:J.z.coerce.number().int().min(0),Accuracy:J.z.coerce.number().int().min(0),Guard:J.z.coerce.number().int().min(0),Resist:J.z.coerce.number().int().min(0),rollBonus:J.z.coerce.number().int().min(0),DMG:J.z.string()}),deeds:J.z.array(ef),abilities:J.z.array(eg).optional(),description:J.z.string().optional(),tags:J.z.array(J.z.string()).optional()}),ey={name:"",level:1,role:"Archer",template:"Normal",TR:1,attributes:{HP:20,Speed:5,Initiative:14,Accuracy:16,Guard:12,Resist:12,rollBonus:4,DMG:"d6"},deeds:[],abilities:[],description:"",tags:[]},eN=e=>{let{onAddDeeds:s,allDeeds:t,existingDeedIds:a}=e,[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(new Set),[o,u]=(0,r.useState)(""),[x,j]=(0,r.useState)("all"),[v,f]=(0,r.useState)(""),b=(0,r.useMemo)(()=>t.filter(e=>{let s=e.name.toLowerCase().includes(o.toLowerCase()),t="all"===x||e.tier===x,l=v.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean),r=0===l.length||e.tags&&l.every(s=>e.tags.some(e=>e.toLowerCase().includes(s)));return s&&t&&r}),[t,o,x,v]),y=e=>{d(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})};return(0,l.jsxs)(A.lG,{open:i,onOpenChange:n,children:[(0,l.jsx)(A.zM,{asChild:!0,children:(0,l.jsxs)(h.$,{type:"button",size:"sm",variant:"outline",children:[(0,l.jsx)(Z.A,{className:"h-4 w-4 mr-2"})," Add From Library"]})}),(0,l.jsxs)(A.Cf,{className:"max-w-2xl h-[70vh] flex flex-col",children:[(0,l.jsxs)(A.c7,{children:[(0,l.jsx)(A.L3,{children:"Select Deeds from Library"}),(0,l.jsx)(A.rr,{children:"Select one or more deeds to add to the creature."})]}),(0,l.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,l.jsx)(m.p,{placeholder:"Search deeds...",value:o,onChange:e=>u(e.target.value),className:"flex-1 min-w-[150px]"}),(0,l.jsxs)(g.l6,{value:x,onValueChange:j,children:[(0,l.jsx)(g.bq,{className:"w-full sm:w-[120px]",children:(0,l.jsx)(g.yv,{placeholder:"Filter tier"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"all",children:"All Tiers"}),(0,l.jsx)(g.eb,{value:"light",children:"Light"}),(0,l.jsx)(g.eb,{value:"heavy",children:"Heavy"}),(0,l.jsx)(g.eb,{value:"mighty",children:"Mighty"})]})]}),(0,l.jsx)(m.p,{placeholder:"Filter by tags...",value:v,onChange:e=>f(e.target.value),className:"flex-1 min-w-[150px]"})]}),(0,l.jsx)(p.F,{className:"flex-1 border rounded-md p-4",children:(0,l.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(C.S,{id:"deed-".concat(e.id),onCheckedChange:()=>y(e.id),checked:c.has(e.id),disabled:a.has(e.id)}),(0,l.jsxs)("label",{htmlFor:"deed-".concat(e.id),className:"flex-1",children:[(0,l.jsxs)("p",{className:"font-semibold",children:[e.name," ",(0,l.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.tier,")"]})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.effects.hit})]})]},e.id))})}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,l.jsx)(h.$,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),(0,l.jsx)(h.$,{onClick:()=>{s(t.filter(e=>c.has(e.id))),n(!1),d(new Set),u(""),j("all"),f("")},disabled:0===c.size,children:"Add Selected"})]})]})]})};function ew(e){let{creatureId:s,isCreatingNew:t,template:n,onCreatureSaveSuccess:d,onCreatureDeleteSuccess:p,onUseAsTemplate:b,onEditCancel:y,dataVersion:N,onFilterByClick:w,onBack:S}=e,{toast:R}=(0,v.dj)(),[A,C]=(0,r.useState)(t),[M,B]=(0,r.useState)(!t&&!!s),[I,P]=(0,r.useState)(null),[D,T]=(0,r.useState)([]),H=(0,ep.a)(),z=(0,r.useMemo)(()=>{if(t)if(n){let e={...ey,...n,abilities:(n.abilities||[]).map(e=>({...e,id:e.id||crypto.randomUUID()})),description:n.description||"",tags:n.tags||[],deeds:(n.deeds||[]).map(e=>{var s,t,l,r,a,i;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(t=e.effects)?void 0:t.base)||"",hit:(null==(l=e.effects)?void 0:l.hit)||"",spark:(null==(r=e.effects)?void 0:r.spark)||"",shadow:(null==(a=e.effects)?void 0:a.shadow)||"",after:(null==(i=e.effects)?void 0:i.after)||""},tags:e.tags||[]}})};return delete e.id,e}else{let e=x(ey.role,ey.level);return{...ey,attributes:e||ey.attributes}}return ey},[t,n]),k=(0,L.mN)({resolver:(0,E.u)(eb),defaultValues:z}),{fields:F,append:J,remove:Z,replace:ev}=(0,L.jz)({control:k.control,name:"deeds"}),{fields:ef,append:eg,remove:ew}=(0,L.jz)({control:k.control,name:"abilities"}),{watch:eS,setValue:eR,getValues:eG}=k,eA=eS("role"),eC=eS("level"),eM=eS("template"),eB=eS();(0,r.useEffect)(()=>{if(A){let t=x(eA,eC);if(t){var e,s;let l=eC<1||eC>10?0:null!=(s=null==(e=o[eM])?void 0:e[eC-1])?s:0,r=t.HP,a=t.DMG;switch(eM){case"Underling":r=1,a=function(e){let s=u.indexOf(e);return s>0?u[s-1]:u[0]}(t.DMG),ev(eG("deeds").filter(e=>"light"===e.tier));break;case"Paragon":r=2*t.HP;break;case"Tyrant":r=4*t.HP}eR("attributes",{...t,HP:r,DMG:a}),eR("TR",l)}}},[eA,eC,eM,eR,A,eG,ev]),(0,r.useEffect)(()=>{(0,i.xy)().then(T).catch(e=>console.error("Could not fetch all deeds",e))},[N]),(0,r.useEffect)(()=>{(async()=>{if(t||!s){C(t),B(!1),P(n||null);return}B(!0),C(!1);try{let e=await (0,a.s2)(s);if(e){let s=await (0,i.pT)(e.deeds),t=[];"string"==typeof e.abilities&&e.abilities.length>0?t=e.abilities.split("\n\n").map(e=>{let s=e.match(RegExp("\\*\\*(.*?):\\*\\*\\s*(.*)","s"));return s&&s[1]&&s[2]?{id:crypto.randomUUID(),name:s[1],description:s[2].trim()}:!s&&e.trim()?{id:crypto.randomUUID(),name:"Ability",description:e.trim()}:null}).filter(e=>null!==e):Array.isArray(e.abilities)&&(t=e.abilities.map(e=>({...e,id:e.id||crypto.randomUUID()})));let l={...e,abilities:t,deeds:s};P(l);let r={...ey,...l,description:l.description||"",template:l.template||"Normal",tags:l.tags||[],deeds:s.map(e=>{var s,t,l,r,a,i;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(t=e.effects)?void 0:t.base)||"",hit:(null==(l=e.effects)?void 0:l.hit)||"",spark:(null==(r=e.effects)?void 0:r.spark)||"",shadow:(null==(a=e.effects)?void 0:a.shadow)||"",after:(null==(i=e.effects)?void 0:i.after)||""},tags:e.tags||[]}})};k.reset(r)}}catch(e){console.error("Failed to fetch creature data:",e),R({variant:"destructive",title:"Error",description:"Could not load creature data."})}finally{B(!1)}})()},[s,t,k,R,N,n]);let eI=async e=>{try{"Underling"===e.template&&(e.deeds=e.deeds.filter(e=>"light"===e.tier));let l=e.deeds.map(e=>{if(!e.id){let{id:s,...t}=e,l={...t,tags:t.tags||[]};return(0,i.W$)(l)}return Promise.resolve(e.id)}),r=await Promise.all(l),n={...e,tags:e.tags||[],abilities:e.abilities||[],deeds:r},c=e.tags||[];if(c.length>0&&await (0,U.JE)(c,"creature"),t){let s=await (0,a.RW)(n);R({title:"Creature Created!",description:"".concat(e.name," has been added to the bestiary.")}),d(s)}else s&&(await (0,a.ZK)({...n,id:s}),R({title:"Save Successful",description:"".concat(e.name," has been updated.")}),d(s));C(!1)}catch(e){console.error("Failed to save creature:",e),R({variant:"destructive",title:"Save Failed",description:"Could not save changes."})}},eP=async()=>{if(s)try{await (0,a.PW)(s),R({title:"Creature Deleted",description:"The creature has been removed from the bestiary."}),p()}catch(e){console.error("Failed to delete creature:",e),R({variant:"destructive",title:"Deletion Failed",description:"Could not delete the creature."})}},eD=()=>{if(t)y();else{if(I){let e={...ey,...I,description:I.description||"",template:I.template||"Normal",tags:I.tags||[],deeds:I.deeds.map(e=>{var s,t,l,r,a,i;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(t=e.effects)?void 0:t.base)||"",hit:(null==(l=e.effects)?void 0:l.hit)||"",spark:(null==(r=e.effects)?void 0:r.spark)||"",shadow:(null==(a=e.effects)?void 0:a.shadow)||"",after:(null==(i=e.effects)?void 0:i.after)||""},tags:e.tags||[]}})};k.reset(e)}C(!1)}},eT={light:0,heavy:1,mighty:2,tyrant:3,special:4},eH=(0,r.useMemo)(()=>new Set(F.map(e=>e.id).filter(Boolean)),[F]);if(M&&!t)return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsxs)(V.Zp,{children:[(0,l.jsxs)(V.aR,{className:"flex flex-row items-center justify-between",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(eu.E,{className:"h-8 w-48"}),(0,l.jsx)(eu.E,{className:"h-4 w-32"})]}),(0,l.jsx)(eu.E,{className:"h-10 w-24"})]}),(0,l.jsxs)(V.Wu,{children:[(0,l.jsx)(j.w,{className:"my-6"}),(0,l.jsx)(eu.E,{className:"h-6 w-32 mb-4"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,l.jsx)(eu.E,{className:"h-12 w-full"}),(0,l.jsx)(eu.E,{className:"h-12 w-full"}),(0,l.jsx)(eu.E,{className:"h-12 w-full"}),(0,l.jsx)(eu.E,{className:"h-12 w-full"}),(0,l.jsx)(eu.E,{className:"h-12 w-full"}),(0,l.jsx)(eu.E,{className:"h-12 w-full"}),(0,l.jsx)(eu.E,{className:"h-12 w-full"})]}),(0,l.jsx)(j.w,{className:"my-6"}),(0,l.jsx)(eu.E,{className:"h-6 w-32 mb-4"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(eu.E,{className:"h-24 w-full"}),(0,l.jsx)(eu.E,{className:"h-24 w-full"})]})]})]})});if(!t&&!s&&!M)return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsx)(V.Zp,{className:"h-full flex items-center justify-center min-h-[300px]",children:(0,l.jsxs)(V.Wu,{className:"text-center pt-6",children:[(0,l.jsx)("p",{className:"text-xl text-muted-foreground",children:"Select a creature to view"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"or create a new one."})]})})});if(!A&&s&&I){let e=[...I.deeds].sort((e,s)=>eT[e.tier]-eT[s.tier]);return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsxs)(V.Zp,{children:[(0,l.jsx)(V.aR,{children:(0,l.jsxs)("div",{className:"flex flex-row items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[H&&S&&(0,l.jsx)(h.$,{variant:"ghost",size:"icon",onClick:S,className:"-ml-4 -mt-1",children:(0,l.jsx)(_.A,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(V.ZB,{className:"text-3xl font-bold",children:I.name}),(0,l.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground flex flex-col items-start gap-1",children:[(0,l.jsx)("p",{children:(0,l.jsxs)("button",{onClick:e=>w({templateFilter:I.template,roleFilter:I.role,minLevel:I.level,maxLevel:I.level},e),className:"hover:underline p-0 bg-transparent text-inherit",children:["Lvl ",I.level," ",I.template," ",I.role]})}),(0,l.jsx)("p",{children:(0,l.jsxs)("button",{onClick:e=>w({minTR:I.TR,maxTR:I.TR},e),className:"hover:underline p-0 bg-transparent text-inherit",children:["TR ",I.TR]})}),I.tags&&I.tags.length>0&&(0,l.jsx)("div",{className:"flex flex-wrap items-center gap-2 pt-1",children:I.tags.map(e=>(0,l.jsx)("button",{onClick:s=>w({tagFilter:e},s),className:"bg-transparent border-none p-0 m-0",children:(0,l.jsx)(eh.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",children:e})},e))})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{I&&b(I)},children:[(0,l.jsx)(K.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Template"})]}),(0,l.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>C(!0),children:[(0,l.jsx)(Y.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]})]})]})}),(0,l.jsxs)(V.Wu,{children:[(0,l.jsx)(j.w,{className:"my-6"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Attributes"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-x-6 gap-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(Q.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"HP"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.HP})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(X.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"Speed"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.Speed})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(ee.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"Initiative"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.Initiative})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(es.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"Accuracy"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.Accuracy})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(et.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"Guard"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.Guard})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(el.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"Resist"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.Resist})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(er.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"Roll Bonus"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.rollBonus>0?"+".concat(I.attributes.rollBonus):I.attributes.rollBonus})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(ea.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.J,{children:"DMG"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:I.attributes.DMG})]})]})]})]}),I.abilities&&I.abilities.length>0&&(0,l.jsx)(j.w,{className:"my-6"}),I.abilities&&I.abilities.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2 text-primary-foreground",children:"Abilities"}),(0,l.jsx)("div",{className:"space-y-2",children:I.abilities.map(e=>(0,l.jsxs)("p",{className:"text-foreground/90 whitespace-pre-wrap",children:[(0,l.jsxs)("span",{className:"font-bold",children:[e.name,":"]})," ",e.description]},e.id))})]}),(0,l.jsx)(j.w,{className:"my-6"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Deeds"}),e.length>0?e.map((e,s)=>(0,l.jsx)(em.P,{deed:e,dmgReplacement:I.attributes.DMG},s)):(0,l.jsx)("p",{className:"text-muted-foreground",children:"No deeds defined."})]}),I.description&&(0,l.jsx)(j.w,{className:"my-6"}),I.description&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2 text-primary-foreground",children:"Description"}),(0,l.jsx)("p",{className:"text-foreground/90 whitespace-pre-wrap",children:I.description})]})]}),(0,l.jsx)(V.wL,{children:(0,l.jsxs)(O.Lt,{children:[(0,l.jsx)(O.tv,{asChild:!0,children:(0,l.jsx)(h.$,{type:"button",variant:"destructive",size:"sm",children:(0,l.jsx)(ei.A,{className:"h-4 w-4"})})}),(0,l.jsxs)(O.EO,{children:[(0,l.jsxs)(O.wd,{children:[(0,l.jsx)(O.r7,{children:"Are you sure?"}),(0,l.jsxs)(O.$v,{children:['This will permanently delete "',k.getValues("name"),'". This action cannot be undone.']})]}),(0,l.jsxs)(O.ck,{children:[(0,l.jsx)(O.Zr,{children:"Cancel"}),(0,l.jsx)(O.Rx,{onClick:eP,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})})]})})}return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsx)(V.Zp,{children:(0,l.jsx)(W.lV,{...k,children:(0,l.jsxs)("form",{onSubmit:k.handleSubmit(eI),className:"space-y-6",children:[(0,l.jsx)(V.aR,{children:(0,l.jsxs)("div",{className:"flex flex-row justify-between items-start",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[H&&S&&(0,l.jsx)(h.$,{type:"button",variant:"ghost",size:"icon",onClick:eD,className:"-ml-4",children:(0,l.jsx)(_.A,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(V.ZB,{children:t?H?"New Creature":"Create a New Creature":"Editing: ".concat((null==I?void 0:I.name)||"...")}),(0,l.jsx)(V.BT,{children:t?"Fill out the details for your new creature.":"Make your changes and click Save."})]})]}),!H&&(0,l.jsx)(h.$,{type:"button",variant:"ghost",size:"icon",onClick:eD,className:"text-muted-foreground hover:text-foreground",children:(0,l.jsx)(en.A,{className:"h-5 w-5"})})]})}),(0,l.jsxs)(V.Wu,{className:"space-y-8 pt-0",children:[(0,l.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsx)(W.zB,{name:"name",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{className:"lg:col-span-2",children:[(0,l.jsx)(W.lR,{children:"Name"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{placeholder:"e.g., Gloomfang Serpent",...s})}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"level",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Level"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",min:"1",max:"10",...s})}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"TR",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"TR"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})}),(0,l.jsx)(W.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsx)(W.zB,{name:"template",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Template"}),(0,l.jsxs)(g.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(W.MJ,{children:(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Select a template"})})}),(0,l.jsx)(g.gC,{children:ej.map(e=>(0,l.jsx)(g.eb,{value:e,children:e},e))})]}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"role",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Role"}),(0,l.jsxs)(g.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(W.MJ,{children:(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Select a role"})})}),(0,l.jsx)(g.gC,{children:c.map(e=>(0,l.jsx)(g.eb,{value:e,children:e},e))})]}),(0,l.jsx)(W.C5,{})]})}})]}),(0,l.jsx)(j.w,{}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Attributes"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[(0,l.jsx)(W.zB,{name:"attributes.HP",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(Q.A,{className:"h-4 w-4 text-accent"}),"HP"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})})]})}}),(0,l.jsx)(W.zB,{name:"attributes.Speed",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(X.A,{className:"h-4 w-4 text-accent"}),"Speed"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})})]})}}),(0,l.jsx)(W.zB,{name:"attributes.Initiative",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(ee.A,{className:"h-4 w-4 text-accent"}),"Initiative"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})})]})}}),(0,l.jsx)(W.zB,{name:"attributes.Accuracy",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(es.A,{className:"h-4 w-4 text-accent"}),"Accuracy"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})})]})}}),(0,l.jsx)(W.zB,{name:"attributes.Guard",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(et.A,{className:"h-4 w-4 text-accent"}),"Guard"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})})]})}}),(0,l.jsx)(W.zB,{name:"attributes.Resist",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(el.A,{className:"h-4 w-4 text-accent"}),"Resist"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})})]})}}),(0,l.jsx)(W.zB,{name:"attributes.rollBonus",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(er.A,{className:"h-4 w-4 text-accent"}),"Roll Bonus"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{type:"number",...s})})]})}}),(0,l.jsx)(W.zB,{name:"attributes.DMG",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(ea.A,{className:"h-4 w-4 text-accent"}),"DMG"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{...s})})]})}})]})]}),(0,l.jsx)(j.w,{}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-primary-foreground",children:"Abilities"}),(0,l.jsxs)(h.$,{type:"button",size:"sm",variant:"outline",onClick:()=>eg({id:crypto.randomUUID(),name:"",description:""}),children:[(0,l.jsx)(ec.A,{className:"h-4 w-4 mr-2"})," Add Ability"]})]}),(0,l.jsx)("div",{className:"space-y-4",children:ef.map((e,s)=>(0,l.jsxs)("div",{className:"border bg-card-foreground/5 rounded-lg p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(W.zB,{name:"abilities.".concat(s,".name"),control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{className:"flex-1",children:[(0,l.jsx)(W.lR,{children:"Ability Name"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{placeholder:"e.g., Ogre's Wrath",...s})}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(h.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>ew(s),className:"text-muted-foreground hover:text-destructive self-end",children:(0,l.jsx)(ei.A,{className:"h-4 w-4"})})]}),(0,l.jsx)(W.zB,{name:"abilities.".concat(s,".description"),control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Ability Description"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{rows:3,...s})}),(0,l.jsx)(W.C5,{})]})}})]},e.id))})]}),(0,l.jsx)(j.w,{}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-primary-foreground",children:"Deeds"}),(0,l.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[(0,l.jsx)(eN,{onAddDeeds:e=>{let s=e.map(e=>({...e,tags:e.tags||[]}));if("Underling"===eG("template")){let e=s.filter(e=>"light"===e.tier);e.length<s.length&&R({variant:"destructive",title:"Warning",description:"Only Light deeds can be added to Underlings."}),J(e)}else J(s)},allDeeds:D,existingDeedIds:eH}),(0,l.jsxs)(h.$,{type:"button",size:"sm",variant:"outline",onClick:()=>J({name:"",tier:"light",actionType:"attack",deedType:"melee",versus:"guard",target:"",effects:{start:"",base:"",hit:"",spark:"",shadow:"",after:""},tags:[]}),children:[(0,l.jsx)(ec.A,{className:"h-4 w-4 mr-2"})," Create New"]})]})]}),(0,l.jsx)("div",{className:"space-y-4",children:F.map((e,s)=>{var t,r,a,i;return(0,l.jsxs)(ex.Nt,{defaultOpen:!k.getValues("deeds.".concat(s,".name")),className:"border bg-card-foreground/5 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(ex.R6,{asChild:!0,children:(0,l.jsxs)("button",{type:"button",className:"flex items-center gap-3 text-left w-full",children:[(0,l.jsx)(ed.A,{className:"h-5 w-5 text-muted-foreground"}),(0,l.jsx)("span",{className:"text-lg font-semibold text-primary-foreground",children:(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.name)||"New Deed"}),(null==(i=eB.deeds)||null==(a=i[s])?void 0:a.id)&&(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:"(from library)"})]})}),(0,l.jsx)(h.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>Z(s),className:"text-muted-foreground hover:text-destructive",children:(0,l.jsx)(ei.A,{className:"h-4 w-4"})})]}),(0,l.jsxs)(ex.Ke,{className:"mt-6 space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".name"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Deed Name"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{placeholder:"e.g., Inferno",...a,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".tier"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Tier"}),(0,l.jsxs)(g.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)||"Underling"===eM,children:[(0,l.jsx)(W.MJ,{children:(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Select tier"})})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"light",children:"Light"}),(0,l.jsx)(g.eb,{value:"heavy",children:"Heavy"}),(0,l.jsx)(g.eb,{value:"mighty",children:"Mighty"}),(0,l.jsx)(g.eb,{value:"tyrant",children:"Tyrant"}),(0,l.jsx)(g.eb,{value:"special",children:"Special"})]})]}),(0,l.jsx)(W.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".deedType"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Deed Type"}),(0,l.jsxs)(g.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id),children:[(0,l.jsx)(W.MJ,{children:(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Type"})})}),(0,l.jsx)(g.gC,{children:$.FC.map(e=>(0,l.jsx)(g.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".actionType"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Action Type"}),(0,l.jsxs)(g.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id),children:[(0,l.jsx)(W.MJ,{children:(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Action"})})}),(0,l.jsx)(g.gC,{children:$.GW.map(e=>(0,l.jsx)(g.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".versus"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Versus"}),(0,l.jsxs)(g.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id),children:[(0,l.jsx)(W.MJ,{children:(0,l.jsx)(g.bq,{children:(0,l.jsx)(g.yv,{placeholder:"Versus"})})}),(0,l.jsx)(g.gC,{children:$.OJ.map(e=>(0,l.jsx)(g.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,l.jsx)(W.C5,{})]})}})]}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".target"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Target"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(m.p,{placeholder:"e.g., 1 Creature | Blast 4",...a,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm text-primary-foreground",children:"Effects"}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".effects.start"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{children:["Start ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{placeholder:"Effect when a creature starts its turn in an area...",...a,rows:2,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".effects.base"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{children:["Base ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{placeholder:"Base effect of the deed...",...a,rows:2,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".effects.hit"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{children:["Hit ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{placeholder:"The primary effect on a successful hit...",...a,rows:3,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".effects.spark"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{children:["Spark (Critical Hit) ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{placeholder:"The effect on a critical hit...",...a,rows:2,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".effects.shadow"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{children:["Shadow (Critical Failure) ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{placeholder:"The effect on a critical failure...",...a,rows:3,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(W.C5,{})]})}}),(0,l.jsx)(W.zB,{name:"deeds.".concat(s,".effects.after"),control:k.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{children:["After ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{placeholder:"Effect at the end of a creature's turn...",...a,rows:2,disabled:!!(null==(r=eB.deeds)||null==(t=r[s])?void 0:t.id)})})]})}})]})]})]},e.id)})})]}),(0,l.jsx)(j.w,{}),(0,l.jsx)(W.zB,{name:"description",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsx)(W.lR,{children:"Description"}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(q.T,{placeholder:"A short description of the creature...",rows:5,...s})})]})}}),(0,l.jsx)(W.zB,{name:"tags",control:k.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(W.eI,{children:[(0,l.jsxs)(W.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(eo.A,{className:"h-4 w-4 text-accent"}),"Tags"]}),(0,l.jsx)(W.MJ,{children:(0,l.jsx)(G.F,{value:s.value||[],onChange:s.onChange,placeholder:"Add tags...",tagSource:"creature"})}),(0,l.jsx)(W.C5,{})]})}})]}),(0,l.jsxs)(V.wL,{className:"flex items-center gap-2",children:[!t&&(0,l.jsxs)(O.Lt,{children:[(0,l.jsx)(O.tv,{asChild:!0,children:(0,l.jsx)(h.$,{type:"button",variant:"destructive",size:"sm",children:(0,l.jsx)(ei.A,{className:"h-4 w-4"})})}),(0,l.jsxs)(O.EO,{children:[(0,l.jsxs)(O.wd,{children:[(0,l.jsx)(O.r7,{children:"Are you sure?"}),(0,l.jsxs)(O.$v,{children:['This will permanently delete "',k.getValues("name"),'". This action cannot be undone.']})]}),(0,l.jsxs)(O.ck,{children:[(0,l.jsx)(O.Zr,{children:"Cancel"}),(0,l.jsx)(O.Rx,{onClick:eP,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]}),(0,l.jsx)("div",{className:"flex-grow"}),!H&&(0,l.jsx)(h.$,{type:"button",variant:"outline",onClick:eD,children:"Cancel"}),(0,l.jsx)(h.$,{type:"submit",children:t?"Create Creature":"Save Changes"})]})]})})})})}var eS=t(20031),eR=t(62709);function eG(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[c,d]=(0,r.useState)(0),[o,u]=(0,r.useState)(""),[x,m]=(0,r.useState)("all"),[h,p]=(0,r.useState)("all"),[j,v]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[S,R]=(0,r.useState)(""),[G,A]=(0,r.useState)("name"),[C,M]=(0,r.useState)("asc"),[B,I]=(0,r.useState)(!1),P=(0,ep.a)(),[D,T]=(0,r.useState)("list");(0,r.useEffect)(()=>{I(!0)},[]);let H={searchTerm:o,roleFilter:x,templateFilter:h,minLevel:j,maxLevel:f,minTR:b,maxTR:N,tagFilter:S,sortBy:G,sortOrder:C},z={setSearchTerm:u,setRoleFilter:m,setTemplateFilter:p,setMinLevel:v,setMaxLevel:g,setMinTR:y,setMaxTR:w,setTagFilter:R,setSortBy:A,setSortOrder:M},k=(e,s)=>{s.shiftKey?(e.roleFilter&&m(e.roleFilter),e.templateFilter&&p(e.templateFilter),void 0!==e.minLevel&&v(String(e.minLevel)),void 0!==e.maxLevel&&g(String(e.maxLevel)),void 0!==e.minTR&&y(String(e.minTR)),void 0!==e.maxTR&&w(String(e.maxTR)),e.tagFilter&&R(s=>s?s.split(",").map(e=>e.trim()).includes(e.tagFilter)?s:"".concat(s,", ").concat(e.tagFilter):e.tagFilter)):(m(e.roleFilter||"all"),p(e.templateFilter||"all"),v(void 0!==e.minLevel?String(e.minLevel):""),g(void 0!==e.maxLevel?String(e.maxLevel):""),y(void 0!==e.minTR?String(e.minTR):""),w(void 0!==e.maxTR?String(e.maxTR):""),R(e.tagFilter||""))},L=()=>{u(""),m("all"),p("all"),v(""),g(""),y(""),w(""),R(""),A("name"),M("asc")},E=()=>d(e=>e+1),J=e=>{s(e),a(!1),n(null),P&&T("editor")},U=()=>{s(null),a(!0),n(null),P&&T("editor")},$=e=>{let t={...e},l=(e.name||"creature").replace(/^(Copy of\s*)+/,"");t.name="Copy of ".concat(l),delete t.id,s(null),a(!0),n(t),P&&T("editor")},V=e=>{E(),s(e),a(!1),n(null),P&&T("editor")},q=()=>{E(),s(null),a(!1),n(null),P&&T("list")},O=()=>{t&&(a(!1),s(null),P&&T("list"))};return B?P?(0,l.jsx)(eR.A,{showSidebarTrigger:!1,children:(0,l.jsx)("div",{className:"h-full w-full",children:"list"===D?(0,l.jsx)(F,{onSelectCreature:J,onNewCreature:U,selectedCreatureId:e,dataVersion:c,filters:H,setFilters:z,onClearFilters:L}):(0,l.jsx)("div",{className:"p-4 sm:p-6 h-full w-full overflow-y-auto",children:(0,l.jsx)(ew,{creatureId:e,isCreatingNew:t,template:i,onCreatureSaveSuccess:V,onCreatureDeleteSuccess:q,onUseAsTemplate:$,onEditCancel:O,dataVersion:c,onFilterByClick:k,onBack:()=>{T("list"),s(null),a(!1),n(null)}},null!=e?e:t?"new":"placeholder")})})}):(0,l.jsx)(eS.GB,{children:(0,l.jsx)(eR.A,{children:(0,l.jsxs)("div",{className:"flex w-full h-full overflow-hidden",children:[(0,l.jsx)(eS.Bx,{style:{"--sidebar-width":"380px"},children:(0,l.jsx)(F,{onSelectCreature:J,onNewCreature:U,selectedCreatureId:e,dataVersion:c,filters:H,setFilters:z,onClearFilters:L})}),(0,l.jsx)(eS.sF,{className:"flex-1 overflow-y-auto",children:(0,l.jsx)("div",{className:"bg-background/50 p-4 sm:p-6 md:p-8 w-full",children:(0,l.jsx)(ew,{creatureId:e,isCreatingNew:t,template:i,onCreatureSaveSuccess:V,onCreatureDeleteSuccess:q,onUseAsTemplate:$,onEditCancel:O,dataVersion:c,onFilterByClick:k},null!=e?e:t?"new":"placeholder")})})]})})}):null}},68856:(e,s,t)=>{"use strict";t.d(s,{E:()=>a});var l=t(95155),r=t(59434);function a(e){let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}},88911:(e,s,t)=>{"use strict";t.d(s,{P:()=>i});var l=t(95155),r=t(59434),a=t(85057);let i=e=>{let{deed:s,dmgReplacement:t}=e,i=e=>{if(e)return t?e.replace(/\\dd/g,t):e},n="".concat(s.deedType," ").concat(s.actionType," VS ").concat(s.versus).toUpperCase(),c="".concat(n," | ").concat(s.target);return(0,l.jsxs)("div",{className:(0,r.cn)("rounded-lg border bg-card-foreground/5 border-l-4 p-4 mb-4",{light:"border-sky-400",heavy:"border-amber-400",mighty:"border-fuchsia-400",tyrant:"border-red-600",special:"border-yellow-400"}[s.tier]),children:[(0,l.jsxs)("div",{className:"flex justify-between items-baseline mb-3",children:[(0,l.jsx)("h4",{className:"text-xl font-bold",children:s.name}),(0,l.jsx)("div",{className:(0,r.cn)("text-xs font-bold uppercase px-2 py-0.5 rounded-full",{light:"text-sky-300 bg-sky-900/50",heavy:"text-amber-300 bg-amber-900/50",mighty:"text-fuchsia-300 bg-fuchsia-900/50",tyrant:"text-red-300 bg-red-900/50",special:"text-yellow-300 bg-yellow-900/50"}[s.tier]),children:s.tier})]}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground mb-3 border-b border-t border-border py-2",children:(0,l.jsx)("p",{className:"text-foreground/90",children:c})}),(0,l.jsxs)("div",{className:"space-y-3 text-sm",children:[s.effects.start&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground/90 font-semibold uppercase",children:"Start"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.start)})]}),s.effects.base&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground/90 font-semibold uppercase",children:"Base"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.base)})]}),s.effects.hit&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground font-semibold uppercase",children:"Hit"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.hit)})]}),s.effects.spark&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground/90 font-semibold uppercase",children:"Spark (Critical Hit)"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.spark)})]}),s.effects.shadow&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground font-semibold uppercase",children:"Shadow (Critical Failure)"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.shadow)})]}),s.effects.after&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground/90 font-semibold uppercase",children:"After"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.after)})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[222,676,670,49,208,991,347,516,441,684,358],()=>s(54768)),_N_E=e.O()}]);