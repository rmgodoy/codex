(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{20945:(e,s,a)=>{Promise.resolve().then(a.bind(a,58821))},26126:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var t=a(95155);a(12115);var r=a(74466),n=a(59434);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(l({variant:a}),s),...r})}},46102:(e,s,a)=>{"use strict";a.d(s,{Bc:()=>i,ZI:()=>o,k$:()=>c,m_:()=>d});var t=a(95155),r=a(12115),n=a(78082),l=a(59434);let i=n.Kq,d=n.bL,c=n.l9,o=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,t.jsx)(n.UC,{ref:s,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})});o.displayName=n.UC.displayName},47262:(e,s,a)=>{"use strict";a.d(s,{S:()=>d});var t=a(95155),r=a(12115),n=a(76981),l=a(10518),i=a(59434);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.bL,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(n.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})})});d.displayName=n.bL.displayName},58821:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ej});var t=a(95155),r=a(12115),n=a(62709),l=a(19209),i=a(66695),d=a(18186),c=a(68715),o=a(66049),m=a(57946),u=a(23767),x=a(20427),f=a(43152),h=a(83662),p=a(55166),j=a(82643),v=a(56013),g=a(18046),N=a(10518),b=a(25318),w=a(18763),y=a(77223),C=a(3235),k=a(52354),S=a(45727),A=a(10366),E=a(10947),F=a(47326),z=a(17657),L=a(11133),M=a(86318),R=a(50286),I=a(51920),P=a(7146),$=a(22604),q=a(95376),J=a(15510),T=a(2868),B=a(60704),D=a(59434);let Q=B.bL,U=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(B.B8,{ref:s,className:(0,D.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});U.displayName=B.B8.displayName;let O=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(B.l9,{ref:s,className:(0,D.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});O.displayName=B.l9.displayName;let V=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(B.UC,{ref:s,className:(0,D.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});V.displayName=B.UC.displayName;var _=a(85057),G=a(62523),Z=a(30285),H=a(22346),W=a(46102),Y=a(49864),K=a(74466),X=a(124);let ee=(0,K.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});r.forwardRef((e,s)=>{let{className:a,variant:r,size:n,...l}=e;return(0,t.jsx)(X.b,{ref:s,className:(0,D.cn)(ee({variant:r,size:n,className:a})),...l})}).displayName=X.b.displayName;let es=(0,K.F)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",{variants:{variant:{default:"gap-1",outline:"gap-px"}},defaultVariants:{variant:"default"}}),ea=r.createContext({size:"default",variant:"default"}),et=r.forwardRef((e,s)=>{let{className:a,variant:r,size:n,children:l,...i}=e;return(0,t.jsx)(Y.bL,{ref:s,className:(0,D.cn)(es({variant:r,className:a})),...i,children:(0,t.jsx)(ea.Provider,{value:{variant:r,size:n},children:l})})});et.displayName=Y.bL.displayName;let er=r.forwardRef((e,s)=>{let{className:a,children:n,variant:l,size:i,...d}=e,c=r.useContext(ea);return(0,t.jsx)(Y.q7,{ref:s,className:(0,D.cn)(ee({variant:c.variant||l,size:c.size||i}),a),...d,children:n})});er.displayName=Y.q7.displayName;var en=a(54165),el=a(66424),ei=a(47262);function ed(e){let{items:s,initialSelectedIds:a=[],onConfirm:n,trigger:l,title:i}=e,[d,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(new Set(a));(0,r.useEffect)(()=>{d&&x(new Set(a))},[d,a]);let f=(0,r.useMemo)(()=>s.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())),[s,o]),h=(e,s)=>{x(a=>{let t=new Set(a);return s?t.add(e):t.delete(e),t})};return(0,t.jsxs)(en.lG,{open:d,onOpenChange:c,children:[(0,t.jsx)(en.zM,{asChild:!0,children:l}),(0,t.jsxs)(en.Cf,{className:"max-w-md h-[60vh] flex flex-col",children:[(0,t.jsx)(en.c7,{children:(0,t.jsx)(en.L3,{children:i})}),(0,t.jsx)(G.p,{placeholder:"Search...",value:o,onChange:e=>m(e.target.value),className:"mb-4 shrink-0"}),(0,t.jsx)(el.F,{className:"flex-1 border rounded-md p-2",children:f.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-md hover:bg-accent",children:[(0,t.jsx)(ei.S,{id:"item-select-".concat(e.id),checked:u.has(e.id),onCheckedChange:s=>h(e.id,!!s)}),(0,t.jsx)(_.J,{htmlFor:"item-select-".concat(e.id),className:"flex-1 font-normal cursor-pointer",children:e.name})]},e.id))}),(0,t.jsxs)(en.Es,{className:"pt-4",children:[(0,t.jsx)(Z.$,{variant:"ghost",onClick:()=>c(!1),children:"Cancel"}),(0,t.jsx)(Z.$,{onClick:()=>{n(Array.from(u)),c(!1)},children:"Confirm"})]})]})]})}var ec=a(26126),eo=a(59409),em=a(87481),eu=a(90010),ex=a(83013);let ef=[{name:"Home",component:d.A},{name:"Trees",component:c.A},{name:"Mountain",component:o.A},{name:"Castle",component:m.A},{name:"TowerControl",component:u.A},{name:"Tent",component:x.A},{name:"Waves",component:f.A},{name:"MapPin",component:h.A},{name:"Landmark",component:p.A},{name:"Skull",component:j.A}],eh=[{name:"Water",color:"#4A90E2"},{name:"Grass",color:"#7ED321"},{name:"Forest",color:"#417505"},{name:"Stone",color:"#9B9B9B"},{name:"Desert",color:"#F5A623"},{name:"Snow",color:"#FFFFFF"}];function ep(e){let{maps:s,onMapsUpdate:a}=e,[n,l]=(0,r.useState)(!1),[i,d]=(0,r.useState)(""),[c,o]=(0,r.useState)(20),[m,u]=(0,r.useState)(null),[x,f]=(0,r.useState)(""),{toast:h}=(0,em.dj)(),p=async()=>{if(!i.trim()||!c||c<=0)return void h({variant:"destructive",title:"Invalid Input",description:"Please provide a valid name and radius."});try{let e=(0,P.Xk)(c),s={name:i.trim(),radius:c,tiles:e},t=await (0,$.Ys)(s);h({title:"Map Created",description:"'".concat(i,"' has been added.")}),d(""),o(20),a(t),l(!1)}catch(e){h({variant:"destructive",title:"Error",description:"Failed to create map."})}},j=e=>{u(e.id),f(e.name)},C=()=>{u(null),f("")},k=async()=>{if(!m||!x.trim())return;let e=s.find(e=>e.id===m);if(e)try{await (0,$.cA)({...e,name:x.trim()}),h({title:"Map Renamed"}),a(),C()}catch(e){h({variant:"destructive",title:"Error",description:"Failed to rename map."})}},S=async e=>{try{await (0,$.GY)(e),h({title:"Map Deleted"}),a()}catch(e){h({variant:"destructive",title:"Error",description:"Failed to delete map."})}};return(0,t.jsxs)(en.lG,{open:n,onOpenChange:l,children:[(0,t.jsx)(en.zM,{asChild:!0,children:(0,t.jsx)(Z.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(v.A,{className:"h-5 w-5"})})}),(0,t.jsxs)(en.Cf,{children:[(0,t.jsxs)(en.c7,{children:[(0,t.jsx)(en.L3,{children:"Manage Maps"}),(0,t.jsx)(en.rr,{children:"Add, rename, or delete your maps."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-end gap-2 p-3 border rounded-md",children:[(0,t.jsxs)("div",{className:"grid gap-2 flex-1",children:[(0,t.jsx)(_.J,{children:"New Map"}),(0,t.jsx)(G.p,{placeholder:"New map name...",value:i,onChange:e=>d(e.target.value)}),(0,t.jsx)(G.p,{placeholder:"Radius",type:"number",value:c,onChange:e=>o(parseInt(e.target.value,10)||0)})]}),(0,t.jsxs)(Z.$,{onClick:p,disabled:!i.trim()||!c||c<=0,children:[(0,t.jsx)(g.A,{className:"h-4 w-4"})," Add"]})]}),(0,t.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.map(e=>(0,t.jsx)("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/50 gap-2",children:m===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.p,{value:x,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&k()},className:"h-8",autoFocus:!0}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(Z.$,{size:"icon",className:"h-7 w-7",onClick:k,"aria-label":"Save",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})}),(0,t.jsx)(Z.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:C,"aria-label":"Cancel",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1 truncate",title:e.name,children:e.name}),(0,t.jsxs)("div",{className:"flex items-center shrink-0",children:[(0,t.jsx)(Z.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>j(e),"aria-label":"Edit",children:(0,t.jsx)(w.A,{className:"h-4 w-4"})}),(0,t.jsxs)(eu.Lt,{children:[(0,t.jsx)(eu.tv,{asChild:!0,children:(0,t.jsx)(Z.$,{variant:"ghost",size:"icon",className:"h-7 w-7","aria-label":"Delete",children:(0,t.jsx)(y.A,{className:"h-4 w-4 text-destructive"})})}),(0,t.jsxs)(eu.EO,{children:[(0,t.jsxs)(eu.wd,{children:[(0,t.jsx)(eu.r7,{children:"Are you sure?"}),(0,t.jsxs)(eu.$v,{children:['This will permanently delete the "',e.name,'" map and all of its tiles.']})]}),(0,t.jsxs)(eu.ck,{children:[(0,t.jsx)(eu.Zr,{children:"Cancel"}),(0,t.jsx)(eu.Rx,{onClick:()=>S(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})},e.id))})]})]})]})}function ej(){let[e,s]=(0,r.useState)([]),[a,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[x,f]=(0,r.useState)("settings"),[p,j]=(0,r.useState)("brush"),[v,g]=(0,r.useState)("#8A2BE2"),[N,w]=(0,r.useState)(null),[y,B]=(0,r.useState)("#E0D6F0"),[Y,K]=(0,r.useState)(!0),[X,ee]=(0,r.useState)("#E0D6F0"),[es,ea]=(0,r.useState)([]),[en,el]=(0,r.useState)([]),[ei,eu]=(0,r.useState)([]),[ej,ev]=(0,r.useState)(!1),[eg,eN]=(0,r.useState)(!1),{toast:eb}=(0,em.dj)(),ew=function(e,s){let[a,t]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let s=setTimeout(()=>{t(e)},1e3);return()=>{clearTimeout(s)}},[e,1e3]),a}(c,1e3);(0,r.useEffect)(()=>{let e=e=>{"Control"===e.key&&ev(!0)},s=e=>{"Control"===e.key&&ev(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",s)}},[]);let ey=(0,r.useCallback)(async e=>{let t=(await (0,$.xW)()).sort((e,s)=>e.name.localeCompare(s.name));if(s(t),e)return void d(e);a&&!t.some(e=>e.id===a)?d(t.length>0?t[0].id:null):!a&&t.length>0?d(t[0].id):0===t.length&&(d(null),o(null))},[a]);(0,r.useEffect)(()=>{ey(),(0,q.J0)().then(ea),(0,J.vq)().then(el),(0,T.bj)().then(eu)},[]),(0,r.useEffect)(()=>{ew&&((0,$.cA)(ew).catch(()=>{eb({variant:"destructive",title:"Auto-save failed"})}),s(e=>e.map(e=>e.id===ew.id?{...e,name:ew.name}:e)))},[ew,eb]),(0,r.useEffect)(()=>{a?((0,$.zU)(a).then(e=>{e&&o(e)}),u(null)):o(null)},[a]);let eC=e=>{let s=parseInt((e=e.replace("#","")).substring(0,2),16),a=parseInt(e.substring(2,4),16);return(.2126*s+.7152*a+.0722*parseInt(e.substring(4,6),16))/255};(0,r.useEffect)(()=>{Y?ee(eC(v)>.5?"#000000":"#FFFFFF"):ee(y)},[Y,v,y]);let ek=(e,s)=>{if(c){let a=c.tiles.map(a=>a.hex.q===e.q&&a.hex.r===e.r?{...a,data:{...a.data,...s}}:a);o({...c,tiles:a})}},eS=(e,s)=>{if(c)if("radius"===e){let e=Number(s);if(!isNaN(e)&&e>0&&e<=100){let s=(0,P.YS)(c.tiles,e);o({...c,radius:e,tiles:s})}}else o({...c,[e]:s})},eA="erase"===p,eE=(0,r.useMemo)(()=>null==c?void 0:c.tiles.find(e=>e.hex.q===(null==m?void 0:m.q)&&e.hex.r===(null==m?void 0:m.r)),[c,m]),eF=(0,r.useMemo)(()=>new Map(es.map(e=>[e.id,e])),[es]),ez=(0,r.useMemo)(()=>new Map(en.map(e=>[e.id,e])),[en]),eL=(0,r.useMemo)(()=>eE&&c?ei.filter(e=>e.location&&e.location.mapId===c.id&&e.location.hex.q===eE.hex.q&&e.location.hex.r===eE.hex.r&&e.location.hex.s===eE.hex.s):[],[eE,c,ei]);return(0,t.jsx)(n.A,{showSidebarTrigger:!1,children:(0,t.jsxs)("div",{className:"w-full h-full bg-background relative",children:[c?(0,t.jsx)(l.A,{grid:c.tiles,hexSize:25,className:(0,D.cn)("w-full h-full",eg&&"cursor-crosshair"),onGridUpdate:e=>{c&&o({...c,tiles:e})},onHexHover:()=>{},onHexClick:u,activeTool:x,paintMode:p,paintColor:v,paintIcon:N,paintIconColor:X,selectedHex:m,isCtrlPressed:ej,isEyedropperActive:eg,onEyedropperClick:e=>{if(!c)return;let s=c.tiles.find(s=>s.hex.q===e.q&&s.hex.r===e.r);s&&(g(s.data.color||"#8A2BE2"),w(s.data.icon||null),s.data.iconColor&&(B(s.data.iconColor),K(!1))),eN(!1),eb({title:"Tile properties copied to brush."})}}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:(0,t.jsx)("p",{children:"Select a map to begin, or create a new one."})}),(0,t.jsxs)(i.Zp,{className:"fixed top-20 left-4 z-10 w-80 shadow-lg",children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{className:"flex items-center gap-2 text-lg",children:"Map Tools"})}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(Q,{value:x,onValueChange:e=>f(e),className:"w-full",children:[(0,t.jsxs)(U,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(O,{value:"settings",children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Settings"]}),(0,t.jsxs)(O,{value:"paint",children:[(0,t.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Paint"]}),(0,t.jsxs)(O,{value:"data",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Data"]})]}),(0,t.jsxs)(V,{value:"settings",className:"mt-4 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.J,{children:"Map Selection"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(eo.l6,{value:a||"",onValueChange:d,children:[(0,t.jsx)(eo.bq,{className:"flex-1",children:(0,t.jsx)(eo.yv,{placeholder:"Select a map..."})}),(0,t.jsx)(eo.gC,{children:e.map(e=>(0,t.jsx)(eo.eb,{value:e.id,children:e.name},e.id))})]}),(0,t.jsx)(ep,{maps:e,onMapsUpdate:e=>{ey(e)}})]})]}),(0,t.jsx)(H.w,{}),c?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.J,{htmlFor:"map-name",children:"Map Name"}),(0,t.jsx)(G.p,{id:"map-name",value:c.name,onChange:e=>eS("name",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.J,{htmlFor:"map-radius",children:"Map Radius"}),(0,t.jsx)(G.p,{id:"map-radius",type:"number",value:c.radius,onChange:e=>eS("radius",parseInt(e.target.value,10)),min:"1",max:"100"})]})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center pt-4",children:"Select a map to view its settings, or create a new one."})]}),(0,t.jsx)(V,{value:"paint",className:"mt-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.J,{children:"Paint Mode"}),(0,t.jsxs)(et,{type:"single",value:ej&&"brush"===p?"bucket":p,onValueChange:e=>{e&&j(e)},className:"w-full",children:[(0,t.jsxs)(er,{value:"brush","aria-label":"Brush",className:"w-1/3",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2"})," Brush"]}),(0,t.jsxs)(er,{value:"bucket","aria-label":"Bucket",className:"w-1/3",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2"})," Bucket"]}),(0,t.jsxs)(er,{value:"erase","aria-label":"Erase",className:"w-1/3",children:[(0,t.jsx)(F.A,{className:"h-4 w-4 mr-2"})," Erase"]})]})]}),(0,t.jsx)(H.w,{}),(0,t.jsxs)("fieldset",{disabled:eA||eg,className:"space-y-4 disabled:opacity-50",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.J,{htmlFor:"color-picker",children:"Tile Color"}),(0,t.jsx)(G.p,{id:"color-picker",type:"color",value:v,onChange:e=>g(e.target.value),className:"w-full h-10 p-1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(_.J,{children:"Terrain Colors"}),(0,t.jsx)(W.Bc,{children:(0,t.jsxs)(W.m_,{children:[(0,t.jsx)(W.k$,{asChild:!0,children:(0,t.jsx)(Z.$,{variant:eg?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>eN(e=>!e),children:(0,t.jsx)(z.A,{className:"h-4 w-4"})})}),(0,t.jsx)(W.ZI,{children:(0,t.jsx)("p",{children:"Pick Tile Properties"})})]})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:eh.map(e=>{let{name:s,color:a}=e;return(0,t.jsxs)(Z.$,{variant:"outline",size:"sm",className:"h-8",onClick:()=>g(a),children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:a}}),(0,t.jsx)("span",{className:"ml-2",children:s})]},s)})})]}),(0,t.jsx)(H.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)(_.J,{children:"Tile Icon"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[!Y&&(0,t.jsx)(W.Bc,{children:(0,t.jsxs)(W.m_,{children:[(0,t.jsx)(W.k$,{asChild:!0,children:(0,t.jsx)(Z.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>K(!0),children:(0,t.jsx)(L.A,{className:"h-4 w-4"})})}),(0,t.jsx)(W.ZI,{children:(0,t.jsx)("p",{children:"Reset to automatic color"})})]})}),(0,t.jsx)(G.p,{id:"icon-color-picker",type:"color",value:y,onChange:e=>{B(e.target.value),K(!1)},className:"w-10 h-10 p-1"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-5 gap-2",children:ef.map(e=>{let{name:s,component:a}=e;return(0,t.jsx)(Z.$,{variant:"outline",size:"icon",onClick:()=>w(e=>e===s?null:s),className:(0,D.cn)(N===s&&"ring-2 ring-ring ring-offset-2 bg-accent text-accent-foreground"),children:(0,t.jsx)(a,{className:"h-5 w-5"})},s)})}),N&&(0,t.jsxs)(Z.$,{variant:"ghost",size:"sm",className:"w-full h-8",onClick:()=>w(null),children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"})," Clear Icon Selection"]})]})]})]})}),(0,t.jsx)(V,{value:"data",className:"mt-4",children:m&&eE?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-base",children:"Selected Tile"}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Q:"})," ",m.q,", ",(0,t.jsx)("span",{className:"font-semibold",children:"R:"})," ",m.r,", ",(0,t.jsx)("span",{className:"font-semibold",children:"S:"})," ",m.s]})]}),(0,t.jsx)(H.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(_.J,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),"Dungeons"]}),(0,t.jsx)(ed,{title:"Link Dungeons",items:es,initialSelectedIds:eE.data.dungeonIds||[],onConfirm:e=>ek(m,{dungeonIds:e}),trigger:(0,t.jsx)(Z.$,{size:"sm",variant:"outline",children:(0,t.jsx)(M.A,{className:"h-4 w-4"})})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:(eE.data.dungeonIds||[]).map(e=>{var s;return(0,t.jsx)(ec.E,{variant:"secondary",children:null==(s=eF.get(e))?void 0:s.name},e)})})]}),(0,t.jsx)(H.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(_.J,{className:"flex items-center gap-2",children:[(0,t.jsx)(R.A,{className:"h-4 w-4"}),"Factions"]}),(0,t.jsx)(ed,{title:"Link Factions",items:en,initialSelectedIds:eE.data.factionIds||[],onConfirm:e=>ek(m,{factionIds:e}),trigger:(0,t.jsx)(Z.$,{size:"sm",variant:"outline",children:(0,t.jsx)(M.A,{className:"h-4 w-4"})})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:(eE.data.factionIds||[]).map(e=>{var s;return(0,t.jsx)(ec.E,{variant:"secondary",children:null==(s=ez.get(e))?void 0:s.name},e)})})]}),(0,t.jsx)(H.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.J,{className:"flex items-center gap-2",children:[(0,t.jsx)(I.A,{className:"h-4 w-4"}),"Events"]}),eL.length>0?(0,t.jsx)("div",{className:"flex flex-col gap-1 text-xs",children:eL.map(e=>(0,t.jsxs)("div",{className:"p-1 rounded bg-muted/50",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,ex.GP)(new Date(e.startDate),"P")," - ",(0,ex.GP)(new Date(e.endDate),"P")]})]},e.id))}):(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"No events linked to this tile."})]})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click on a tile to see or edit its data."})})]})})]})]})})}},59409:(e,s,a)=>{"use strict";a.d(s,{bq:()=>u,eb:()=>p,gC:()=>h,l6:()=>o,yv:()=>m});var t=a(95155),r=a(12115),n=a(43433),l=a(79556),i=a(77381),d=a(10518),c=a(59434);let o=n.bL;n.YJ;let m=n.WT,u=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(n.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,t.jsx)(n.In,{asChild:!0,children:(0,t.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=n.PP.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=n.wn.displayName;let h=r.forwardRef((e,s)=>{let{className:a,children:r,position:l="popper",...i}=e;return(0,t.jsx)(n.ZL,{children:(0,t.jsxs)(n.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,t.jsx)(x,{}),(0,t.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(f,{})]})})});h.displayName=n.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=n.JU.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(n.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.VF,{children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})}),(0,t.jsx)(n.p4,{children:r})]})});p.displayName=n.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.wv.displayName},62523:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(95155),r=a(12115),n=a(59434);let l=r.forwardRef((e,s)=>{let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"},66424:(e,s,a)=>{"use strict";a.d(s,{F:()=>i});var t=a(95155),r=a(12115),n=a(47655),l=a(59434);let i=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(n.bL,{ref:s,className:(0,l.cn)("relative overflow-hidden",a),...i,children:[(0,t.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(d,{}),(0,t.jsx)(n.OK,{})]})});i.displayName=n.bL.displayName;let d=r.forwardRef((e,s)=>{let{className:a,orientation:r="vertical",...i}=e;return(0,t.jsx)(n.VM,{ref:s,orientation:r,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,t.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=n.VM.displayName},95376:(e,s,a)=>{"use strict";a.d(s,{J0:()=>r,OO:()=>d,RT:()=>n,sO:()=>i,yV:()=>l});var t=a(82489);let r=async()=>{let e=(await (0,t.Lf)()).transaction(t.Qu,"readonly").objectStore(t.Qu).getAll();return new Promise((s,a)=>{e.onsuccess=()=>s(e.result),e.onerror=()=>a(e.error)})},n=async e=>{let s=(await (0,t.Lf)()).transaction(t.Qu,"readonly").objectStore(t.Qu).get(e);return new Promise((e,a)=>{s.onsuccess=()=>e(s.result),s.onerror=()=>a(s.error)})},l=async e=>{let s=(await (0,t.Lf)()).transaction(t.Qu,"readwrite").objectStore(t.Qu),a=(0,t.$C)(),r={...e,id:a},n=s.add(r);return new Promise((e,s)=>{n.onsuccess=()=>e(a),n.onerror=()=>s(n.error)})},i=async e=>{let s=(await (0,t.Lf)()).transaction(t.Qu,"readwrite").objectStore(t.Qu).put(e);return new Promise((e,a)=>{s.onsuccess=()=>e(),s.onerror=()=>a(s.error)})},d=async e=>{let s=(await (0,t.Lf)()).transaction(t.Qu,"readwrite").objectStore(t.Qu).delete(e);return new Promise((e,a)=>{s.onsuccess=()=>e(),s.onerror=()=>a(s.error)})}}},e=>{var s=s=>e(e.s=s);e.O(0,[222,676,670,830,451,541,347,352,441,684,358],()=>s(20945)),_N_E=e.O()}]);