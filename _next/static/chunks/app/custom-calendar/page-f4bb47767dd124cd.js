(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5481],{965:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(40157).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},15599:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(40157).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},17759:(e,a,t)=>{"use strict";t.d(a,{C5:()=>j,MJ:()=>f,eI:()=>u,lR:()=>y,lV:()=>o,zB:()=>m});var n=t(95155),s=t(12115),r=t(66634),l=t(62177),d=t(59434),i=t(85057);let o=l.Op,c=s.createContext({}),m=e=>{let{...a}=e;return(0,n.jsx)(c.Provider,{value:{name:a.name},children:(0,n.jsx)(l.xI,{...a})})},h=()=>{let e=s.useContext(c),a=s.useContext(x),{getFieldState:t,formState:n}=(0,l.xW)(),r=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=a;return{id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message"),...r}},x=s.createContext({}),u=s.forwardRef((e,a)=>{let{className:t,...r}=e,l=s.useId();return(0,n.jsx)(x.Provider,{value:{id:l},children:(0,n.jsx)("div",{ref:a,className:(0,d.cn)("space-y-2",t),...r})})});u.displayName="FormItem";let y=s.forwardRef((e,a)=>{let{className:t,...s}=e,{error:r,formItemId:l}=h();return(0,n.jsx)(i.J,{ref:a,className:(0,d.cn)(r&&"text-destructive",t),htmlFor:l,...s})});y.displayName="FormLabel";let f=s.forwardRef((e,a)=>{let{...t}=e,{error:s,formItemId:l,formDescriptionId:d,formMessageId:i}=h();return(0,n.jsx)(r.DX,{ref:a,id:l,"aria-describedby":s?"".concat(d," ").concat(i):"".concat(d),"aria-invalid":!!s,...t})});f.displayName="FormControl",s.forwardRef((e,a)=>{let{className:t,...s}=e,{formDescriptionId:r}=h();return(0,n.jsx)("p",{ref:a,id:r,className:(0,d.cn)("text-sm text-muted-foreground",t),...s})}).displayName="FormDescription";let j=s.forwardRef((e,a)=>{var t;let{className:s,children:r,...l}=e,{error:i,formMessageId:o}=h(),c=i?String(null!=(t=null==i?void 0:i.message)?t:""):r;return c?(0,n.jsx)("p",{ref:a,id:o,className:(0,d.cn)("text-sm font-medium text-destructive",s),...l,children:c}):null});j.displayName="FormMessage"},34301:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},51603:(e,a,t)=>{Promise.resolve().then(t.bind(t,85171))},77266:(e,a,t)=>{"use strict";t.d(a,{r:()=>j});var n=t(95155),s=t(12115),r=t(30285),l=t(15599),d=t(965),i=t(73158),o=t(66695),c=t(59434),m=t(62523),h=t(82940),x=t.n(h),u=t(99865);let y=(e,a)=>!!e&&!!a&&e.year===a.year&&e.monthIndex===a.monthIndex&&e.day===a.day,f=e=>"".concat(e.year,"-").concat(e.monthIndex,"-").concat(e.day);function j(e){let{calendar:a,disableEditing:t=!1,initialDate:h,selectedDate:j,events:p=[],onEdit:v,onDateSelect:g}=e,[N,w]=(0,s.useState)((()=>{if("string"==typeof h&&(h=(0,u.Xo)(x()(h).utc().endOf("day").toDate())),h&&"year"in h&&void 0!==h.year){let e=h.monthIndex;return e>=a.months.length&&(e=0),{year:h.year,monthIndex:e,day:h.day}}return{year:1,monthIndex:0,day:1}})()),[b,C]=(0,s.useState)("day"),[I,k]=(0,s.useState)(0),[D,z]=(0,s.useState)(!1),[M,U]=(0,s.useState)("");(0,s.useEffect)(()=>{N&&(k(10*Math.floor((N.year-1)/10)+1),U(N.year.toString()))},[N]),(0,s.useEffect)(()=>{j&&w({year:j.year,monthIndex:j.monthIndex,day:j.day})},[j]);let A=(0,s.useMemo)(()=>a&&N?a.months[N.monthIndex]:null,[a,N]),S=(0,s.useMemo)(()=>{let e=new Set;return p.forEach(t=>{let n=t.startDate,s=t.endDate,r=a.months.length,l=n.year,d=n.monthIndex,i=n.day;for(;;){var o;let t=f({year:l,monthIndex:d,day:i});if(e.add(t),l===s.year&&d===s.monthIndex&&i===s.day)break;++i>((null==(o=a.months[d])?void 0:o.days)||30)&&(i=1,++d>=r&&(d=0,l++))}}),e},[p,a.months]),F=e=>{w(a=>a?{...a,monthIndex:e,day:1}:{year:new Date().getFullYear(),monthIndex:e,day:1}),C("day")},$=e=>{w(a=>a?{...a,year:e}:{year:e,monthIndex:0,day:1}),C("month")},R=e=>{if(!N)return;let a={year:N.year,monthIndex:N.monthIndex,day:e};g&&g(a)};return(0,n.jsxs)(o.Zp,{className:"h-full flex flex-col p-4",children:[!t&&(0,n.jsx)("div",{className:"flex justify-end mb-2",children:(0,n.jsxs)(r.$,{variant:"outline",size:"sm",onClick:v,children:[(0,n.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Template"]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)(r.$,{variant:"ghost",size:"icon",onClick:()=>{"day"===b?w(e=>{if(!e)return null;let t=e.monthIndex-1,n=e.year;return t<0&&(t=a.months.length-1,n-=1),{...e,year:n,monthIndex:t}}):"month"===b?w(e=>e?{...e,year:e.year-1}:null):k(e=>e-10)},children:(0,n.jsx)(d.A,{className:"h-5 w-5"})}),D?(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault();let a=parseInt(M,10);isNaN(a)||(w(e=>e?{...e,year:a}:{year:a,monthIndex:0,day:1}),C("month"),z(!1))},className:"flex-1 px-4",children:(0,n.jsx)(m.p,{type:"number",value:M,onChange:e=>U(e.target.value),onBlur:()=>z(!1),className:"text-center text-xl font-bold h-10",autoFocus:!0})}):(0,n.jsx)(r.$,{variant:"ghost",className:"text-xl font-bold",onClick:()=>{N&&("day"===b?C("month"):"month"===b?(k(10*Math.floor((N.year-1)/10)+1),C("year")):"year"===b&&(U(N.year.toString()),z(!0)))},children:A&&N?"day"===b?"".concat(A.name,", ").concat(N.year):"month"===b?"".concat(N.year):"".concat(I," - ").concat(I+9):"..."}),(0,n.jsx)(r.$,{variant:"ghost",size:"icon",onClick:()=>{"day"===b?w(e=>{if(!e)return null;let t=e.monthIndex+1,n=e.year;return t>=a.months.length&&(t=0,n+=1),{...e,year:n,monthIndex:t}}):"month"===b?w(e=>e?{...e,year:e.year+1}:null):k(e=>e+10)},children:(0,n.jsx)(i.A,{className:"h-5 w-5"})})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:["day"===b&&(()=>{if(!A||!N)return null;let e=a.weekdays.length,t=A.days,s={year:N.year,monthIndex:N.monthIndex,day:1},r=0;for(let e=1;e<s.year;e++)r+=a.months.reduce((e,a)=>e+a.days,0);for(let e=0;e<s.monthIndex;e++)r+=a.months[e].days;let l=r%e,d=Array(l+t).fill(null);for(let e=0;e<t;e++)d[e+l]=e+1;return(0,n.jsxs)("div",{className:"grid flex-1 grid-cols-1",style:{gridTemplateRows:"auto 1fr"},children:[(0,n.jsx)("div",{style:{"--cols":e},className:"grid grid-cols-[repeat(var(--cols),_minmax(0,_1fr))] shrink-0",children:a.weekdays.map(e=>(0,n.jsx)("div",{className:"text-center font-semibold text-muted-foreground p-2 text-sm",children:e},e))}),(0,n.jsx)("div",{style:{"--cols":e},className:"grid grid-cols-[repeat(var(--cols),_minmax(0,_1fr))] grid-rows-auto flex-1 gap-2",children:d.map((e,a)=>{if(!e)return(0,n.jsx)("div",{},a);let t={year:N.year,monthIndex:N.monthIndex,day:e},s=y(j,t),r=f(t),l=S.has(r);return(0,n.jsxs)("button",{className:(0,c.cn)("flex items-start justify-start p-2 rounded-lg transition-colors relative","hover:bg-muted",s&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>R(e),disabled:!g,children:[(0,n.jsx)("span",{className:"text-sm",children:e}),l&&(0,n.jsx)("div",{className:(0,c.cn)("absolute bottom-2 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full",s?"bg-primary-foreground":"bg-accent")})]},a)})})]})})(),"month"===b&&(0,n.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4 p-4 flex-1",children:a.months.map((e,a)=>(0,n.jsx)(r.$,{variant:"outline",className:"h-24 text-lg",onClick:()=>F(a),children:e.name},e.name))}),"year"===b&&(()=>{let e=Array.from({length:10},(e,a)=>I+a);return(0,n.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-5 gap-4 p-4 flex-1",children:e.map(e=>(0,n.jsx)(r.$,{variant:"outline",className:"h-24 text-lg",onClick:()=>$(e),children:e},e))})})()]})]})}},85171:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>D});var n=t(95155),s=t(12115),r=t(6195),l=t(20031),d=t(47906),i=t(62177),o=t(90221),c=t(55594),m=t(30285),h=t(62523),x=t(17759),u=t(66695),y=t(77223),f=t(34301),j=t(66424);let p=c.z.object({id:c.z.string(),name:c.z.string().min(1,"Month name is required"),days:c.z.coerce.number().min(1,"Must have at least 1 day")}),v=c.z.object({id:c.z.string(),name:c.z.string().min(1,"Weekday name is required")}),g=c.z.object({name:c.z.string().min(1,"Calendar name is required"),months:c.z.array(p).min(1,"At least one month is required"),weekdays:c.z.array(v).min(1,"At least one weekday is required"),minDate:c.z.string().optional(),maxDate:c.z.string().optional()});function N(e){let{calendar:a,onSave:t,onCancel:s}=e,r=!!a,l=(0,i.mN)({resolver:(0,o.u)(g),defaultValues:a?{...a,weekdays:a.weekdays.map(e=>({id:crypto.randomUUID(),name:e}))}:{name:"",months:[{id:crypto.randomUUID(),name:"Month 1",days:30}],weekdays:[{id:crypto.randomUUID(),name:"Day 1"},{id:crypto.randomUUID(),name:"Day 2"},{id:crypto.randomUUID(),name:"Day 3"},{id:crypto.randomUUID(),name:"Day 4"},{id:crypto.randomUUID(),name:"Day 5"}],minDate:"",maxDate:""}}),{fields:d,append:c,remove:p}=(0,i.jz)({control:l.control,name:"months"}),{fields:v,append:N,remove:w}=(0,i.jz)({control:l.control,name:"weekdays"});return(0,n.jsx)(x.lV,{...l,children:(0,n.jsx)("form",{onSubmit:l.handleSubmit(e=>{let n={...e,weekdays:e.weekdays.map(e=>e.name)};a?t({...a,...n}):t(n)}),className:"space-y-8 h-full flex flex-col",children:(0,n.jsxs)(u.Zp,{className:"flex-1 flex flex-col min-h-0",children:[(0,n.jsx)(u.aR,{children:(0,n.jsx)(u.ZB,{children:a?"Editing ".concat(a.name):"Create New Custom Calendar"})}),(0,n.jsx)(u.Wu,{className:"flex-1 min-h-0",children:(0,n.jsx)(j.F,{className:"h-full pr-6",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(x.zB,{control:l.control,name:"name",render:e=>{let{field:a}=e;return(0,n.jsxs)(x.eI,{children:[(0,n.jsx)(x.lR,{children:"Calendar Name"}),(0,n.jsx)(x.MJ,{children:(0,n.jsx)(h.p,{...a})}),(0,n.jsx)(x.C5,{})]})}}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Months"}),(0,n.jsx)("div",{className:"space-y-2",children:d.map((e,a)=>(0,n.jsxs)("div",{className:"flex items-end gap-2 p-2 border rounded-md",children:[(0,n.jsx)(x.zB,{control:l.control,name:"months.".concat(a,".name"),render:e=>{let{field:a}=e;return(0,n.jsxs)(x.eI,{className:"flex-1",children:[(0,n.jsx)(x.lR,{children:"Month Name"}),(0,n.jsx)(x.MJ,{children:(0,n.jsx)(h.p,{...a})}),(0,n.jsx)(x.C5,{})]})}}),(0,n.jsx)(x.zB,{control:l.control,name:"months.".concat(a,".days"),render:e=>{let{field:a}=e;return(0,n.jsxs)(x.eI,{children:[(0,n.jsx)(x.lR,{children:"Days"}),(0,n.jsx)(x.MJ,{children:(0,n.jsx)(h.p,{type:"number",...a,className:"w-24",disabled:r})}),(0,n.jsx)(x.C5,{})]})}}),!r&&(0,n.jsx)(m.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>p(a),children:(0,n.jsx)(y.A,{className:"h-4 w-4"})})]},e.id))}),!r&&(0,n.jsxs)(m.$,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>c({id:crypto.randomUUID(),name:"Month ".concat(d.length+1),days:30}),children:[(0,n.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Add Month"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Weekdays"}),(0,n.jsx)("div",{className:"space-y-2",children:v.map((e,a)=>(0,n.jsxs)("div",{className:"flex items-end gap-2",children:[(0,n.jsx)(x.zB,{control:l.control,name:"weekdays.".concat(a,".name"),render:e=>{let{field:t}=e;return(0,n.jsxs)(x.eI,{className:"flex-1",children:[(0,n.jsx)(x.MJ,{children:(0,n.jsx)(h.p,{...t,placeholder:"Day ".concat(a+1)})}),(0,n.jsx)(x.C5,{})]})}}),!r&&(0,n.jsx)(m.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>w(a),children:(0,n.jsx)(y.A,{className:"h-4 w-4"})})]},e.id))}),!r&&(0,n.jsxs)(m.$,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>N({id:crypto.randomUUID(),name:""}),children:[(0,n.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Add Weekday"]})]})]})})}),(0,n.jsxs)(u.wL,{children:[(0,n.jsx)(m.$,{type:"button",variant:"ghost",onClick:s,children:"Cancel"}),(0,n.jsx)(m.$,{type:"submit",className:"ml-auto",children:"Save Calendar"})]})]})})})}var w=t(77266),b=t(83011),C=t(90010),I=t(87481);function k(e){let{calendars:a,onSelect:t,onNew:s,onDelete:r,selectedCalendarId:l}=e;return(0,n.jsxs)("div",{className:"p-4 space-y-4 h-full flex flex-col",children:[(0,n.jsxs)(m.$,{onClick:s,className:"w-full",children:[(0,n.jsx)(f.A,{})," New Model"]}),(0,n.jsx)(j.F,{className:"flex-1",children:(0,n.jsx)("div",{className:"space-y-2 pr-2",children:a.map(e=>(0,n.jsxs)("div",{className:"flex group items-center justify-between rounded-md hover:bg-muted/50 transition-colors",children:[(0,n.jsx)(m.$,{variant:"ghost",className:"flex-1 justify-start text-left h-auto py-2 ".concat(l===e.id?"font-bold text-accent":""),onClick:()=>t(e.id),children:e.name}),(0,n.jsxs)(C.Lt,{children:[(0,n.jsx)(C.tv,{asChild:!0,children:(0,n.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 text-destructive",children:(0,n.jsx)(y.A,{className:"h-4 w-4"})})}),(0,n.jsxs)(C.EO,{children:[(0,n.jsxs)(C.wd,{children:[(0,n.jsx)(C.r7,{children:"Are you sure?"}),(0,n.jsxs)(C.$v,{children:['This will permanently delete the "',e.name,'" model. All calendars using this model, and all of their events, will also be deleted. This action cannot be undone.']})]}),(0,n.jsxs)(C.ck,{children:[(0,n.jsx)(C.Zr,{children:"Cancel"}),(0,n.jsx)(C.Rx,{onClick:()=>r(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]},e.id))})})]})}function D(){var e;let[a,t]=(0,s.useState)([]),[i,o]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1);(0,d.a)();let{toast:h}=(0,I.dj)(),x=(0,s.useCallback)(async()=>{let e=await (0,b.Ul)();t(e),!(e.length>0)||i||c?0===e.length&&o(null):o(e[0])},[i,c]);(0,s.useEffect)(()=>{x()},[x]);let u=async e=>{if("id"in e)await (0,b.ZM)(e),h({title:"Calendar Model Updated"}),o(e);else{let a=await (0,b.D3)(e);h({title:"Calendar Model Created"}),o({...e,id:a})}m(!1),x()},y=async e=>{await (0,b.AI)(e),h({title:"Calendar Model Deleted"}),o(null),x()},f=()=>{m(!1),a.length>0?o(a[0]):o(null)};return(0,n.jsx)(l.SidebarProvider,{children:(0,n.jsx)(r.A,{children:(0,n.jsxs)("div",{className:"flex w-full h-full overflow-hidden",children:[(0,n.jsx)(l.Bx,{style:{"--sidebar-width":"300px"},children:(0,n.jsx)(k,{calendars:a,onSelect:e=>{let t=a.find(a=>a.id===e);t&&(o(t),m(!1))},onNew:()=>{o(null),m(!0)},onDelete:y,selectedCalendarId:null!=(e=null==i?void 0:i.id)?e:null})}),(0,n.jsx)(l.sF,{className:"flex-1 overflow-y-auto bg-background/50",children:(0,n.jsx)("div",{className:"p-4 sm:p-6 md:p-8 w-full h-full",children:(0,n.jsx)(()=>c?(0,n.jsx)(N,{onSave:u,onCancel:f,calendar:null!=i?i:void 0}):i?(0,n.jsx)(w.r,{calendar:i,onEdit:()=>{o(i),m(!0)}},i.id):(0,n.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:(0,n.jsx)("p",{children:"Select a calendar model or create a new one to begin."})}),{})})})]})})})}},99865:(e,a,t)=>{"use strict";t.d(a,{$k:()=>d,Xo:()=>l,aL:()=>r});var n=t(82940),s=t.n(n);let r=()=>{let e=new Date(Date.UTC(1,0,1));return e.setUTCFullYear(1),e},l=e=>{let a;return{year:(a="string"==typeof e?s()(e).utc().startOf("day").toDate():e).getUTCFullYear(),monthIndex:a.getUTCMonth(),day:a.getUTCDate()}},d=e=>{let a;a="string"==typeof e?l(e):e;let t=s()().utc().endOf("day").toDate();return t.setUTCFullYear(a.year,a.monthIndex,a.day),t}}},e=>{var a=a=>e(e.s=a);e.O(0,[586,3373,8439,5636,6004,7737,8441,1684,7358],()=>a(51603)),_N_E=e.O()}]);