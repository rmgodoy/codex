(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3062:(e,s,l)=>{"use strict";l.d(s,{FC:()=>a,GW:()=>t,OJ:()=>r});let t=["attack","support"],a=["melee","missile","innate","unarmed","spell","item","versatile"],r=["guard","resist","10","special"]},4165:(e,s,l)=>{"use strict";l.d(s,{Cf:()=>m,L3:()=>u,c7:()=>h,lG:()=>c,rr:()=>j,zM:()=>d});var t=l(5155),a=l(2115),r=l(5821),n=l(5318),i=l(9434);let c=r.bL,d=r.l9,o=r.ZL;r.bm;let x=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)(r.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...a})});x.displayName=r.hJ.displayName;let m=a.forwardRef((e,s)=>{let{className:l,children:a,...c}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(r.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l),...c,children:[a,(0,t.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.UC.displayName;let h=e=>{let{className:s,...l}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...l})};h.displayName="DialogHeader";let u=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)(r.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",l),...a})});u.displayName=r.hE.displayName;let j=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)(r.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",l),...a})});j.displayName=r.VY.displayName},4768:(e,s,l)=>{Promise.resolve().then(l.bind(l,6294))},6294:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>ed});var t=l(5155),a=l(2115),r=l(9746),n=l(6762),i=l(2523),c=l(285),d=l(6424),o=l(2346),x=l(7481),m=l(5057),h=l(9409),u=l(4301),j=l(5074),p=l(203),g=l(3926),f=l(31);let v=["Normal","Underling","Paragon","Tyrant"];function b(e){let{onSelectCreature:s,onNewCreature:l,selectedCreatureId:b,dataVersion:N,filters:y,setFilters:w,onClearFilters:C}=e,[R,z]=(0,a.useState)([]),[T,S]=(0,a.useState)(!0),{toast:A}=(0,x.dj)(),{isMobile:M,setOpenMobile:L}=(0,f.cL)();(0,a.useEffect)(()=>{(async()=>{S(!0);try{let e=await (0,r.OG)();z(e)}catch(e){console.error("Error fetching creatures:",e),A({variant:"destructive",title:"Error",description:"Could not fetch creatures from database."})}finally{S(!1)}})()},[N,A]);let B=(0,a.useMemo)(()=>{let e=R.filter(e=>{let s=e.name.toLowerCase().includes(y.searchTerm.toLowerCase()),l="all"===y.roleFilter||e.role===y.roleFilter,t="all"===y.templateFilter||e.template===y.templateFilter,a=!0;y.minLevel&&!isNaN(parseInt(y.minLevel))&&(a=a&&e.level>=parseInt(y.minLevel,10)),y.maxLevel&&!isNaN(parseInt(y.maxLevel))&&(a=a&&e.level<=parseInt(y.maxLevel,10));let r=!0;y.minTR&&!isNaN(parseInt(y.minTR))&&(r=r&&e.TR>=parseInt(y.minTR,10)),y.maxTR&&!isNaN(parseInt(y.maxTR))&&(r=r&&e.TR<=parseInt(y.maxTR,10));let n=!0;if(y.tagFilter){let s=y.tagFilter.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean);s.length>0&&(n=e.tags&&e.tags.length>0&&s.every(s=>e.tags.some(e=>e.toLowerCase().includes(s))))}return s&&l&&t&&a&&r&&n}).sort((e,s)=>{if("TR"===y.sortBy){let l=e.TR-s.TR;if(0!==l)return l}if("level"===y.sortBy){let l=e.level-s.level;if(0!==l)return l}return e.name.localeCompare(s.name)});return"desc"===y.sortOrder&&e.reverse(),e},[R,y]),k=e=>{s(e),M&&L(!1)};return(0,t.jsxs)("div",{className:"border-r border-border bg-card flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)(c.$,{onClick:()=>{l(),M&&L(!1)},className:"w-full",children:[(0,t.jsx)(u.A,{})," New Creature"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.p,{placeholder:"Search creatures...",value:y.searchTerm,onChange:e=>w.setSearchTerm(e.target.value),className:"pl-9"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(m.J,{children:"Filter"}),(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:C,className:"text-xs h-auto p-1",children:"Clear"})]}),(0,t.jsxs)(h.l6,{value:y.templateFilter,onValueChange:w.setTemplateFilter,children:[(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Filter by template"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"all",children:"All Templates"}),v.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))]})]}),(0,t.jsxs)(h.l6,{value:y.roleFilter,onValueChange:w.setRoleFilter,children:[(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Filter by role"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"all",children:"All Roles"}),n.gg.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.p,{placeholder:"Min Lvl",type:"number",value:y.minLevel,onChange:e=>w.setMinLevel(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,t.jsx)(i.p,{placeholder:"Max Lvl",type:"number",value:y.maxLevel,onChange:e=>w.setMaxLevel(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.p,{placeholder:"Min TR",type:"number",value:y.minTR,onChange:e=>w.setMinTR(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,t.jsx)(i.p,{placeholder:"Max TR",type:"number",value:y.maxTR,onChange:e=>w.setMaxTR(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,t.jsx)(i.p,{placeholder:"Tags (e.g. undead, goblin)",value:y.tagFilter,onChange:e=>w.setTagFilter(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Sort by"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(h.l6,{value:y.sortBy,onValueChange:e=>w.setSortBy(e),children:[(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Sort by"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"name",children:"Name"}),(0,t.jsx)(h.eb,{value:"TR",children:"TR"}),(0,t.jsx)(h.eb,{value:"level",children:"Level"})]})]}),(0,t.jsxs)(c.$,{variant:"ghost",size:"icon",onClick:()=>w.setSortOrder(e=>"asc"===e?"desc":"asc"),children:["asc"===y.sortOrder?(0,t.jsx)(p.A,{className:"h-4 w-4"}):(0,t.jsx)(g.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle sort order"})]})]})]})]}),(0,t.jsx)(o.w,{}),(0,t.jsx)(d.F,{className:"flex-1",children:(0,t.jsx)("div",{className:"p-4",children:T?(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"Loading creatures..."}):B.length>0?(0,t.jsx)("ul",{className:"space-y-1",children:B.map(e=>(0,t.jsx)("li",{children:(0,t.jsxs)("button",{onClick:()=>k(e.id),className:"w-full text-left p-2 rounded-md transition-colors ".concat(b===e.id?"bg-primary text-primary-foreground":"hover:bg-accent/50"),children:[e.name," ",(0,t.jsxs)("span",{className:"text-xs opacity-70",children:["(Lvl ",e.level," / TR ",e.TR,")"]})]})},e.id))}):(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"No creatures found."})})})]})}var N=l(2177),y=l(221),w=l(5594),C=l(3062),R=l(6695),z=l(8539),T=l(10),S=l(7759),A=l(4337),M=l(5599),L=l(8763),B=l(8098),k=l(4014),F=l(9829),I=l(4442),J=l(5731),E=l(9479),D=l(7119),V=l(8051),G=l(7223),O=l(5318),P=l(8046),$=l(1887),H=l(3054),q=l(8856),W=l(7242);let U=W.bL,Z=W.R6,_=W.Ke;var K=l(4165),Q=l(7262),Y=l(8911),X=l(6126),ee=l(648);let es=["Normal","Underling","Paragon","Tyrant"],el=w.z.object({start:w.z.string().optional(),base:w.z.string().optional(),hit:w.z.string().optional(),shadow:w.z.string().optional(),end:w.z.string().optional()}),et=w.z.object({id:w.z.string().optional(),name:w.z.string().min(1,"Deed name is required"),tier:w.z.enum(["light","heavy","mighty"]),actionType:w.z.enum(C.GW),deedType:w.z.enum(C.FC),versus:w.z.enum(C.OJ),target:w.z.string().optional(),effects:el,tags:w.z.array(w.z.string()).optional()}),ea=w.z.object({name:w.z.string().min(1,"Name is required"),level:w.z.coerce.number().int().min(1).max(10),role:w.z.enum(n.gg),template:w.z.enum(es),TR:w.z.coerce.number().int().min(0),attributes:w.z.object({HP:w.z.coerce.number().int().min(0),Speed:w.z.coerce.number().int().min(0),Initiative:w.z.coerce.number().int().min(0),Accuracy:w.z.coerce.number().int().min(0),Guard:w.z.coerce.number().int().min(0),Resist:w.z.coerce.number().int().min(0),rollBonus:w.z.coerce.number().int().min(0),DMG:w.z.string()}),deeds:w.z.array(et),abilities:w.z.string().optional(),description:w.z.string().optional(),tags:w.z.array(w.z.string()).optional()}),er={name:"",level:1,role:"Archer",template:"Normal",TR:1,attributes:{HP:10,Speed:6,Initiative:1,Accuracy:0,Guard:10,Resist:10,rollBonus:0,DMG:"d6"},deeds:[],abilities:"",description:"",tags:[]},en=e=>{let{onAddDeeds:s,allDeeds:l,existingDeedIds:r}=e,[n,o]=(0,a.useState)(!1),[x,m]=(0,a.useState)(new Set),[u,j]=(0,a.useState)(""),[p,g]=(0,a.useState)("all"),[f,v]=(0,a.useState)(""),b=(0,a.useMemo)(()=>l.filter(e=>{let s=e.name.toLowerCase().includes(u.toLowerCase()),l="all"===p||e.tier===p,t=f.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean),a=0===t.length||e.tags&&t.every(s=>e.tags.some(e=>e.toLowerCase().includes(s)));return s&&l&&a}),[l,u,p,f]),N=e=>{m(s=>{let l=new Set(s);return l.has(e)?l.delete(e):l.add(e),l})};return(0,t.jsxs)(K.lG,{open:n,onOpenChange:o,children:[(0,t.jsx)(K.zM,{asChild:!0,children:(0,t.jsxs)(c.$,{type:"button",size:"sm",variant:"outline",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2"})," Add From Library"]})}),(0,t.jsxs)(K.Cf,{className:"max-w-2xl h-[70vh] flex flex-col",children:[(0,t.jsxs)(K.c7,{children:[(0,t.jsx)(K.L3,{children:"Select Deeds from Library"}),(0,t.jsx)(K.rr,{children:"Select one or more deeds to add to the creature."})]}),(0,t.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,t.jsx)(i.p,{placeholder:"Search deeds...",value:u,onChange:e=>j(e.target.value),className:"flex-1 min-w-[150px]"}),(0,t.jsxs)(h.l6,{value:p,onValueChange:g,children:[(0,t.jsx)(h.bq,{className:"w-full sm:w-[120px]",children:(0,t.jsx)(h.yv,{placeholder:"Filter tier"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"all",children:"All Tiers"}),(0,t.jsx)(h.eb,{value:"light",children:"Light"}),(0,t.jsx)(h.eb,{value:"heavy",children:"Heavy"}),(0,t.jsx)(h.eb,{value:"mighty",children:"Mighty"})]})]}),(0,t.jsx)(i.p,{placeholder:"Filter by tags...",value:f,onChange:e=>v(e.target.value),className:"flex-1 min-w-[150px]"})]}),(0,t.jsx)(d.F,{className:"flex-1 border rounded-md p-4",children:(0,t.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(Q.S,{id:"deed-".concat(e.id),onCheckedChange:()=>N(e.id),checked:x.has(e.id),disabled:r.has(e.id)}),(0,t.jsxs)("label",{htmlFor:"deed-".concat(e.id),className:"flex-1",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[e.name," ",(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.tier,")"]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.effects.hit})]})]},e.id))})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,t.jsx)(c.$,{variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),(0,t.jsx)(c.$,{onClick:()=>{s(l.filter(e=>x.has(e.id))),o(!1),m(new Set),j(""),g("all"),v("")},disabled:0===x.size,children:"Add Selected"})]})]})]})};function ei(e){let{creatureId:s,isCreatingNew:l,template:d,onCreatureSaveSuccess:u,onCreatureDeleteSuccess:j,onUseAsTemplate:p,onEditCancel:g,dataVersion:f,onFilterByClick:v}=e,{toast:b}=(0,x.dj)(),[w,A]=(0,a.useState)(l),[W,K]=(0,a.useState)(!l&&!!s),[Q,el]=(0,a.useState)(null),[et,ei]=(0,a.useState)([]),ec=(0,N.mN)({resolver:(0,y.u)(ea),defaultValues:er}),{fields:ed,append:eo,remove:ex,replace:em}=(0,N.jz)({control:ec.control,name:"deeds"}),{watch:eh,setValue:eu,getValues:ej}=ec,ep=eh("role"),eg=eh("level"),ef=eh("template"),ev=eh();(0,a.useEffect)(()=>{if(w){let e=(0,n.GQ)(ep,eg);if(e){let s=(0,n.TP)(ef,eg),l=e.HP,t=e.DMG;switch(ef){case"Underling":l=1,t=(0,n.ED)(e.DMG),em(ej("deeds").filter(e=>"light"===e.tier));break;case"Paragon":l=2*e.HP;break;case"Tyrant":l=4*e.HP}eu("attributes",{...e,HP:l,DMG:t}),eu("TR",s)}}},[ep,eg,ef,eu,w,ej,em]),(0,a.useEffect)(()=>{(0,r.xy)().then(ei).catch(e=>console.error("Could not fetch all deeds",e))},[f]),(0,a.useEffect)(()=>{(async()=>{if(l){let e=d?{...d}:{...er},s={...er,...e,name:d?"Copy of ".concat(d.name||"creature"):er.name,abilities:e.abilities||"",description:e.description||"",template:e.template||"Normal",tags:e.tags||[],deeds:(e.deeds||[]).map(e=>{var s,l,t,a,r;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(l=e.effects)?void 0:l.base)||"",hit:(null==(t=e.effects)?void 0:t.hit)||"",shadow:(null==(a=e.effects)?void 0:a.shadow)||"",end:(null==(r=e.effects)?void 0:r.end)||""},tags:e.tags||[]}})};d&&delete s.id;let l=(0,n.GQ)(s.role,s.level);ec.reset({...s,attributes:l||s.attributes}),el(d||null),A(!0),K(!1);return}if(!s){A(!1),K(!1),el(null);return}K(!0),A(!1);try{let e=await (0,r.s2)(s);if(e){let s=await (0,r.pT)(e.deeds),l={...e,deeds:s};el(l);let t={...er,...l,abilities:l.abilities||"",description:l.description||"",template:l.template||"Normal",tags:l.tags||[],deeds:s.map(e=>{var s,l,t,a,r;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(l=e.effects)?void 0:l.base)||"",hit:(null==(t=e.effects)?void 0:t.hit)||"",shadow:(null==(a=e.effects)?void 0:a.shadow)||"",end:(null==(r=e.effects)?void 0:r.end)||""},tags:e.tags||[]}})};ec.reset(t)}}catch(e){console.error("Failed to fetch creature data:",e),b({variant:"destructive",title:"Error",description:"Could not load creature data."})}finally{K(!1)}})()},[s,l,d,ec,b,f]);let eb=async e=>{try{"Underling"===e.template&&(e.deeds=e.deeds.filter(e=>"light"===e.tier));let t=e.deeds.map(e=>{if(!e.id){let{id:s,...l}=e,t={...l,tags:l.tags||[]};return(0,r.W$)(t)}return Promise.resolve(e.id)}),a=await Promise.all(t),n={...e,tags:e.tags||[],deeds:a},i=e.tags||[];if(i.length>0&&await (0,r.JE)(i),l){let s=await (0,r.RW)(n);b({title:"Creature Created!",description:"".concat(e.name," has been added to the bestiary.")}),u(s)}else s&&(await (0,r.ZK)({...n,id:s}),b({title:"Save Successful",description:"".concat(e.name," has been updated.")}),u(s));A(!1)}catch(e){console.error("Failed to save creature:",e),b({variant:"destructive",title:"Save Failed",description:"Could not save changes."})}},eN=async()=>{if(s)try{await (0,r.PW)(s),b({title:"Creature Deleted",description:"The creature has been removed from the bestiary."}),j()}catch(e){console.error("Failed to delete creature:",e),b({variant:"destructive",title:"Deletion Failed",description:"Could not delete the creature."})}},ey=()=>{if(l)g();else{if(Q){let e={...er,...Q,abilities:Q.abilities||"",description:Q.description||"",template:Q.template||"Normal",tags:Q.tags||[],deeds:Q.deeds.map(e=>{var s,l,t,a,r;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(l=e.effects)?void 0:l.base)||"",hit:(null==(t=e.effects)?void 0:t.hit)||"",shadow:(null==(a=e.effects)?void 0:a.shadow)||"",end:(null==(r=e.effects)?void 0:r.end)||""},tags:e.tags||[]}})};ec.reset(e)}A(!1)}},ew={light:0,heavy:1,mighty:2},eC=(0,a.useMemo)(()=>new Set(ed.map(e=>e.id).filter(Boolean)),[ed]);if(W&&!l)return(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsxs)(R.Zp,{children:[(0,t.jsxs)(R.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(q.E,{className:"h-8 w-48"}),(0,t.jsx)(q.E,{className:"h-4 w-32"})]}),(0,t.jsx)(q.E,{className:"h-10 w-24"})]}),(0,t.jsxs)(R.Wu,{children:[(0,t.jsx)(o.w,{className:"my-6"}),(0,t.jsx)(q.E,{className:"h-6 w-32 mb-4"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,t.jsx)(q.E,{className:"h-12 w-full"}),(0,t.jsx)(q.E,{className:"h-12 w-full"}),(0,t.jsx)(q.E,{className:"h-12 w-full"}),(0,t.jsx)(q.E,{className:"h-12 w-full"}),(0,t.jsx)(q.E,{className:"h-12 w-full"}),(0,t.jsx)(q.E,{className:"h-12 w-full"}),(0,t.jsx)(q.E,{className:"h-12 w-full"})]}),(0,t.jsx)(o.w,{className:"my-6"}),(0,t.jsx)(q.E,{className:"h-6 w-32 mb-4"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(q.E,{className:"h-24 w-full"}),(0,t.jsx)(q.E,{className:"h-24 w-full"})]})]})]})});if(!l&&!s&&!W)return(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsx)(R.Zp,{className:"h-full flex items-center justify-center min-h-[300px]",children:(0,t.jsxs)(R.Wu,{className:"text-center pt-6",children:[(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Select a creature to view"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"or create a new one."})]})})});if(!w&&s&&Q){let e=[...Q.deeds].sort((e,s)=>ew[e.tier]-ew[s.tier]);return(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsxs)(R.Zp,{children:[(0,t.jsxs)(R.aR,{className:"flex flex-row items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(R.ZB,{className:"text-3xl font-bold",children:Q.name}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground flex flex-col items-start gap-1",children:[(0,t.jsx)("p",{children:(0,t.jsxs)("button",{onClick:e=>v({templateFilter:Q.template,roleFilter:Q.role,minLevel:Q.level,maxLevel:Q.level},e),className:"hover:underline p-0 bg-transparent text-inherit",children:["Lvl ",Q.level," ",Q.template," ",Q.role]})}),(0,t.jsx)("p",{children:(0,t.jsxs)("button",{onClick:e=>v({minTR:Q.TR,maxTR:Q.TR},e),className:"hover:underline p-0 bg-transparent text-inherit",children:["TR ",Q.TR]})}),Q.tags&&Q.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2 pt-1",children:Q.tags.map(e=>(0,t.jsx)("button",{onClick:s=>v({tagFilter:e},s),className:"bg-transparent border-none p-0 m-0",children:(0,t.jsx)(X.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",children:e})},e))})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{Q&&p(Q)},children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Template"})]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>A(!0),children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]})]})]}),(0,t.jsxs)(R.Wu,{children:[(0,t.jsx)(o.w,{className:"my-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Attributes"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-x-6 gap-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"HP"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.HP})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Speed"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.Speed})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Initiative"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.Initiative})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Accuracy"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.Accuracy})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(J.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Guard"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.Guard})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(E.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Resist"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.Resist})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Roll Bonus"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.rollBonus>0?"+".concat(Q.attributes.rollBonus):Q.attributes.rollBonus})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(V.A,{className:"h-5 w-5 text-accent"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"DMG"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.attributes.DMG})]})]})]})]}),(0,t.jsx)(o.w,{className:"my-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Deeds"}),e.length>0?e.map((e,s)=>(0,t.jsx)(Y.P,{deed:e,dmgReplacement:Q.attributes.DMG},s)):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No deeds defined."})]}),(Q.abilities||Q.description)&&(0,t.jsx)(o.w,{className:"my-6"}),Q.abilities&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 text-primary-foreground",children:"Abilities"}),(0,t.jsx)("p",{className:"text-foreground/90 whitespace-pre-wrap",children:Q.abilities})]}),Q.description&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 text-primary-foreground",children:"Description"}),(0,t.jsx)("p",{className:"text-foreground/90 whitespace-pre-wrap",children:Q.description})]})]}),(0,t.jsx)(R.wL,{children:(0,t.jsxs)(T.Lt,{children:[(0,t.jsx)(T.tv,{asChild:!0,children:(0,t.jsx)(c.$,{type:"button",variant:"destructive",size:"sm",children:(0,t.jsx)(G.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(T.EO,{children:[(0,t.jsxs)(T.wd,{children:[(0,t.jsx)(T.r7,{children:"Are you sure?"}),(0,t.jsxs)(T.$v,{children:['This will permanently delete "',ec.getValues("name"),'". This action cannot be undone.']})]}),(0,t.jsxs)(T.ck,{children:[(0,t.jsx)(T.Zr,{children:"Cancel"}),(0,t.jsx)(T.Rx,{onClick:eN,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})})]})})}return(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsx)(R.Zp,{children:(0,t.jsx)(S.lV,{...ec,children:(0,t.jsxs)("form",{onSubmit:ec.handleSubmit(eb),className:"space-y-6",children:[(0,t.jsxs)(R.aR,{className:"flex flex-row justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(R.ZB,{children:l?"Create a New Creature":"Editing: ".concat((null==Q?void 0:Q.name)||"...")}),(0,t.jsx)(R.BT,{children:l?"Fill out the details for your new creature.":"Make your changes and click Save."})]}),(0,t.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",onClick:ey,className:"text-muted-foreground hover:text-foreground",children:(0,t.jsx)(O.A,{className:"h-5 w-5"})})]}),(0,t.jsxs)(R.Wu,{className:"space-y-8 pt-0",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(S.zB,{name:"name",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{className:"lg:col-span-2",children:[(0,t.jsx)(S.lR,{children:"Name"}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{placeholder:"e.g., Gloomfang Serpent",...s})}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"level",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Level"}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",min:"1",max:"10",...s})}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"TR",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"TR"}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})}),(0,t.jsx)(S.C5,{})]})}})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(S.zB,{name:"template",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Template"}),(0,t.jsxs)(h.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(S.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select a template"})})}),(0,t.jsx)(h.gC,{children:es.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))})]}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"role",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Role"}),(0,t.jsxs)(h.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(S.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select a role"})})}),(0,t.jsx)(h.gC,{children:n.gg.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))})]}),(0,t.jsx)(S.C5,{})]})}})]}),(0,t.jsx)(o.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Attributes"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[(0,t.jsx)(S.zB,{name:"attributes.HP",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-4 w-4 text-accent"}),"HP"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})})]})}}),(0,t.jsx)(S.zB,{name:"attributes.Speed",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"h-4 w-4 text-accent"}),"Speed"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})})]})}}),(0,t.jsx)(S.zB,{name:"attributes.Initiative",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(F.A,{className:"h-4 w-4 text-accent"}),"Initiative"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})})]})}}),(0,t.jsx)(S.zB,{name:"attributes.Accuracy",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 text-accent"}),"Accuracy"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})})]})}}),(0,t.jsx)(S.zB,{name:"attributes.Guard",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(J.A,{className:"h-4 w-4 text-accent"}),"Guard"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})})]})}}),(0,t.jsx)(S.zB,{name:"attributes.Resist",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 text-accent"}),"Resist"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})})]})}}),(0,t.jsx)(S.zB,{name:"attributes.rollBonus",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 text-accent"}),"Roll Bonus"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{type:"number",...s})})]})}}),(0,t.jsx)(S.zB,{name:"attributes.DMG",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(V.A,{className:"h-4 w-4 text-accent"}),"DMG"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{...s})})]})}})]})]}),(0,t.jsx)(o.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-primary-foreground",children:"Deeds"}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[(0,t.jsx)(en,{onAddDeeds:e=>{let s=e.map(e=>({...e,tags:e.tags||[]}));if("Underling"===ej("template")){let e=s.filter(e=>"light"===e.tier);e.length<s.length&&b({variant:"destructive",title:"Warning",description:"Only Light deeds can be added to Underlings."}),eo(e)}else eo(s)},allDeeds:et,existingDeedIds:eC}),(0,t.jsxs)(c.$,{type:"button",size:"sm",variant:"outline",onClick:()=>eo({name:"",tier:"light",actionType:"attack",deedType:"melee",versus:"guard",target:"",effects:{start:"",base:"",hit:"",shadow:"",end:""},tags:[]}),children:[(0,t.jsx)(P.A,{className:"h-4 w-4 mr-2"})," Create New"]})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:ed.map((e,s)=>{var l,a,r,n;return(0,t.jsxs)(U,{defaultOpen:!ec.getValues("deeds.".concat(s,".name")),className:"border bg-card-foreground/5 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(Z,{asChild:!0,children:(0,t.jsxs)("button",{type:"button",className:"flex items-center gap-3 text-left w-full",children:[(0,t.jsx)($.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-primary-foreground",children:(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.name)||"New Deed"}),(null==(n=ev.deeds)||null==(r=n[s])?void 0:r.id)&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"(from library)"})]})}),(0,t.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>ex(s),className:"text-muted-foreground hover:text-destructive",children:(0,t.jsx)(G.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)(_,{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".name"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Deed Name"}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{placeholder:"e.g., Inferno",...r,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)})}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".tier"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Tier"}),(0,t.jsxs)(h.l6,{onValueChange:r.onChange,defaultValue:r.value,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)||"Underling"===ef,children:[(0,t.jsx)(S.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select tier"})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"light",children:"Light"}),(0,t.jsx)(h.eb,{value:"heavy",children:"Heavy"}),(0,t.jsx)(h.eb,{value:"mighty",children:"Mighty"})]})]}),(0,t.jsx)(S.C5,{})]})}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".deedType"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Deed Type"}),(0,t.jsxs)(h.l6,{onValueChange:r.onChange,defaultValue:r.value,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id),children:[(0,t.jsx)(S.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Type"})})}),(0,t.jsx)(h.gC,{children:C.FC.map(e=>(0,t.jsx)(h.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".actionType"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Action Type"}),(0,t.jsxs)(h.l6,{onValueChange:r.onChange,defaultValue:r.value,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id),children:[(0,t.jsx)(S.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Action"})})}),(0,t.jsx)(h.gC,{children:C.GW.map(e=>(0,t.jsx)(h.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".versus"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Versus"}),(0,t.jsxs)(h.l6,{onValueChange:r.onChange,defaultValue:r.value,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id),children:[(0,t.jsx)(S.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Versus"})})}),(0,t.jsx)(h.gC,{children:C.OJ.map(e=>(0,t.jsx)(h.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,t.jsx)(S.C5,{})]})}})]}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".target"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Target"}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(i.p,{placeholder:"e.g., 1 Creature | Blast 4",...r,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)})}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm text-primary-foreground",children:"Effects"}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".effects.start"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{children:["Start ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(z.T,{placeholder:"Effect when a creature starts its turn in an area...",...r,rows:2,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)})})]})}}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".effects.base"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{children:["Base ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(z.T,{placeholder:"Base effect of the deed...",...r,rows:2,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)})})]})}}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".effects.hit"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{children:["Hit ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(z.T,{placeholder:"The primary effect on a successful hit...",...r,rows:3,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)})}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".effects.shadow"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{children:["Shadow (Critical) ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(z.T,{placeholder:"The enhanced effect on a critical success...",...r,rows:3,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)})}),(0,t.jsx)(S.C5,{})]})}}),(0,t.jsx)(S.zB,{name:"deeds.".concat(s,".effects.end"),control:ec.control,render:e=>{var l,a;let{field:r}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{children:["End ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(z.T,{placeholder:"Effect at the end of a creature's turn...",...r,rows:2,disabled:!!(null==(a=ev.deeds)||null==(l=a[s])?void 0:l.id)})})]})}})]})]})]},e.id)})})]}),(0,t.jsx)(o.w,{}),(0,t.jsx)(S.zB,{name:"abilities",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Abilities"}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(z.T,{placeholder:"Special abilities, separated by commas...",...s})})]})}}),(0,t.jsx)(S.zB,{name:"description",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsx)(S.lR,{children:"Description"}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(z.T,{placeholder:"A short description of the creature...",rows:5,...s})})]})}}),(0,t.jsx)(S.zB,{name:"tags",control:ec.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(S.eI,{children:[(0,t.jsxs)(S.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(H.A,{className:"h-4 w-4 text-accent"}),"Tags"]}),(0,t.jsx)(S.MJ,{children:(0,t.jsx)(ee.F,{value:s.value||[],onChange:s.onChange,placeholder:"Add tags..."})}),(0,t.jsx)(S.C5,{})]})}})]}),(0,t.jsxs)(R.wL,{className:"flex items-center gap-2",children:[!l&&(0,t.jsxs)(T.Lt,{children:[(0,t.jsx)(T.tv,{asChild:!0,children:(0,t.jsx)(c.$,{type:"button",variant:"destructive",size:"sm",children:(0,t.jsx)(G.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(T.EO,{children:[(0,t.jsxs)(T.wd,{children:[(0,t.jsx)(T.r7,{children:"Are you sure?"}),(0,t.jsxs)(T.$v,{children:['This will permanently delete "',ec.getValues("name"),'". This action cannot be undone.']})]}),(0,t.jsxs)(T.ck,{children:[(0,t.jsx)(T.Zr,{children:"Cancel"}),(0,t.jsx)(T.Rx,{onClick:eN,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]}),(0,t.jsx)("div",{className:"flex-grow"}),(0,t.jsx)(c.$,{type:"button",variant:"outline",onClick:ey,children:"Cancel"}),(0,t.jsx)(c.$,{type:"submit",children:l?"Create Creature":"Save Changes"})]})]})})})})}var ec=l(467);function ed(){let[e,s]=(0,a.useState)(null),[l,r]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(0),[o,x]=(0,a.useState)(""),[m,h]=(0,a.useState)("all"),[u,j]=(0,a.useState)("all"),[p,g]=(0,a.useState)(""),[v,N]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[C,R]=(0,a.useState)(""),[z,T]=(0,a.useState)(""),[S,A]=(0,a.useState)("name"),[M,L]=(0,a.useState)("asc"),B=()=>d(e=>e+1);return(0,t.jsx)(f.GB,{children:(0,t.jsx)(ec.A,{children:(0,t.jsxs)("div",{className:"flex w-full h-full overflow-hidden",children:[(0,t.jsx)(f.Bx,{style:{"--sidebar-width":"380px"},children:(0,t.jsx)(b,{onSelectCreature:e=>{s(e),r(!1),i(null)},onNewCreature:()=>{s(null),r(!0),i(null)},selectedCreatureId:e,dataVersion:c,filters:{searchTerm:o,roleFilter:m,templateFilter:u,minLevel:p,maxLevel:v,minTR:y,maxTR:C,tagFilter:z,sortBy:S,sortOrder:M},setFilters:{setSearchTerm:x,setRoleFilter:h,setTemplateFilter:j,setMinLevel:g,setMaxLevel:N,setMinTR:w,setMaxTR:R,setTagFilter:T,setSortBy:A,setSortOrder:L},onClearFilters:()=>{x(""),h("all"),j("all"),g(""),N(""),w(""),R(""),T(""),A("name"),L("asc")}})}),(0,t.jsx)(f.sF,{className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"bg-background/50 p-4 sm:p-6 md:p-8 h-full w-full",children:(0,t.jsx)(ei,{creatureId:e,isCreatingNew:l,template:n,onCreatureSaveSuccess:e=>{B(),s(e),r(!1),i(null)},onCreatureDeleteSuccess:()=>{B(),s(null),r(!1),i(null)},onUseAsTemplate:e=>{let l={...e};l.name="Copy of ".concat(e.name||"creature"),delete l.id,s(null),r(!0),i(l)},onEditCancel:()=>{l&&(r(!1),s(null))},dataVersion:c,onFilterByClick:(e,s)=>{s.shiftKey?(e.roleFilter&&h(e.roleFilter),e.templateFilter&&j(e.templateFilter),void 0!==e.minLevel&&g(String(e.minLevel)),void 0!==e.maxLevel&&N(String(e.maxLevel)),void 0!==e.minTR&&w(String(e.minTR)),void 0!==e.maxTR&&R(String(e.maxTR)),e.tagFilter&&T(s=>s?s.split(",").map(e=>e.trim()).includes(e.tagFilter)?s:"".concat(s,", ").concat(e.tagFilter):e.tagFilter)):(h(e.roleFilter||"all"),j(e.templateFilter||"all"),g(void 0!==e.minLevel?String(e.minLevel):""),N(void 0!==e.maxLevel?String(e.maxLevel):""),w(void 0!==e.minTR?String(e.minTR):""),R(void 0!==e.maxTR?String(e.maxTR):""),T(e.tagFilter||""))}},null!=e?e:l?"new":"placeholder")})})]})})})}},7262:(e,s,l)=>{"use strict";l.d(s,{S:()=>c});var t=l(5155),a=l(2115),r=l(6981),n=l(518),i=l(9434);let c=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)(r.bL,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",l),...a,children:(0,t.jsx)(r.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})})});c.displayName=r.bL.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[965,439,30,625,441,684,358],()=>s(4768)),_N_E=e.O()}]);