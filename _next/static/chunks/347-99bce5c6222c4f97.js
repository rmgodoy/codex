"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{20031:(e,t,a)=>{a.d(t,{Bx:()=>p,GB:()=>u,sF:()=>x,x2:()=>h});var r=a(95155),s=a(12115),n=a(15546),o=a(47906),l=a(59434),i=a(30285),d=a(38382),c=a(45821);let m=s.createContext(null);function f(){let e=s.useContext(m);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let u=s.forwardRef((e,t)=>{let{defaultOpen:a=!0,open:n,onOpenChange:i,className:d,children:c,...f}=e,u=(0,o.a)(),[p,h]=s.useState(!1),[x,b]=s.useState(a),y=null!=n?n:x,g=s.useCallback(e=>{let t="function"==typeof e?e(y):e;i?i(t):b(t),document.cookie="".concat("sidebar_state","=").concat(t,"; path=/; max-age=").concat(604800)},[i,y]),j=s.useCallback(()=>u?h(e=>!e):g(e=>!e),[u,g,h]);s.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),j())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j]);let N=y?"expanded":"collapsed",v=s.useMemo(()=>({state:N,open:y,setOpen:g,isMobile:u,openMobile:p,setOpenMobile:h,toggleSidebar:j}),[N,y,g,u,p,h,j]);return(0,r.jsx)(m.Provider,{value:v,children:(0,r.jsx)("div",{className:(0,l.cn)("flex min-h-0 w-full flex-1",d),ref:t,...f,children:c})})});u.displayName="SidebarProvider";let p=s.forwardRef((e,t)=>{let{className:a,children:s,side:n="left",...o}=e,{isMobile:i,state:m,openMobile:u,setOpenMobile:p}=f();return i?(0,r.jsx)(d.cj,{open:u,onOpenChange:p,children:(0,r.jsxs)(d.h,{side:n,className:"w-[var(--sidebar-width-mobile)] bg-card p-0 flex flex-col",style:{"--sidebar-width-mobile":"300px"},children:[(0,r.jsxs)(d.Fm,{className:"p-4 border-b",children:[(0,r.jsx)(c.L3,{className:"sr-only",children:"Menu"}),(0,r.jsx)(d.qp,{children:"Menu"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:s})]})}):(0,r.jsx)("div",{ref:t,className:(0,l.cn)("hidden md:flex flex-col bg-card text-card-foreground border-r border-border transition-all duration-300","expanded"===m?"w-[var(--sidebar-width)]":"w-0","overflow-hidden",a),...o,children:s})});p.displayName="Sidebar";let h=s.forwardRef((e,t)=>{let{className:a,onClick:s,...o}=e,{toggleSidebar:d}=f();return(0,r.jsxs)(i.$,{ref:t,variant:"ghost",size:"icon",className:(0,l.cn)("h-7 w-7",a),onClick:e=>{null==s||s(e),d()},...o,children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})});h.displayName="SidebarTrigger";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex-1 flex flex-col",a),...s})});x.displayName="SidebarInset"},22346:(e,t,a)=>{a.d(t,{w:()=>l});var r=a(95155),s=a(12115),n=a(87489),o=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:l=!0,...i}=e;return(0,r.jsx)(n.b,{ref:t,decorative:l,orientation:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...i})});l.displayName=n.b.displayName},30285:(e,t,a)=>{a.d(t,{$:()=>d,r:()=>i});var r=a(95155),s=a(12115),n=a(66634),o=a(74466),l=a(59434);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:d=!1,...c}=e,m=d?n.DX:"button";return(0,r.jsx)(m,{className:(0,l.cn)(i({variant:s,size:o,className:a})),ref:t,...c})});d.displayName="Button"},38382:(e,t,a)=>{a.d(t,{CG:()=>c,Fm:()=>h,cj:()=>d,h:()=>p,qp:()=>x});var r=a(95155),s=a(12115),n=a(45821),o=a(74466),l=a(25318),i=a(59434);let d=n.bL,c=n.l9;n.bm;let m=n.ZL,f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});f.displayName=n.hJ.displayName;let u=(0,o.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:o,...d}=e;return(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,i.cn)(u({side:a}),s),...d,children:[o,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=n.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};h.displayName="SheetHeader";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold text-foreground",a),...s})});x.displayName=n.hE.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName=n.VY.displayName},47906:(e,t,a)=>{a.d(t,{a:()=>s});var r=a(12115);function s(){let[e,t]=r.useState(void 0);return r.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}},59434:(e,t,a)=>{a.d(t,{cn:()=>n});var r=a(52596),s=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},62709:(e,t,a)=>{a.d(t,{A:()=>I});var r=a(95155),s=a(6874),n=a.n(s),o=a(28341),l=a(82643),i=a(16923),d=a(68718),c=a(30285),m=a(12115),f=a(76215),u=a(73158),p=a(10518),h=a(70154),x=a(59434);let b=f.bL,y=f.l9;f.YJ,f.ZL,f.Pb,f.z6,m.forwardRef((e,t)=>{let{className:a,inset:s,children:n,...o}=e;return(0,r.jsxs)(f.ZP,{ref:t,className:(0,x.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...o,children:[n,(0,r.jsx)(u.A,{className:"ml-auto"})]})}).displayName=f.ZP.displayName,m.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(f.G5,{ref:t,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=f.G5.displayName;let g=m.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(f.ZL,{children:(0,r.jsx)(f.UC,{ref:t,sideOffset:s,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});g.displayName=f.UC.displayName;let j=m.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(f.q7,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...n})});j.displayName=f.q7.displayName,m.forwardRef((e,t)=>{let{className:a,children:s,checked:n,...o}=e;return(0,r.jsxs)(f.H_,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(f.VF,{children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})}),s]})}).displayName=f.H_.displayName,m.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(f.hN,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(f.VF,{children:(0,r.jsx)(h.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=f.hN.displayName,m.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(f.JU,{ref:t,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...n})}).displayName=f.JU.displayName,m.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(f.wv,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=f.wv.displayName;var N=a(38382),v=a(35695),w=a(22346),S=a(66424),A=a(20031),E=a(90010),C=a(87481),R=a(82489);let k=async()=>{let e=await (0,R.Lf)(),t=[R.RN,R.qi,R.l_,R.C2,R.yX,R.zG,R.rP,R.NK,R.Qu,R.TP,R.U3,R.Xc,R.qo,R.$,R.ux],a=e.transaction(t,"readonly"),r=t.map(e=>new Promise((t,r)=>{let s=a.objectStore(e).getAll();s.onsuccess=()=>t({name:e,data:s.result}),s.onerror=()=>r(s.error)})),s=await Promise.all(r),n={};return s.forEach(e=>{n[e.name]=e.data}),n},T=async e=>{let t=await (0,R.Lf)();if("object"!=typeof e||null===e)return Promise.reject(Error("Invalid import file format. Expected an object with arrays of data."));let a=[R.RN,R.qi,R.l_,R.C2,R.yX,R.zG,R.rP,R.NK,R.Qu,R.TP,R.U3,R.Xc,R.qo,R.$,R.ux],r=t.transaction(a,"readwrite"),s={};a.forEach(e=>{s[e]=r.objectStore(e),s[e].clear()});let n=new Map,o=(e,t)=>{e&&Array.isArray(e)&&e.forEach(e=>{let a="".concat(e,"|").concat(t);n.has(a)||n.set(a,{name:e,source:t})})};e.creatures&&Array.isArray(e.creatures)&&e.creatures.forEach(e=>{let t=[];"string"==typeof e.abilities&&e.abilities.length>0?t=e.abilities.split("\n\n").map(e=>{let t=e.match(RegExp("\\*\\*(.*?):\\*\\*\\s*(.*)","s"));return t&&t[1]&&t[2]?{id:crypto.randomUUID(),name:t[1],description:t[2].trim()}:!t&&e.trim()?{id:crypto.randomUUID(),name:"Ability",description:e.trim()}:null}).filter(e=>null!==e):Array.isArray(e.abilities)&&(t=e.abilities.map(e=>({...e,id:e.id||crypto.randomUUID()})));let a={...e,abilities:t};s[R.RN].put(a),o(e.tags,"creature")}),e.deeds&&Array.isArray(e.deeds)&&e.deeds.forEach(e=>{s[R.qi].put(e),o(e.tags,"deed")}),e.encounters&&Array.isArray(e.encounters)&&e.encounters.forEach(e=>{s[R.l_].put(e),o(e.tags,"encounter")}),e.encounterTables&&Array.isArray(e.encounterTables)&&e.encounterTables.forEach(e=>{s[R.yX].put(e),o(e.tags,"encounterTable")}),e.treasures&&Array.isArray(e.treasures)&&e.treasures.forEach(e=>{s[R.zG].put(e),o(e.tags,"treasure")}),e.alchemicalItems&&Array.isArray(e.alchemicalItems)&&e.alchemicalItems.forEach(e=>{s[R.rP].put(e),o(e.tags,"alchemicalItem")}),e.rooms&&Array.isArray(e.rooms)&&e.rooms.forEach(e=>{s[R.NK].put(e),o(e.tags,"room")}),e.dungeons&&Array.isArray(e.dungeons)&&e.dungeons.forEach(e=>{s[R.Qu].put(e),o(e.tags,"dungeon")}),e.items&&Array.isArray(e.items)&&e.items.forEach(e=>{s[R.TP].put(e),o(e.tags,"item")}),e.factions&&Array.isArray(e.factions)&&e.factions.forEach(e=>{s[R.U3].put(e),o(e.tags,"faction")}),e.npcs&&Array.isArray(e.npcs)&&e.npcs.forEach(e=>{let t={...e};t.factionId&&(!t.factionIds||0===t.factionIds.length)&&(t.factionIds=[t.factionId]),delete t.factionId,s[R.Xc].put(t),o(e.tags,"npc")}),e.calendars&&Array.isArray(e.calendars)&&e.calendars.forEach(e=>{s[R.qo].put(e)});let l=null;return e.calendarEvents&&Array.isArray(e.calendarEvents)&&e.calendarEvents.forEach(t=>{if(!t.calendarId){if(!l){let t=e.calendars||[];if(t.length>0)l=t[0].id;else{let e={id:(0,R.$C)(),name:"Default Calendar"};s[R.qo].put(e),l=e.id}}t.calendarId=l}s[R.$].put(t),o(t.tags,"calendar")}),e.maps&&Array.isArray(e.maps)&&e.maps.forEach(e=>{s[R.ux].put(e)}),n.forEach(e=>{s[R.C2].put(e)}),new Promise((e,t)=>{r.oncomplete=()=>e(),r.onerror=()=>t(r.error)})};function I(e){let{children:t,showSidebarTrigger:a=!0}=e,s=(0,v.usePathname)(),f=(0,m.useRef)(null),{toast:u}=(0,C.dj)(),p=async()=>{try{let e=await k(),t="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e,null,2))),a=document.createElement("a");a.href=t,a.download="tresspasser_bestiary.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),u({title:"Export Successful",description:"Your data has been downloaded."})}catch(e){console.error("Export failed:",e),u({variant:"destructive",title:"Export Failed",description:"Could not export the data."})}},h=async e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=async e=>{try{var t;let a=null==(t=e.target)?void 0:t.result;if("string"!=typeof a)throw Error("File content could not be read as text.");let r=JSON.parse(a);await T(r),u({title:"Import Successful",description:"Data has been overwritten. The application will now reload."}),setTimeout(()=>{window.location.reload()},1500)}catch(e){console.error("Import failed:",e),u({variant:"destructive",title:"Import Failed",description:e.message||"Please check the file format and content."})}finally{f.current&&(f.current.value="")}},r.readAsText(a)},x=(0,m.useMemo)(()=>{if(s.startsWith("/random/encounter-tables"))return"Encounter Tables";if(s.startsWith("/random/treasures"))return"Treasures";if(s.startsWith("/random/commoners"))return"Commoners";if(s.startsWith("/alchemy"))return"Alchemy";if(s.startsWith("/rooms"))return"Rooms";if(s.startsWith("/dungeons"))return"Dungeons";if(s.startsWith("/items"))return"Items";if(s.startsWith("/npcs"))return"NPCs";if(s.startsWith("/factions"))return"Factions";if(s.startsWith("/calendar"))return"Calendar";if(s.startsWith("/maps"))return"Maps";switch(s){case"/":default:return"Bestiary";case"/deeds":return"Deeds";case"/encounters":return"Encounters"}},[s]),R=[{href:"/alchemy",label:"Alchemy",group:"Compendium"},{href:"/deeds",label:"Deeds",group:"Compendium"},{href:"/",label:"Bestiary",group:"Compendium"},{href:"/items",label:"Items",group:"Compendium"},{href:"/npcs",label:"NPCs",group:"Compendium"},{href:"/factions",label:"Factions",group:"Compendium"},{href:"/rooms",label:"Rooms",group:"Compendium"},{href:"/dungeons",label:"Dungeons",group:"Compendium"},{href:"/random/encounter-tables",label:"Encounter Tables",group:"Random"},{href:"/random/treasures",label:"Treasures",group:"Random"},{href:"/random/commoners",label:"Commoners",group:"Random"},{href:"/encounters",label:"Encounters"},{href:"/calendar",label:"Calendar"},{href:"/maps",label:"Maps"}],I=R.filter(e=>"Compendium"===e.group),P=R.filter(e=>"Random"===e.group),O=R.filter(e=>!e.group),_=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b,{children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsx)(c.$,{variant:"ghost",children:"Compendium"})}),(0,r.jsx)(g,{children:I.map(e=>(0,r.jsx)(n(),{href:e.href,passHref:!0,children:(0,r.jsx)(j,{children:e.label})},e.href))})]}),(0,r.jsxs)(b,{children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsx)(c.$,{variant:"ghost",children:"Random"})}),(0,r.jsx)(g,{children:P.map(e=>(0,r.jsx)(n(),{href:e.href,passHref:!0,children:(0,r.jsx)(j,{children:e.label})},e.href))})]}),O.map(e=>(0,r.jsx)(n(),{href:e.href,passHref:!0,children:(0,r.jsx)(c.$,{variant:s===e.href?"secondary":"ghost",children:e.label})},e.href))]}),D=(0,r.jsxs)(N.cj,{children:[(0,r.jsx)(N.CG,{asChild:!0,children:(0,r.jsxs)(c.$,{variant:"ghost",size:"icon",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,r.jsxs)(N.h,{side:"right",className:"p-0 flex flex-col",children:[(0,r.jsx)(N.Fm,{className:"p-4 border-b",children:(0,r.jsx)(N.qp,{children:"Menu"})}),(0,r.jsx)(S.F,{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,r.jsx)("p",{className:"font-bold text-lg",children:"Compendium"}),I.map(e=>(0,r.jsx)(n(),{href:e.href,passHref:!0,children:(0,r.jsx)(c.$,{variant:s===e.href?"secondary":"ghost",className:"w-full justify-start",children:e.label})},e.href)),(0,r.jsx)(w.w,{className:"my-2"}),(0,r.jsx)("p",{className:"font-bold text-lg",children:"Random"}),P.map(e=>(0,r.jsx)(n(),{href:e.href,passHref:!0,children:(0,r.jsx)(c.$,{variant:s===e.href?"secondary":"ghost",className:"w-full justify-start",children:e.label})},e.href)),(0,r.jsx)(w.w,{className:"my-2"}),O.map(e=>(0,r.jsx)(n(),{href:e.href,passHref:!0,children:(0,r.jsx)(c.$,{variant:s===e.href?"secondary":"ghost",className:"w-full justify-start",children:e.label})},e.href))]})})]})]});return(0,r.jsxs)("div",{className:"flex flex-col h-screen",style:{width:"100%"},children:[(0,r.jsxs)("header",{className:"py-4 px-6 md:px-8 border-b border-border flex items-center justify-between shrink-0 bg-background/80 backdrop-blur-sm sticky top-0 z-20",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[("/"===s||s.startsWith("/deeds")||s.startsWith("/encounters")||s.startsWith("/random")||s.startsWith("/alchemy")||s.startsWith("/rooms")||s.startsWith("/items")||s.startsWith("/dungeons")||s.startsWith("/npcs")||s.startsWith("/factions")||s.startsWith("/calendar")||s.startsWith("/maps"))&&a&&(0,r.jsx)(A.x2,{}),(0,r.jsxs)(n(),{href:"/",className:"flex items-center gap-3",children:[(0,r.jsx)(l.A,{className:"text-primary h-8 w-8"}),(0,r.jsxs)("h1",{className:"text-2xl md:text-3xl font-headline font-bold text-primary-foreground whitespace-nowrap",children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:"Tresspasser "}),x]})]}),(0,r.jsx)(w.w,{orientation:"vertical",className:"h-6 mx-2 hidden md:block"}),(0,r.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:_})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("input",{type:"file",ref:f,onChange:h,accept:".json",className:"hidden"}),(0,r.jsxs)(E.Lt,{children:[(0,r.jsx)(E.tv,{asChild:!0,children:(0,r.jsxs)(c.$,{variant:"ghost",size:"icon",title:"Import Data",children:[(0,r.jsx)(i.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Import Data"})]})}),(0,r.jsxs)(E.EO,{children:[(0,r.jsxs)(E.wd,{children:[(0,r.jsx)(E.r7,{children:"Import Data?"}),(0,r.jsx)(E.$v,{children:"This will overwrite all existing creatures, deeds, and encounters with the data from the selected JSON file. This action cannot be undone."})]}),(0,r.jsxs)(E.ck,{children:[(0,r.jsx)(E.Zr,{children:"Cancel"}),(0,r.jsx)(E.Rx,{onClick:()=>{var e;return null==(e=f.current)?void 0:e.click()},children:"Proceed"})]})]})]}),(0,r.jsxs)(c.$,{variant:"ghost",size:"icon",onClick:p,title:"Export Data",children:[(0,r.jsx)(d.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Export Data"})]}),(0,r.jsx)("div",{className:"md:hidden",children:D})]})]}),(0,r.jsx)("main",{className:"flex-1 min-h-0",children:t})]})}},66424:(e,t,a)=>{a.d(t,{F:()=>l});var r=a(95155),s=a(12115),n=a(47655),o=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.bL,{ref:t,className:(0,o.cn)("relative overflow-hidden",a),...l,children:[(0,r.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(i,{}),(0,r.jsx)(n.OK,{})]})});l.displayName=n.bL.displayName;let i=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...l}=e;return(0,r.jsx)(n.VM,{ref:t,orientation:s,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,r.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});i.displayName=n.VM.displayName},66695:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>o,aR:()=>l,wL:()=>m});var r=a(95155),s=a(12115),n=a(59434);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});o.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});m.displayName="CardFooter"},82489:(e,t,a)=>{a.d(t,{$:()=>h,$C:()=>g,C2:()=>o,Lf:()=>y,NK:()=>c,Qu:()=>m,RN:()=>r,TP:()=>f,U3:()=>u,Xc:()=>p,l_:()=>n,qi:()=>s,qo:()=>x,rP:()=>d,ux:()=>b,yX:()=>l,zG:()=>i});let r="creatures",s="deeds",n="encounters",o="tags",l="encounterTables",i="treasures",d="alchemicalItems",c="rooms",m="dungeons",f="items",u="factions",p="npcs",h="calendarEvents",x="calendars",b="maps",y=()=>new Promise((e,t)=>{let a=indexedDB.open("TresspasserBestiaryDB",17);a.onupgradeneeded=e=>{let t=a.result,y=e.oldVersion;if(t.objectStoreNames.contains(r)||t.createObjectStore(r,{keyPath:"id"}),t.objectStoreNames.contains(s)||t.createObjectStore(s,{keyPath:"id"}),t.objectStoreNames.contains(n)||t.createObjectStore(n,{keyPath:"id"}),t.objectStoreNames.contains(o)||t.createObjectStore(o,{keyPath:["name","source"]}).createIndex("by_source","source",{unique:!1}),t.objectStoreNames.contains(l)||t.createObjectStore(l,{keyPath:"id"}),t.objectStoreNames.contains(i)||t.createObjectStore(i,{keyPath:"id"}),t.objectStoreNames.contains(d)||t.createObjectStore(d,{keyPath:"id"}),t.objectStoreNames.contains(c)||t.createObjectStore(c,{keyPath:"id"}),t.objectStoreNames.contains(m)||t.createObjectStore(m,{keyPath:"id"}),t.objectStoreNames.contains(f)||t.createObjectStore(f,{keyPath:"id"}),t.objectStoreNames.contains(u)||t.createObjectStore(u,{keyPath:"id"}),t.objectStoreNames.contains(p)||t.createObjectStore(p,{keyPath:"id"}),t.objectStoreNames.contains(x)||t.createObjectStore(x,{keyPath:"id"}),t.objectStoreNames.contains(h)){if(y<16){let e=a.transaction.objectStore(h);e.indexNames.contains("by_calendar")||e.createIndex("by_calendar","calendarId",{unique:!1})}}else t.createObjectStore(h,{keyPath:"id"}).createIndex("by_calendar","calendarId",{unique:!1});t.objectStoreNames.contains(b)||t.createObjectStore(b,{keyPath:"id"})},a.onsuccess=()=>{e(a.result)},a.onerror=()=>{console.error("IndexedDB error:",a.error),t(a.error)}}),g=()=>crypto.randomUUID()},85057:(e,t,a)=>{a.d(t,{J:()=>d});var r=a(95155),s=a(12115),n=a(40968),o=a(74466),l=a(59434);let i=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)(i(),a),...s})});d.displayName=n.b.displayName},87481:(e,t,a)=>{a.d(t,{dj:()=>f});var r=a(12115);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=l(d,e),i.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},90010:(e,t,a)=>{a.d(t,{$v:()=>x,EO:()=>f,Lt:()=>i,Rx:()=>b,Zr:()=>y,ck:()=>p,r7:()=>h,tv:()=>d,wd:()=>u});var r=a(95155),s=a(12115),n=a(62278),o=a(59434),l=a(30285);let i=n.bL,d=n.l9,c=n.ZL,m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});m.displayName=n.hJ.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsx)(n.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});f.displayName=n.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};u.displayName="AlertDialogHeader";let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="AlertDialogFooter";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...s})});h.displayName=n.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=n.VY.displayName;let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.rc,{ref:t,className:(0,o.cn)((0,l.r)(),a),...s})});b.displayName=n.rc.displayName;let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.ZD,{ref:t,className:(0,o.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});y.displayName=n.ZD.displayName}}]);