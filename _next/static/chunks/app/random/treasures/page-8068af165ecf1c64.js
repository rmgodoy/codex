(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{12543:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},20203:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},30990:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]])},34301:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},53054:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},64911:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>H});var a=t(95155),r=t(12115),l=t(62709),n=t(20031),i=t(47906),c=t(74691),o=t(62523),d=t(30285),m=t(66424),u=t(22346),x=t(87481),h=t(34301),j=t(75074),p=t(20203),g=t(73926),v=t(85057),y=t(59409),f=t(90648);function w(e){let{onSelectTreasure:s,onNewTreasure:t,selectedTreasureId:l,dataVersion:n,filters:i,setFilters:w,onClearFilters:N}=e,[b,C]=(0,r.useState)([]),[S,k]=(0,r.useState)(!0),{toast:A}=(0,x.dj)();(0,r.useEffect)(()=>{(async()=>{k(!0);try{C(await (0,c.Ap)())}catch(e){A({variant:"destructive",title:"Error",description:"Could not fetch treasures from database."})}finally{k(!1)}})()},[n,A]);let z=(0,r.useMemo)(()=>{let e=b.filter(e=>{let s=e.name.toLowerCase().includes(i.searchTerm.toLowerCase()),t=!0,a=i.tagFilter.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean);a.length>0&&(t=!!e.tags&&a.every(s=>e.tags.some(e=>e.toLowerCase().includes(s))));let r=!0;return i.minValue&&!isNaN(parseInt(i.minValue))&&(r=r&&e.value>=parseInt(i.minValue,10)),i.maxValue&&!isNaN(parseInt(i.maxValue))&&(r=r&&e.value<=parseInt(i.maxValue,10)),s&&t&&r}).sort((e,s)=>{if("value"===i.sortBy){var t,a;let r=(null!=(t=e.value)?t:0)-(null!=(a=s.value)?a:0);if(0!==r)return r}return e.name.localeCompare(s.name)});return"desc"===i.sortOrder&&e.reverse(),e},[b,i]);return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)(d.$,{onClick:t,className:"w-full",children:[(0,a.jsx)(h.A,{})," New Treasure"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(o.p,{placeholder:"Search treasures...",value:i.searchTerm,onChange:e=>w.setSearchTerm(e.target.value),className:"pl-9"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(v.J,{children:"Filter"}),(0,a.jsx)(d.$,{variant:"ghost",size:"sm",onClick:N,className:"text-xs h-auto p-1",children:"Clear"})]}),(0,a.jsx)(f.F,{value:i.tagFilter?i.tagFilter.split(",").map(e=>e.trim()).filter(Boolean):[],onChange:e=>w.setTagFilter(e.join(",")),placeholder:"Tags...",tagSource:"treasure"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.p,{placeholder:"Min Value",type:"number",value:i.minValue,onChange:e=>w.setMinValue(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,a.jsx)(o.p,{placeholder:"Max Value",type:"number",value:i.maxValue,onChange:e=>w.setMaxValue(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{children:"Sort by"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(y.l6,{value:i.sortBy,onValueChange:e=>w.setSortBy(e),children:[(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{placeholder:"Sort by"})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"name",children:"Name"}),(0,a.jsx)(y.eb,{value:"value",children:"Value"})]})]}),(0,a.jsxs)(d.$,{variant:"ghost",size:"icon",onClick:()=>w.setSortOrder(e=>"asc"===e?"desc":"asc"),children:["asc"===i.sortOrder?(0,a.jsx)(p.A,{className:"h-4 w-4"}):(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle sort order"})]})]})]})]}),(0,a.jsx)(u.w,{}),(0,a.jsx)(m.F,{className:"flex-1",children:(0,a.jsx)("div",{className:"p-4",children:S?(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"Loading treasures..."}):z.length>0?(0,a.jsx)("ul",{className:"space-y-1",children:z.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"w-full text-left p-2 rounded-md transition-colors ".concat(l===e.id?"bg-primary text-primary-foreground":"hover:bg-accent/50"),children:[e.name," ",(0,a.jsxs)("span",{className:"text-xs opacity-70",children:["(Value ",e.value,")"]})]})},e.id))}):(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"No treasures found."})})})]})}var N=t(62177),b=t(90221),C=t(55594),S=t(44218);let k=[{material:"Stone",gemstone:"Jasper"},{material:"Wood",gemstone:"Citrine"},{material:"Bone",gemstone:"Moonstone"},{material:"Leather",gemstone:"Jade"},{material:"Bronze",gemstone:"Lapis Lazuli"},{material:"Tin",gemstone:"Amber"},{material:"Lead",gemstone:"Moonstone"},{material:"Pewter",gemstone:"Agate"},{material:"Brass",gemstone:"Peridot"},{material:"Copper",gemstone:"Turquoise"},{material:"Iron",gemstone:"Amethyst"},{material:"Porcelain",gemstone:"Opal"},{material:"Glass",gemstone:"Aquamarine"},{material:"Coral",gemstone:"Zircon"},{material:"Petrified Wood",gemstone:"Garnet"},{material:"Crystal",gemstone:"Pearl"},{material:"Silver",gemstone:"Emerald"},{material:"Electrum",gemstone:"Sapphire"},{material:"Gold",gemstone:"Ruby"},{material:"Platinum",gemstone:"Diamond"}],A=[{"1-3":{name:"Gemstone (no material roll)",slots:"tiny"},"4-6":{name:"Pot",slots:"1"}},{"1-3":{name:"Game Piece",slots:"tiny"},"4-6":{name:"Toy",slots:"1"}},{"1-3":{name:"Silverware",slots:"tiny"},"4-6":{name:"Box",slots:"1"}},{"1-3":{name:"Earring",slots:"tiny"},"4-6":{name:"Drum",slots:"1"}},{"1-3":{name:"Ring",slots:"tiny"},"4-6":{name:"Flute",slots:"1"}},{"1-3":{name:"Buckle",slots:"tiny"},"4-6":{name:"Lute",slots:"1"}},{"1-3":{name:"Hairpin",slots:"tiny"},"4-6":{name:"Horn",slots:"1"}},{"1-3":{name:"Doll",slots:"tiny"},"4-6":{name:"Game Set",slots:"1"}},{"1-3":{name:"Figurine",slots:"tiny"},"4-6":{name:"Scroll Case",slots:"1"}},{"1-3":{name:"Bracelet",slots:"tiny"},"4-6":{name:"Candelabra",slots:"1"}},{"1-3":{name:"Torque",slots:"tiny"},"4-6":{name:"Framed Painting",slots:"2"}},{"1-3":{name:"Circlet",slots:"tiny"},"4-6":{name:"Statuette",slots:"2"}},{"1-3":{name:"Necklace",slots:"tiny"},"4-6":{name:"Vase",slots:"2"}},{"1-3":{name:"Goblet",slots:"tiny"},"4-6":{name:"Cauldron",slots:"2"}},{"1-3":{name:"Hand Mirror",slots:"1"},"4-6":{name:"Harp",slots:"2"}},{"1-3":{name:"Book",slots:"1"},"4-6":{name:"Chest",slots:"2"}},{"1-3":{name:"Spyglass",slots:"1"},"4-6":{name:"Large Framed Painting",slots:"3"}},{"1-3":{name:"Scepter",slots:"1"},"4-6":{name:"Tapestry",slots:"3"}},{"1-3":{name:"Crown",slots:"1"},"4-6":{name:"Standing Mirror",slots:"3"}},{"1-3":{name:"Holy Relic",slots:"1"},"4-6":{name:"Sculpture",slots:"3"}}],z=e=>Math.floor(Math.random()*e)+1,T=e=>e<=25?1:e<=35?3:5,M=()=>{let e=z(20),s=z(20),t=z(20),a=z(6),r=T(e+s+t),l=A[e-1][a<=3?"1-3":"4-6"],{gemstone:n}=k[t-1],{material:i}=k[s-1];l.name.startsWith("Gemstone")&&(i="N/A");let c=l.name,o=l.slots,d="A ".concat(c.toLowerCase());return"N/A"!==i&&(d+=" made of ".concat(i.toLowerCase())),{name:c,description:d+=", inlaid with ".concat(n.toLowerCase(),"."),value:r,slots:o,material:i,gemstone:n,isGenerated:!0}};var G=t(66695),L=t(88539),V=t(90010),B=t(17759),E=t(12543),F=t(18763),P=t(77223),I=t(30990),R=t(25318),q=t(53054),$=t(68856),D=t(26126);let J=C.z.object({name:C.z.string().min(1,"Treasure name is required"),description:C.z.string().optional(),material:C.z.string().min(1,"Material is required"),gemstone:C.z.string().min(1,"Gemstone is required"),value:C.z.coerce.number().min(0,"Value must be a positive number"),slots:C.z.string().min(1,"Slots are required"),tags:C.z.array(C.z.string()).optional(),isGenerated:C.z.boolean()}),Z={name:"",description:"",material:"",gemstone:"",value:0,slots:"1",tags:[],isGenerated:!1};function O(e){let{treasureId:s,isCreatingNew:t,onSaveSuccess:l,onDeleteSuccess:n,onEditCancel:m,onBack:h}=e,{toast:j}=(0,x.dj)(),[p,g]=(0,r.useState)(t),[v,y]=(0,r.useState)(!t&&!!s),[w,C]=(0,r.useState)(null),k=(0,i.a)(),A=(0,N.mN)({resolver:(0,b.u)(J),defaultValues:Z});(0,r.useEffect)(()=>{(async()=>{if(t){A.reset(Z),C(null),g(!0),y(!1);return}if(!s){g(!1),y(!1),C(null);return}y(!0),g(!1);try{let e=await (0,c.qp)(s);e?(A.reset(e),C(e)):C(null)}catch(e){j({variant:"destructive",title:"Error",description:"Could not load treasure data."})}finally{y(!1)}})()},[s,t,A,j]);let z=()=>{t?m():w&&(A.reset(w),g(!1))},T=async e=>{try{let a={...e,description:e.description||"",tags:e.tags||[]},r=e.tags||[];if(r.length>0&&await (0,S.JE)(r,"treasure"),t){let s=await (0,c.Dp)(a);j({title:"Treasure Created!",description:"".concat(e.name," has been added.")}),l(s)}else s&&(await (0,c.Ld)({...a,id:s}),j({title:"Save Successful",description:"".concat(e.name," has been updated.")}),l(s));g(!1)}catch(e){j({variant:"destructive",title:"Save Failed",description:"Could not save changes."})}},O=async()=>{if(s)try{await (0,c.vm)(s),j({title:"Treasure Deleted",description:"The treasure has been removed."}),n()}catch(e){j({variant:"destructive",title:"Deletion Failed",description:"Could not delete the treasure."})}};return v?(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsxs)(G.Zp,{children:[(0,a.jsx)(G.aR,{children:(0,a.jsx)($.E,{className:"h-8 w-48"})}),(0,a.jsx)(G.Wu,{children:(0,a.jsx)($.E,{className:"h-40 w-full"})})]})}):s||t?!p&&w?(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsxs)(G.Zp,{children:[(0,a.jsx)(G.aR,{children:(0,a.jsxs)("div",{className:"flex flex-row items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[k&&h&&(0,a.jsx)(d.$,{variant:"ghost",size:"icon",onClick:h,className:"shrink-0 -ml-2 -mt-1",children:(0,a.jsx)(E.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(G.ZB,{className:"text-3xl font-bold",children:w.name}),(0,a.jsxs)(G.BT,{children:["A treasure of value ",w.value]})]})]}),(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>g(!0),children:[(0,a.jsx)(F.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline ml-2",children:"Edit"})]})]})}),(0,a.jsx)(G.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-foreground/80 whitespace-pre-wrap",children:w.description||"No description provided."}),(0,a.jsx)(u.w,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Material:"})," ",w.material]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Gemstone:"})," ",w.gemstone]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Slots:"})," ",w.slots]})]}),w.tags&&w.tags.length>0&&(0,a.jsx)("div",{className:"mt-4 pt-3 border-t border-border/50",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:w.tags.map(e=>(0,a.jsx)(D.E,{variant:"secondary",children:e},e))})})]})}),(0,a.jsx)(G.wL,{children:(0,a.jsxs)(V.Lt,{children:[(0,a.jsx)(V.tv,{asChild:!0,children:(0,a.jsx)(d.$,{type:"button",variant:"destructive",size:"sm",children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(V.EO,{children:[(0,a.jsxs)(V.wd,{children:[(0,a.jsx)(V.r7,{children:"Are you sure?"}),(0,a.jsxs)(V.$v,{children:['This will permanently delete "',w.name,'". This action cannot be undone.']})]}),(0,a.jsxs)(V.ck,{children:[(0,a.jsx)(V.Zr,{children:"Cancel"}),(0,a.jsx)(V.Rx,{onClick:O,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})})]})}):(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsx)(G.Zp,{children:(0,a.jsx)(B.lV,{...A,children:(0,a.jsxs)("form",{onSubmit:A.handleSubmit(T),className:"space-y-6",children:[(0,a.jsx)(G.aR,{children:(0,a.jsxs)("div",{className:"flex flex-row justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[k&&h&&(0,a.jsx)(d.$,{type:"button",variant:"ghost",size:"icon",onClick:m,className:"shrink-0 -ml-2",children:(0,a.jsx)(E.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{children:(0,a.jsx)(G.ZB,{children:t?k?"New Treasure":"Create New Treasure":"Editing: ".concat(A.getValues("name")||"...")})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,a.jsxs)(d.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=M();A.reset({...A.getValues(),...e,isGenerated:!0}),j({title:"Treasure Generated!",description:"Review and save the new treasure."})},children:[(0,a.jsx)(I.A,{className:"h-4 w-4 mr-2"})," Generate"]}),!k&&(0,a.jsx)(d.$,{type:"button",variant:"ghost",size:"icon",onClick:z,className:"text-muted-foreground hover:text-foreground",children:(0,a.jsx)(R.A,{className:"h-5 w-5"})})]})]})}),(0,a.jsxs)(G.Wu,{className:"space-y-6",children:[(0,a.jsx)(B.zB,{name:"name",control:A.control,render:e=>{let{field:s}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Name (Form Factor)"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(o.p,{...s})}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(B.zB,{name:"material",control:A.control,render:e=>{let{field:s}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Material"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(o.p,{...s})}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsx)(B.zB,{name:"gemstone",control:A.control,render:e=>{let{field:s}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Gemstone"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(o.p,{...s})}),(0,a.jsx)(B.C5,{})]})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(B.zB,{name:"value",control:A.control,render:e=>{let{field:s}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Value"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(o.p,{type:"number",...s})}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsx)(B.zB,{name:"slots",control:A.control,render:e=>{let{field:s}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Slots"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(o.p,{...s,placeholder:"e.g., tiny or 2"})}),(0,a.jsx)(B.C5,{})]})}})]}),(0,a.jsx)(B.zB,{name:"description",control:A.control,render:e=>{let{field:s}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Description"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(L.T,{...s,rows:3})})]})}}),(0,a.jsx)(B.zB,{name:"tags",control:A.control,render:e=>{let{field:s}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsxs)(B.lR,{className:"flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"h-4 w-4 text-accent"}),"Tags"]}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(f.F,{value:s.value||[],onChange:s.onChange,placeholder:"Add tags...",tagSource:"treasure"})}),(0,a.jsx)(B.C5,{})]})}})]}),(0,a.jsxs)(G.wL,{className:"flex items-center gap-2",children:[!t&&(0,a.jsxs)(V.Lt,{children:[(0,a.jsx)(V.tv,{asChild:!0,children:(0,a.jsx)(d.$,{type:"button",variant:"destructive",size:"sm",children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(V.EO,{children:[(0,a.jsxs)(V.wd,{children:[(0,a.jsx)(V.r7,{children:"Are you sure?"}),(0,a.jsxs)(V.$v,{children:['This will permanently delete "',A.getValues("name"),'".']})]}),(0,a.jsxs)(V.ck,{children:[(0,a.jsx)(V.Zr,{children:"Cancel"}),(0,a.jsx)(V.Rx,{onClick:O,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]}),(0,a.jsx)("div",{className:"flex-grow"}),!k&&(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:z,children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",children:t?"Create Treasure":"Save Changes"})]})]})})})}):(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsx)(G.Zp,{className:"h-full flex items-center justify-center min-h-[300px]",children:(0,a.jsxs)(G.Wu,{className:"text-center pt-6",children:[(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"Select a treasure to view"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"or create a new one."})]})})})}function H(){let[e,s]=(0,r.useState)(null),[t,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(0),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[j,p]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[y,f]=(0,r.useState)("name"),[N,b]=(0,r.useState)("asc"),[C,S]=(0,r.useState)(!1),k=(0,i.a)(),[A,z]=(0,r.useState)("list");(0,r.useEffect)(()=>{S(!0)},[]);let T={searchTerm:m,tagFilter:x,minValue:j,maxValue:g,sortBy:y,sortOrder:N},M={setSearchTerm:u,setTagFilter:h,setMinValue:p,setMaxValue:v,setSortBy:f,setSortOrder:b},G=()=>{u(""),h(""),p(""),v(""),f("name"),b("asc")},L=()=>d(e=>e+1),V=e=>{s(e),c(!1),k&&z("editor")},B=()=>{s(null),c(!0),k&&z("editor")},E=e=>{L(),s(e),c(!1),k&&z("editor")},F=()=>{L(),s(null),c(!1),k&&z("list")},P=()=>{t&&(c(!1),s(null),k&&z("list"))};return C?k?(0,a.jsx)(l.A,{showSidebarTrigger:!1,children:(0,a.jsx)("div",{className:"h-full w-full",children:"list"===A?(0,a.jsx)(w,{onSelectTreasure:V,onNewTreasure:B,selectedTreasureId:e,dataVersion:o,filters:T,setFilters:M,onClearFilters:G}):(0,a.jsx)("div",{className:"h-full w-full overflow-y-auto",children:(0,a.jsx)("div",{className:"p-4 sm:p-6",children:(0,a.jsx)(O,{treasureId:e,isCreatingNew:t,onSaveSuccess:E,onDeleteSuccess:F,onEditCancel:P,onBack:()=>{z("list"),s(null),c(!1)}},null!=e?e:t?"new":"placeholder")})})})}):(0,a.jsx)(n.GB,{children:(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{className:"flex w-full h-full overflow-hidden",children:[(0,a.jsx)(n.Bx,{style:{"--sidebar-width":"380px"},children:(0,a.jsx)(w,{onSelectTreasure:V,onNewTreasure:B,selectedTreasureId:e,dataVersion:o,filters:T,setFilters:M,onClearFilters:G})}),(0,a.jsx)(n.sF,{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"bg-background/50 p-4 sm:p-6 md:p-8 w-full",children:(0,a.jsx)(O,{treasureId:e,isCreatingNew:t,onSaveSuccess:E,onDeleteSuccess:F,onEditCancel:P},null!=e?e:t?"new":"placeholder")})})]})})}):null}},68856:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(95155),r=t(59434);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}},73926:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},74691:(e,s,t)=>{"use strict";t.d(s,{Ap:()=>r,Dp:()=>n,Ld:()=>i,qp:()=>l,vm:()=>c});var a=t(82489);let r=async()=>{let e=(await (0,a.Lf)()).transaction(a.zG,"readonly").objectStore(a.zG).getAll();return new Promise((s,t)=>{e.onsuccess=()=>s(e.result),e.onerror=()=>t(e.error)})},l=async e=>{let s=(await (0,a.Lf)()).transaction(a.zG,"readonly").objectStore(a.zG).get(e);return new Promise((e,t)=>{s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})},n=async e=>{let s=(await (0,a.Lf)()).transaction(a.zG,"readwrite").objectStore(a.zG),t=(0,a.$C)(),r={...e,id:t},l=s.add(r);return new Promise((e,s)=>{l.onsuccess=()=>e(t),l.onerror=()=>s(l.error)})},i=async e=>{let s=(await (0,a.Lf)()).transaction(a.zG,"readwrite").objectStore(a.zG).put(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})},c=async e=>{let s=(await (0,a.Lf)()).transaction(a.zG,"readwrite").objectStore(a.zG).delete(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})}},75074:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},87773:(e,s,t)=>{Promise.resolve().then(t.bind(t,64911))}},e=>{var s=s=>e(e.s=s);e.O(0,[222,194,160,49,347,516,441,684,358],()=>s(87773)),_N_E=e.O()}]);