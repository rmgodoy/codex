"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4772],{34772:(e,s,l)=>{l.r(s),l.d(s,{default:()=>er});var a=l(95155),t=l(12115),r=l(6195),n=l(20031),i=l(47906),c=l(15019),d=l(62523),o=l(30285),m=l(66424),x=l(22346),h=l(87481),u=l(34301),j=l(75074),p=l(9572),f=l(20203),v=l(73926),N=l(85057),g=l(59409),b=l(90648),w=l(8643);function y(e){let{onSelectTable:s,onNewTable:l,selectedTableId:r,dataVersion:n,filters:i,setFilters:y,onClearFilters:C}=e,[S,z]=(0,t.useState)([]),[k,T]=(0,t.useState)(!0),{toast:A}=(0,h.dj)();(0,t.useEffect)(()=>{(async()=>{T(!0);try{z(await (0,c.Ax)())}catch(e){A({variant:"destructive",title:"Error",description:"Could not fetch tables from database."})}finally{T(!1)}})()},[n,A]);let R=(0,t.useMemo)(()=>{let e=S.filter(e=>{let s=e.name.toLowerCase().includes(i.searchTerm.toLowerCase()),l=!0,a=i.tagFilter.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean);return a.length>0&&(l=!!e.tags&&a.every(s=>e.tags.some(e=>e.toLowerCase().includes(s)))),s&&l}).sort((e,s)=>e.name.localeCompare(s.name));return"desc"===i.sortOrder&&e.reverse(),e},[S,i]);return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)(o.$,{onClick:l,className:"w-full",children:[(0,a.jsx)(u.A,{})," New Random Table"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(d.p,{placeholder:"Search tables...",value:i.searchTerm,onChange:e=>y.setSearchTerm(e.target.value),className:"pl-9"})]}),(0,a.jsxs)(w.Nt,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(w.R6,{asChild:!0,children:(0,a.jsxs)(o.$,{variant:"ghost",className:"-ml-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Filters"]})}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:C,className:"text-xs h-auto p-1",children:"Clear"})]}),(0,a.jsx)(w.Ke,{className:"space-y-2 pt-2",children:(0,a.jsx)(b.F,{value:i.tagFilter?i.tagFilter.split(",").map(e=>e.trim()).filter(Boolean):[],onChange:e=>y.setTagFilter(e.join(",")),placeholder:"Tags...",tagSource:"randomTable"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.J,{children:"Sort by"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(g.l6,{value:i.sortBy,onValueChange:e=>y.setSortBy(e),children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Sort by"})}),(0,a.jsx)(g.gC,{children:(0,a.jsx)(g.eb,{value:"name",children:"Name"})})]}),(0,a.jsxs)(o.$,{variant:"ghost",size:"icon",onClick:()=>y.setSortOrder(e=>"asc"===e?"desc":"asc"),children:["asc"===i.sortOrder?(0,a.jsx)(f.A,{className:"h-4 w-4"}):(0,a.jsx)(v.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle sort order"})]})]})]})]}),(0,a.jsx)(x.w,{}),(0,a.jsx)(m.F,{className:"flex-1",children:(0,a.jsx)("div",{className:"p-4",children:k?(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"Loading tables..."}):R.length>0?(0,a.jsx)("ul",{className:"space-y-1",children:R.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>s(e.id),className:"w-full text-left p-2 rounded-md transition-colors ".concat(r===e.id?"bg-primary text-primary-foreground":"hover:bg-accent/50"),children:e.name})},e.id))}):(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"No tables found."})})})]})}var C=l(62177),S=l(90221),z=l(55594),k=l(66695),T=l(88539),A=l(90010),R=l(17759),I=l(16923),E=l(12543),$=l(30990),B=l(18763),F=l(77223),M=l(25318),D=l(53054),V=l(18046),U=l(68856),L=l(54165),J=l(60408),O=l.n(J),Z=l(59434);let q=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,Z.cn)("w-full caption-bottom text-sm",l),...t})})});q.displayName="Table";let W=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("thead",{ref:s,className:(0,Z.cn)("[&_tr]:border-b",l),...t})});W.displayName="TableHeader";let _=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,Z.cn)("[&_tr:last-child]:border-0",l),...t})});_.displayName="TableBody",t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,Z.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",l),...t})}).displayName="TableFooter";let P=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("tr",{ref:s,className:(0,Z.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",l),...t})});P.displayName="TableRow";let H=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("th",{ref:s,className:(0,Z.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",l),...t})});H.displayName="TableHead";let G=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("td",{ref:s,className:(0,Z.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",l),...t})});G.displayName="TableCell",t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("caption",{ref:s,className:(0,Z.cn)("mt-4 text-sm text-muted-foreground",l),...t})}).displayName="TableCaption";let K=z.z.object({id:z.z.string(),range:z.z.string().min(1,"Range is required (e.g., '1' or '1-3')"),value:z.z.string().min(1,"Value is required")}),Q=z.z.object({id:z.z.string(),name:z.z.string().min(1,"Column name is required"),options:z.z.array(K)}),X=z.z.object({name:z.z.string().min(1,"Table name is required"),description:z.z.string().optional(),dieSize:z.z.coerce.number().min(2,"Die size must be at least 2"),columns:z.z.array(Q).min(1,"At least one column is required"),tags:z.z.array(z.z.string()).optional()}),Y={name:"",description:"",dieSize:20,columns:[],tags:[]},ee=e=>Math.floor(Math.random()*e)+1,es=(e,s)=>{if(e.includes("-")){let[l,a]=e.split("-").map(Number);if(!isNaN(l)&&!isNaN(a))return s>=l&&s<=a}let l=Number(e);return!isNaN(l)&&s===l};function el(e){let{onImport:s}=e,[l,r]=(0,t.useState)(!1),[n,i]=(0,t.useState)(null),[c,m]=(0,t.useState)(""),{toast:x}=(0,h.dj)();return(0,a.jsxs)(L.lG,{open:l,onOpenChange:r,children:[(0,a.jsx)(L.zM,{asChild:!0,children:(0,a.jsxs)(o.$,{type:"button",size:"sm",variant:"outline",children:[(0,a.jsx)(I.A,{className:"h-4 w-4 mr-2"})," Import"]})}),(0,a.jsxs)(L.Cf,{children:[(0,a.jsxs)(L.c7,{children:[(0,a.jsx)(L.L3,{children:"Import Table Data"}),(0,a.jsx)(L.rr,{children:"Import from a CSV file or paste a Markdown table."})]}),null===n&&(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)(o.$,{className:"w-full",onClick:()=>i("csv"),children:"Import CSV"}),(0,a.jsx)(o.$,{className:"w-full",onClick:()=>i("markdown"),children:"Import Markdown"})]}),"csv"===n&&(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)(d.p,{type:"file",accept:".csv",onChange:e=>{var l;let a=null==(l=e.target.files)?void 0:l[0];a&&O().parse(a,{header:!0,skipEmptyLines:!0,complete:e=>{try{let l=e.meta.fields;if(!l||l.length<2)throw Error("CSV must have at least two columns (range and one value column).");let a=l[0],t=l.slice(1),n=t.map(e=>({id:crypto.randomUUID(),name:e,options:[]}));e.data.forEach(e=>{let s=e[a];s&&t.forEach((l,a)=>{e[l]&&n[a].options.push({id:crypto.randomUUID(),range:s.toString(),value:e[l].toString()})})}),s({columns:n}),r(!1),i(null),x({title:"CSV Parsed Successfully"})}catch(e){x({variant:"destructive",title:"CSV Import Error",description:e.message})}},error:e=>{x({variant:"destructive",title:"CSV Parsing Error",description:e.message})}})}}),(0,a.jsx)(o.$,{variant:"link",onClick:()=>i(null),children:"Back"})]}),"markdown"===n&&(0,a.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,a.jsx)(T.T,{rows:10,value:c,onChange:e=>m(e.target.value),placeholder:"| Range | Column 1 | Column 2 | |---|---|---| | 1-5 | Value A | Value B |"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(o.$,{variant:"link",onClick:()=>i(null),children:"Back"}),(0,a.jsx)(o.$,{onClick:()=>{try{let e=c.trim().split("\n").map(e=>e.trim()).filter(e=>e.startsWith("|")&&e.endsWith("|"));if(e.length<3)throw Error("Markdown table must have a header, separator, and at least one data row.");let l=e[0].slice(1,-1).split("|").map(e=>e.trim()).slice(1).map(e=>({id:crypto.randomUUID(),name:e,options:[]}));for(let s=2;s<e.length;s++){let a=e[s].slice(1,-1).split("|").map(e=>e.trim()),t=a[0];if(t)for(let e=1;e<a.length;e++)a[e]&&e-1<l.length&&l[e-1].options.push({id:crypto.randomUUID(),range:t,value:a[e]})}s({columns:l}),r(!1),i(null),x({title:"Markdown Parsed Successfully"})}catch(e){x({variant:"destructive",title:"Markdown Import Error",description:e.message})}},children:"Parse Markdown"})]})]})]})]})}function ea(e){let{tableId:s,isCreatingNew:l,onSaveSuccess:r,onDeleteSuccess:n,onEditCancel:m,onBack:u}=e,{toast:j}=(0,h.dj)(),[p,f]=(0,t.useState)(l),[v,N]=(0,t.useState)(!l&&!!s),[g,w]=(0,t.useState)(null),[y,z]=(0,t.useState)(null),I=(0,i.a)(),L=(0,C.mN)({resolver:(0,S.u)(X),defaultValues:Y}),{control:J,watch:O,getValues:Z,handleSubmit:K,reset:Q}=L,{fields:ea,append:er,remove:en}=(0,C.jz)({control:J,name:"columns"});(0,t.useEffect)(()=>{(async()=>{if(l){L.reset(Y),w(null),f(!0),N(!1);return}if(!s){f(!1),N(!1),w(null);return}N(!0),f(!1);try{let e=await (0,c.iA)(s);e?(L.reset(e),w(e)):w(null)}catch(e){j({variant:"destructive",title:"Error",description:"Could not load table data."})}finally{N(!1)}})()},[s,l,L,j]);let ei=()=>{l?m():g&&(L.reset(g),f(!1))},ec=async e=>{try{let a,t={...e,tags:e.tags||[]};if(e.tags&&e.tags.length>0&&await (0,c.JE)(e.tags,"randomTable"),l)a=await (0,c.fB)(t),j({title:"Table Created!",description:"".concat(e.name," has been added.")});else{if(!s)return;a=s,await (0,c.hi)({...t,id:s}),j({title:"Save Successful",description:"".concat(e.name," has been updated.")})}r(a),f(!1)}catch(e){j({variant:"destructive",title:"Save Failed",description:"Could not save changes."})}},ed=async()=>{if(s)try{await (0,c.Fn)(s),j({title:"Table Deleted",description:"The random table has been removed."}),n()}catch(e){j({variant:"destructive",title:"Deletion Failed",description:"Could not delete the table."})}};return v?(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsxs)(k.Zp,{children:[(0,a.jsx)(k.aR,{children:(0,a.jsx)(U.E,{className:"h-8 w-48"})}),(0,a.jsx)(k.Wu,{children:(0,a.jsx)(U.E,{className:"h-40 w-full"})})]})}):s||l?!p&&g?(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsxs)(k.Zp,{children:[(0,a.jsx)(k.aR,{children:(0,a.jsxs)("div",{className:"flex flex-row items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[I&&u&&(0,a.jsx)(o.$,{variant:"ghost",size:"icon",onClick:u,className:"shrink-0 -ml-2 -mt-1",children:(0,a.jsx)(E.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k.ZB,{className:"text-3xl font-bold",children:g.name}),(0,a.jsxs)(k.BT,{children:["Roll a d",g.dieSize]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(o.$,{onClick:()=>{let e=Z(),s=ee(e.dieSize),l=[];e.columns.forEach(e=>{let a=e.options.find(e=>es(e.range,s));l.push(a?"".concat(a.value):"(No result for roll ".concat(s,")"))}),z(["d".concat(e.dieSize," Roll: ").concat(s),...l])},children:[(0,a.jsx)($.A,{className:"h-4 w-4 mr-2"})," Roll"]}),(0,a.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{z(null),f(!0)},children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline ml-2",children:"Edit"})]})]})]})}),(0,a.jsxs)(k.Wu,{children:[y&&(0,a.jsxs)("div",{className:"mb-4 p-4 border rounded-md bg-muted/50",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:y[0]}),(0,a.jsx)("p",{className:"text-foreground",children:y.slice(1).join(" ")})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(q,{children:[(0,a.jsx)(W,{children:(0,a.jsxs)(P,{children:[(0,a.jsxs)(H,{className:"w-[100px]",children:["d",g.dieSize]}),g.columns.map(e=>(0,a.jsx)(H,{children:e.name},e.id))]})}),(0,a.jsx)(_,{children:Array.from({length:g.dieSize},(e,s)=>s+1).map(e=>(0,a.jsxs)(P,{children:[(0,a.jsx)(G,{className:"font-medium",children:e}),g.columns.map(s=>{let l=s.options.find(s=>es(s.range,e));return(0,a.jsx)(G,{children:l?l.value:"-"},s.id)})]},e))})]})})]}),(0,a.jsx)(k.wL,{children:(0,a.jsxs)(A.Lt,{children:[(0,a.jsx)(A.tv,{asChild:!0,children:(0,a.jsx)(o.$,{type:"button",variant:"destructive",size:"sm",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(A.EO,{children:[(0,a.jsxs)(A.wd,{children:[(0,a.jsx)(A.r7,{children:"Are you sure?"}),(0,a.jsxs)(A.$v,{children:['This will permanently delete "',g.name,'".']})]}),(0,a.jsxs)(A.ck,{children:[(0,a.jsx)(A.Zr,{children:"Cancel"}),(0,a.jsx)(A.Rx,{onClick:ed,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})})]})}):(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsx)(k.Zp,{children:(0,a.jsx)(R.lV,{...L,children:(0,a.jsxs)("form",{onSubmit:K(ec),className:"space-y-6",children:[(0,a.jsx)(k.aR,{children:(0,a.jsxs)("div",{className:"flex flex-row justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[I&&u&&(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:m,className:"shrink-0 -ml-2",children:(0,a.jsx)(E.A,{className:"h-5 w-5"})}),(0,a.jsx)(k.ZB,{children:l?"Create New Table":"Editing: ".concat(Z("name")||"...")})]}),!I&&(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:ei,className:"text-muted-foreground hover:text-foreground",children:(0,a.jsx)(M.A,{className:"h-5 w-5"})})]})}),(0,a.jsxs)(k.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(R.zB,{name:"name",control:J,render:e=>{let{field:s}=e;return(0,a.jsxs)(R.eI,{className:"md:col-span-2",children:[(0,a.jsx)(R.lR,{children:"Table Name"}),(0,a.jsx)(R.MJ,{children:(0,a.jsx)(d.p,{...s})}),(0,a.jsx)(R.C5,{})]})}}),(0,a.jsx)(R.zB,{name:"dieSize",control:J,render:e=>{let{field:s}=e;return(0,a.jsxs)(R.eI,{children:[(0,a.jsx)(R.lR,{children:"Die Size (d#)"}),(0,a.jsx)(R.MJ,{children:(0,a.jsx)(d.p,{type:"number",...s})}),(0,a.jsx)(R.C5,{})]})}})]}),(0,a.jsx)(R.zB,{name:"description",control:J,render:e=>{let{field:s}=e;return(0,a.jsxs)(R.eI,{children:[(0,a.jsx)(R.lR,{children:"Description"}),(0,a.jsx)(R.MJ,{children:(0,a.jsx)(T.T,{...s,rows:2})})]})}}),(0,a.jsx)(R.zB,{name:"tags",control:J,render:e=>{let{field:s}=e;return(0,a.jsxs)(R.eI,{children:[(0,a.jsxs)(R.lR,{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 text-accent"}),"Tags"]}),(0,a.jsx)(R.MJ,{children:(0,a.jsx)(b.F,{value:s.value||[],onChange:s.onChange,placeholder:"Add tags...",tagSource:"randomTable"})}),(0,a.jsx)(R.C5,{})]})}}),(0,a.jsx)(x.w,{}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Columns"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(el,{onImport:e=>{Q({...Z(),...e})}}),(0,a.jsxs)(o.$,{type:"button",size:"sm",variant:"outline",onClick:()=>er({id:crypto.randomUUID(),name:"Column ".concat(ea.length+1),options:[]}),children:[(0,a.jsx)(V.A,{className:"h-4 w-4 mr-2"})," Add Column"]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:ea.map((e,s)=>(0,a.jsxs)("div",{className:"border p-4 rounded-md bg-muted/50 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(R.zB,{name:"columns.".concat(s,".name"),control:J,render:e=>{let{field:s}=e;return(0,a.jsxs)(R.eI,{className:"flex-1 mr-4",children:[(0,a.jsx)(R.lR,{children:"Column Name"}),(0,a.jsx)(R.MJ,{children:(0,a.jsx)(d.p,{...s})}),(0,a.jsx)(R.C5,{})]})}}),(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>en(s),className:"text-muted-foreground hover:text-destructive shrink-0",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(et,{control:J,colIndex:s})]},e.id))})]})]}),(0,a.jsxs)(k.wL,{className:"flex items-center gap-2",children:[!l&&(0,a.jsxs)(A.Lt,{children:[(0,a.jsx)(A.tv,{asChild:!0,children:(0,a.jsx)(o.$,{type:"button",variant:"destructive",size:"sm",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(A.EO,{children:[(0,a.jsxs)(A.wd,{children:[(0,a.jsx)(A.r7,{children:"Are you sure?"}),(0,a.jsxs)(A.$v,{children:['This will permanently delete "',Z("name"),'".']})]}),(0,a.jsxs)(A.ck,{children:[(0,a.jsx)(A.Zr,{children:"Cancel"}),(0,a.jsx)(A.Rx,{onClick:ed,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]}),(0,a.jsx)("div",{className:"flex-grow"}),!I&&(0,a.jsx)(o.$,{type:"button",variant:"outline",onClick:ei,children:"Cancel"}),(0,a.jsx)(o.$,{type:"submit",children:l?"Create Table":"Save Changes"})]})]})})})}):(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsx)(k.Zp,{className:"h-full flex items-center justify-center min-h-[300px]",children:(0,a.jsxs)(k.Wu,{className:"text-center pt-6",children:[(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"Select a table to view"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"or create a new one."})]})})})}function et(e){let{control:s,colIndex:l}=e,{fields:t,append:r,remove:n}=(0,C.jz)({control:s,name:"columns.".concat(l,".options")});return(0,a.jsxs)("div",{className:"space-y-2 pl-4 border-l-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Options"}),t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)(R.zB,{name:"columns.".concat(l,".options.").concat(t,".range"),control:s,render:e=>{let{field:s}=e;return(0,a.jsxs)(R.eI,{children:[(0,a.jsx)(R.lR,{children:"Range"}),(0,a.jsx)(R.MJ,{children:(0,a.jsx)(d.p,{...s,placeholder:"e.g. 1-3"})}),(0,a.jsx)(R.C5,{})]})}}),(0,a.jsx)(R.zB,{name:"columns.".concat(l,".options.").concat(t,".value"),control:s,render:e=>{let{field:s}=e;return(0,a.jsxs)(R.eI,{className:"flex-1",children:[(0,a.jsx)(R.lR,{children:"Value"}),(0,a.jsx)(R.MJ,{children:(0,a.jsx)(d.p,{...s,placeholder:"e.g. Joe"})}),(0,a.jsx)(R.C5,{})]})}}),(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>n(t),className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})]},e.id)),(0,a.jsxs)(o.$,{type:"button",size:"sm",variant:"outline",onClick:()=>r({id:crypto.randomUUID(),range:"",value:""}),children:[(0,a.jsx)(V.A,{className:"h-4 w-4 mr-2"})," Add Option"]})]})}function er(e){let{selectedId:s}=e,[l,c]=(0,t.useState)(s||null),[d,o]=(0,t.useState)(!1),[m,x]=(0,t.useState)(0),[h,u]=(0,t.useState)(""),[j,p]=(0,t.useState)(""),[f,v]=(0,t.useState)("name"),[N,g]=(0,t.useState)("asc"),[b,w]=(0,t.useState)(!1),C=(0,i.a)(),[S,z]=(0,t.useState)("list");(0,t.useEffect)(()=>{w(!0),s&&(c(s),C&&z("editor"))},[s,C]);let k={searchTerm:h,tagFilter:j,sortBy:f,sortOrder:N},T={setSearchTerm:u,setTagFilter:p,setSortBy:v,setSortOrder:g},A=()=>{u(""),p(""),v("name"),g("asc")},R=()=>x(e=>e+1),I=e=>{c(e),o(!1),C&&z("editor")},E=()=>{c(null),o(!0),C&&z("editor")},$=e=>{R(),c(e),o(!1),C&&z("editor")},B=()=>{R(),c(null),o(!1),C&&z("list")},F=()=>{d&&(o(!1),c(null),C&&z("list"))};return b?C?(0,a.jsx)(r.A,{showSidebarTrigger:!1,children:(0,a.jsx)("div",{className:"h-full w-full",children:"list"===S?(0,a.jsx)(y,{onSelectTable:I,onNewTable:E,selectedTableId:l,dataVersion:m,filters:k,setFilters:T,onClearFilters:A}):(0,a.jsx)("div",{className:"h-full w-full overflow-y-auto",children:(0,a.jsx)("div",{className:"p-4 sm:p-6",children:(0,a.jsx)(ea,{tableId:l,isCreatingNew:d,onSaveSuccess:$,onDeleteSuccess:B,onEditCancel:F,onBack:()=>{z("list"),c(null),o(!1)}},null!=l?l:d?"new":"placeholder")})})})}):(0,a.jsx)(n.SidebarProvider,{children:(0,a.jsx)(r.A,{children:(0,a.jsxs)("div",{className:"flex w-full h-full overflow-hidden",children:[(0,a.jsx)(n.Bx,{style:{"--sidebar-width":"380px"},children:(0,a.jsx)(y,{onSelectTable:I,onNewTable:E,selectedTableId:l,dataVersion:m,filters:k,setFilters:T,onClearFilters:A})}),(0,a.jsx)(n.sF,{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"bg-background/50 p-4 sm:p-6 md:p-8 w-full",children:(0,a.jsx)(ea,{tableId:l,isCreatingNew:d,onSaveSuccess:$,onDeleteSuccess:B,onEditCancel:F},null!=l?l:d?"new":"placeholder")})})]})})}):null}}}]);