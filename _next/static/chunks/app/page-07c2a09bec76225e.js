(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3062:(e,s,t)=>{"use strict";t.d(s,{FC:()=>r,GW:()=>l,OJ:()=>a,Yh:()=>i,ag:()=>n});let l=["attack","support"],r=["melee","missile","innate","unarmed","spell","item","versatile"],a=["guard","resist","10","special"],i=["potion","powder","oil","bomb"],n=["lesser","greater"]},3930:(e,s,t)=>{"use strict";t.d(s,{W$:()=>i,kO:()=>n,pT:()=>d,rp:()=>a,wz:()=>c,xy:()=>r});var l=t(2489);let r=async()=>{let e=(await (0,l.Lf)()).transaction(l.qi,"readonly").objectStore(l.qi).getAll();return new Promise((s,t)=>{e.onsuccess=()=>s(e.result),e.onerror=()=>t(e.error)})},a=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readonly").objectStore(l.qi).get(e);return new Promise((e,t)=>{s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})},i=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readwrite").objectStore(l.qi),t=(0,l.$C)(),r={...e,id:t},a=s.add(r);return new Promise((e,s)=>{a.onsuccess=()=>e(t),a.onerror=()=>s(a.error)})},n=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readwrite").objectStore(l.qi).put(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})},c=async e=>{let s=(await (0,l.Lf)()).transaction(l.qi,"readwrite").objectStore(l.qi).delete(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})},d=async e=>{if(!e||0===e.length)return[];let s=(await (0,l.Lf)()).transaction(l.qi,"readonly").objectStore(l.qi),t=[],r=e.map(e=>new Promise((l,r)=>{let a=s.get(e);a.onsuccess=()=>{a.result&&t.push(a.result),l()},a.onerror=()=>r(a.error)}));return await Promise.all(r),t}},4165:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>x,Es:()=>m,L3:()=>p,c7:()=>h,lG:()=>c,rr:()=>j,zM:()=>d});var l=t(5155),r=t(2115),a=t(5821),i=t(5318),n=t(9434);let c=a.bL,d=a.l9,o=a.ZL;a.bm;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=a.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:t,children:r,...c}=e;return(0,l.jsxs)(o,{children:[(0,l.jsx)(u,{}),(0,l.jsxs)(a.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[r,(0,l.jsxs)(a.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(i.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=a.UC.displayName;let h=e=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};h.displayName="DialogHeader";let m=e=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};m.displayName="DialogFooter";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});p.displayName=a.hE.displayName;let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});j.displayName=a.VY.displayName},4768:(e,s,t)=>{Promise.resolve().then(t.bind(t,9885))},5599:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(157).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},6535:(e,s,t)=>{"use strict";t.d(s,{C8:()=>i,OG:()=>r,PW:()=>d,RW:()=>n,ZK:()=>c,s2:()=>a});var l=t(2489);let r=async()=>{let e=(await (0,l.Lf)()).transaction(l.RN,"readonly").objectStore(l.RN).getAll();return new Promise((s,t)=>{e.onsuccess=()=>s(e.result),e.onerror=()=>t(e.error)})},a=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readonly").objectStore(l.RN).get(e);return new Promise((e,t)=>{s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})},i=async e=>{if(!e||0===e.length)return[];let s=(await (0,l.Lf)()).transaction(l.RN,"readonly").objectStore(l.RN),t=[],r=e.map(e=>new Promise((l,r)=>{let a=s.get(e);a.onsuccess=()=>{a.result&&t.push(a.result),l()},a.onerror=()=>r(a.error)}));return await Promise.all(r),t},n=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readwrite").objectStore(l.RN),t=(0,l.$C)(),r={...e,id:t},a=s.add(r);return new Promise((e,s)=>{a.onsuccess=()=>e(t),a.onerror=()=>s(a.error)})},c=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readwrite").objectStore(l.RN).put(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})},d=async e=>{let s=(await (0,l.Lf)()).transaction(l.RN,"readwrite").objectStore(l.RN).delete(e);return new Promise((e,t)=>{s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})}},7262:(e,s,t)=>{"use strict";t.d(s,{S:()=>c});var l=t(5155),r=t(2115),a=t(6981),i=t(518),n=t(9434);let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)(a.bL,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,l.jsx)(a.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,l.jsx)(i.A,{className:"h-4 w-4"})})})});c.displayName=a.bL.displayName},8098:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(157).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},8643:(e,s,t)=>{"use strict";t.d(s,{Ke:()=>i,Nt:()=>r,R6:()=>a});var l=t(7242);let r=l.bL,a=l.R6,i=l.Ke},8911:(e,s,t)=>{"use strict";t.d(s,{P:()=>i});var l=t(5155),r=t(9434),a=t(5057);let i=e=>{let{deed:s,dmgReplacement:t}=e,i=e=>{if(e)return t?e.replace(/\\dd/g,t):e},n="".concat(s.deedType," ").concat(s.actionType," VS ").concat(s.versus).toUpperCase(),c="".concat(n," | ").concat(s.target);return(0,l.jsxs)("div",{className:(0,r.cn)("rounded-lg border bg-card-foreground/5 border-l-4 p-4 mb-4",{light:"border-sky-400",heavy:"border-amber-400",mighty:"border-fuchsia-400"}[s.tier]),children:[(0,l.jsxs)("div",{className:"flex justify-between items-baseline mb-3",children:[(0,l.jsx)("h4",{className:"text-xl font-bold",children:s.name}),(0,l.jsx)("div",{className:(0,r.cn)("text-xs font-bold uppercase px-2 py-0.5 rounded-full",{light:"text-sky-300 bg-sky-900/50",heavy:"text-amber-300 bg-amber-900/50",mighty:"text-fuchsia-300 bg-fuchsia-900/50"}[s.tier]),children:s.tier})]}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground mb-3 border-b border-t border-border py-2",children:(0,l.jsx)("p",{className:"text-foreground/90",children:c})}),(0,l.jsxs)("div",{className:"space-y-3 text-sm",children:[s.effects.start&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground/90 font-semibold uppercase",children:"Start"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.start)})]}),s.effects.base&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground/90 font-semibold uppercase",children:"Base"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.base)})]}),s.effects.hit&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground font-semibold uppercase",children:"Hit"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.hit)})]}),s.effects.shadow&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground font-semibold uppercase",children:"Shadow"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.shadow)})]}),s.effects.end&&(0,l.jsxs)("div",{children:[(0,l.jsx)(a.J,{className:"text-primary-foreground/90 font-semibold uppercase",children:"End"}),(0,l.jsx)("p",{className:"text-foreground/90 mt-0.5 whitespace-pre-wrap pl-2 font-light",children:i(s.effects.end)})]})]})]})}},9885:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ep});var l=t(5155),r=t(2115),a=t(6535);let i=["Archer","Enchanter","Enforcer","Guardian","Harrier","Hellion","Stalker","Sorcerer"],n={Archer:[{level:1,HP:20,Initiative:14,Accuracy:16,Guard:12,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:30,Initiative:14,Accuracy:16,Guard:12,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:40,Initiative:15,Accuracy:17,Guard:13,Resist:13,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:50,Initiative:15,Accuracy:17,Guard:13,Resist:13,rollBonus:"+5",Speed:5,DMG:"d8"},{level:5,HP:60,Initiative:16,Accuracy:18,Guard:14,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:6,HP:70,Initiative:16,Accuracy:18,Guard:14,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:7,HP:75,Initiative:17,Accuracy:19,Guard:15,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:8,HP:80,Initiative:17,Accuracy:19,Guard:15,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:9,HP:85,Initiative:18,Accuracy:20,Guard:16,Resist:16,rollBonus:"+8",Speed:8,DMG:"d10"},{level:10,HP:90,Initiative:18,Accuracy:20,Guard:16,Resist:16,rollBonus:"+8",Speed:8,DMG:"d12"}],Enchanter:[{level:1,HP:20,Initiative:12,Accuracy:14,Guard:16,Resist:16,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:30,Initiative:12,Accuracy:14,Guard:16,Resist:16,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:40,Initiative:13,Accuracy:15,Guard:17,Resist:17,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:50,Initiative:13,Accuracy:15,Guard:17,Resist:17,rollBonus:"+5",Speed:5,DMG:"d6"},{level:5,HP:60,Initiative:14,Accuracy:16,Guard:18,Resist:18,rollBonus:"+6",Speed:6,DMG:"d8"},{level:6,HP:70,Initiative:14,Accuracy:16,Guard:18,Resist:18,rollBonus:"+6",Speed:6,DMG:"d8"},{level:7,HP:80,Initiative:15,Accuracy:17,Guard:19,Resist:19,rollBonus:"+7",Speed:7,DMG:"d8"},{level:8,HP:90,Initiative:15,Accuracy:17,Guard:19,Resist:19,rollBonus:"+7",Speed:7,DMG:"d10"},{level:9,HP:95,Initiative:16,Accuracy:18,Guard:20,Resist:20,rollBonus:"+8",Speed:8,DMG:"d10"},{level:10,HP:100,Initiative:16,Accuracy:18,Guard:20,Resist:20,rollBonus:"+8",Speed:8,DMG:"d10"}],Enforcer:[{level:1,HP:40,Initiative:12,Accuracy:14,Guard:12,Resist:14,rollBonus:"+6",Speed:5,DMG:"d8"},{level:2,HP:60,Initiative:12,Accuracy:14,Guard:12,Resist:14,rollBonus:"+6",Speed:5,DMG:"d8"},{level:3,HP:80,Initiative:13,Accuracy:15,Guard:13,Resist:15,rollBonus:"+7",Speed:5,DMG:"d8"},{level:4,HP:90,Initiative:13,Accuracy:15,Guard:13,Resist:15,rollBonus:"+7",Speed:5,DMG:"d8"},{level:5,HP:100,Initiative:14,Accuracy:16,Guard:14,Resist:16,rollBonus:"+8",Speed:5,DMG:"d10"},{level:6,HP:110,Initiative:14,Accuracy:16,Guard:14,Resist:16,rollBonus:"+8",Speed:5,DMG:"d10"},{level:7,HP:120,Initiative:15,Accuracy:17,Guard:15,Resist:17,rollBonus:"+9",Speed:5,DMG:"d10"},{level:8,HP:130,Initiative:15,Accuracy:17,Guard:15,Resist:17,rollBonus:"+9",Speed:5,DMG:"d12"},{level:9,HP:140,Initiative:16,Accuracy:18,Guard:16,Resist:18,rollBonus:"+10",Speed:5,DMG:"d12"},{level:10,HP:150,Initiative:16,Accuracy:18,Guard:16,Resist:18,rollBonus:"+10",Speed:5,DMG:"d12"}],Guardian:[{level:1,HP:25,Initiative:12,Accuracy:14,Guard:16,Resist:14,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:40,Initiative:12,Accuracy:14,Guard:16,Resist:14,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:50,Initiative:13,Accuracy:15,Guard:17,Resist:15,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:60,Initiative:13,Accuracy:15,Guard:17,Resist:15,rollBonus:"+5",Speed:5,DMG:"d6"},{level:5,HP:70,Initiative:14,Accuracy:16,Guard:18,Resist:16,rollBonus:"+6",Speed:5,DMG:"d8"},{level:6,HP:80,Initiative:14,Accuracy:16,Guard:18,Resist:16,rollBonus:"+6",Speed:5,DMG:"d8"},{level:7,HP:85,Initiative:15,Accuracy:17,Guard:19,Resist:17,rollBonus:"+7",Speed:5,DMG:"d10"},{level:8,HP:90,Initiative:15,Accuracy:17,Guard:19,Resist:17,rollBonus:"+7",Speed:5,DMG:"d10"},{level:9,HP:95,Initiative:16,Accuracy:18,Guard:20,Resist:18,rollBonus:"+8",Speed:5,DMG:"d10"},{level:10,HP:100,Initiative:16,Accuracy:18,Guard:20,Resist:18,rollBonus:"+8",Speed:5,DMG:"d12"}],Harrier:[{level:1,HP:20,Initiative:16,Accuracy:14,Guard:14,Resist:12,rollBonus:"+2",Speed:6,DMG:"d6"},{level:2,HP:30,Initiative:16,Accuracy:14,Guard:14,Resist:12,rollBonus:"+2",Speed:6,DMG:"d6"},{level:3,HP:40,Initiative:17,Accuracy:15,Guard:15,Resist:13,rollBonus:"+3",Speed:7,DMG:"d6"},{level:4,HP:50,Initiative:17,Accuracy:15,Guard:15,Resist:13,rollBonus:"+3",Speed:7,DMG:"d6"},{level:5,HP:60,Initiative:18,Accuracy:16,Guard:16,Resist:14,rollBonus:"+4",Speed:8,DMG:"d8"},{level:6,HP:70,Initiative:18,Accuracy:16,Guard:16,Resist:14,rollBonus:"+4",Speed:8,DMG:"d8"},{level:7,HP:75,Initiative:19,Accuracy:17,Guard:17,Resist:15,rollBonus:"+5",Speed:9,DMG:"d8"},{level:8,HP:80,Initiative:19,Accuracy:17,Guard:17,Resist:15,rollBonus:"+5",Speed:9,DMG:"d8"},{level:9,HP:85,Initiative:20,Accuracy:18,Guard:18,Resist:16,rollBonus:"+6",Speed:10,DMG:"d10"},{level:10,HP:90,Initiative:20,Accuracy:18,Guard:18,Resist:16,rollBonus:"+6",Speed:10,DMG:"d10"}],Hellion:[{level:1,HP:30,Initiative:14,Accuracy:16,Guard:12,Resist:14,rollBonus:"+2",Speed:6,DMG:"d8"},{level:2,HP:50,Initiative:14,Accuracy:16,Guard:12,Resist:14,rollBonus:"+2",Speed:6,DMG:"d8"},{level:3,HP:60,Initiative:15,Accuracy:17,Guard:13,Resist:15,rollBonus:"+3",Speed:6,DMG:"d8"},{level:4,HP:70,Initiative:15,Accuracy:17,Guard:13,Resist:15,rollBonus:"+3",Speed:6,DMG:"d8"},{level:5,HP:80,Initiative:16,Accuracy:18,Guard:14,Resist:16,rollBonus:"+4",Speed:7,DMG:"d10"},{level:6,HP:90,Initiative:16,Accuracy:18,Guard:14,Resist:16,rollBonus:"+4",Speed:7,DMG:"d10"},{level:7,HP:100,Initiative:17,Accuracy:19,Guard:15,Resist:17,rollBonus:"+5",Speed:7,DMG:"d10"},{level:8,HP:110,Initiative:17,Accuracy:19,Guard:15,Resist:17,rollBonus:"+5",Speed:7,DMG:"d12"},{level:9,HP:115,Initiative:18,Accuracy:20,Guard:16,Resist:18,rollBonus:"+6",Speed:8,DMG:"d12"},{level:10,HP:120,Initiative:18,Accuracy:20,Guard:16,Resist:18,rollBonus:"+6",Speed:8,DMG:"d12"}],Stalker:[{level:1,HP:20,Initiative:14,Accuracy:16,Guard:14,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:2,HP:30,Initiative:14,Accuracy:16,Guard:14,Resist:12,rollBonus:"+4",Speed:5,DMG:"d6"},{level:3,HP:40,Initiative:15,Accuracy:17,Guard:15,Resist:13,rollBonus:"+5",Speed:5,DMG:"d6"},{level:4,HP:50,Initiative:15,Accuracy:17,Guard:15,Resist:13,rollBonus:"+5",Speed:5,DMG:"d6"},{level:5,HP:60,Initiative:16,Accuracy:18,Guard:16,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:6,HP:70,Initiative:16,Accuracy:18,Guard:16,Resist:14,rollBonus:"+6",Speed:6,DMG:"d8"},{level:7,HP:80,Initiative:17,Accuracy:19,Guard:17,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:8,HP:90,Initiative:17,Accuracy:19,Guard:17,Resist:15,rollBonus:"+7",Speed:7,DMG:"d10"},{level:9,HP:95,Initiative:18,Accuracy:20,Guard:18,Resist:16,rollBonus:"+7",Speed:8,DMG:"d12"},{level:10,HP:100,Initiative:18,Accuracy:20,Guard:18,Resist:16,rollBonus:"+8",Speed:8,DMG:"d12"}],Sorcerer:[{level:1,HP:20,Initiative:12,Accuracy:16,Guard:12,Resist:16,rollBonus:"+4",Speed:5,DMG:"d8"},{level:2,HP:30,Initiative:12,Accuracy:16,Guard:12,Resist:16,rollBonus:"+4",Speed:5,DMG:"d8"},{level:3,HP:40,Initiative:13,Accuracy:17,Guard:13,Resist:17,rollBonus:"+5",Speed:5,DMG:"d8"},{level:4,HP:50,Initiative:13,Accuracy:17,Guard:13,Resist:17,rollBonus:"+5",Speed:5,DMG:"d8"},{level:5,HP:55,Initiative:14,Accuracy:18,Guard:14,Resist:18,rollBonus:"+6",Speed:5,DMG:"d10"},{level:6,HP:60,Initiative:14,Accuracy:18,Guard:14,Resist:18,rollBonus:"+6",Speed:5,DMG:"d10"},{level:7,HP:65,Initiative:15,Accuracy:19,Guard:15,Resist:19,rollBonus:"+7",Speed:6,DMG:"d10"},{level:8,HP:70,Initiative:15,Accuracy:19,Guard:15,Resist:19,rollBonus:"+7",Speed:6,DMG:"d12"},{level:9,HP:75,Initiative:16,Accuracy:20,Guard:16,Resist:20,rollBonus:"+8",Speed:7,DMG:"d12"},{level:10,HP:80,Initiative:16,Accuracy:20,Guard:16,Resist:20,rollBonus:"+8",Speed:7,DMG:"d12"}]},c={Normal:[10,20,30,40,50,60,70,80,90,100],Underling:[3,5,7,10,12,15,17,20,22,25],Paragon:[20,40,60,80,100,120,140,160,180,200],Tyrant:[40,80,120,160,200,240,280,320,360,400]},d=["d6","d8","d10","d12"];function o(e,s){var t;if(!e||s<1||s>10)return null;let l=null==(t=n[e])?void 0:t[s-1];if(!l)return null;let r=parseInt(l.rollBonus,10);return{...l,rollBonus:isNaN(r)?0:r}}var u=t(2523),x=t(285),h=t(6424),m=t(2346),p=t(7481),j=t(5057),v=t(9409),f=t(4301),g=t(5074),y=t(203),b=t(3926),N=t(648);let w=["Normal","Underling","Paragon","Tyrant"];function G(e){let{onSelectCreature:s,onNewCreature:t,selectedCreatureId:n,dataVersion:c,filters:d,setFilters:o,onClearFilters:G}=e,[R,S]=(0,r.useState)([]),[M,C]=(0,r.useState)(!0),{toast:A}=(0,p.dj)();(0,r.useEffect)(()=>{(async()=>{C(!0);try{let e=await (0,a.OG)();S(e)}catch(e){console.error("Error fetching creatures:",e),A({variant:"destructive",title:"Error",description:"Could not fetch creatures from database."})}finally{C(!1)}})()},[c,A]);let B=(0,r.useMemo)(()=>{let e=R.filter(e=>{let s=e.name.toLowerCase().includes(d.searchTerm.toLowerCase()),t="all"===d.roleFilter||e.role===d.roleFilter,l="all"===d.templateFilter||e.template===d.templateFilter,r=!0;d.minLevel&&!isNaN(parseInt(d.minLevel))&&(r=r&&e.level>=parseInt(d.minLevel,10)),d.maxLevel&&!isNaN(parseInt(d.maxLevel))&&(r=r&&e.level<=parseInt(d.maxLevel,10));let a=!0;d.minTR&&!isNaN(parseInt(d.minTR))&&(a=a&&e.TR>=parseInt(d.minTR,10)),d.maxTR&&!isNaN(parseInt(d.maxTR))&&(a=a&&e.TR<=parseInt(d.maxTR,10));let i=!0;if(d.tagFilter){let s=d.tagFilter.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean);s.length>0&&(i=e.tags&&e.tags.length>0&&s.every(s=>e.tags.some(e=>e.toLowerCase().includes(s))))}return s&&t&&l&&r&&a&&i}).sort((e,s)=>{if("TR"===d.sortBy){let t=e.TR-s.TR;if(0!==t)return t}if("level"===d.sortBy){let t=e.level-s.level;if(0!==t)return t}return e.name.localeCompare(s.name)});return"desc"===d.sortOrder&&e.reverse(),e},[R,d]);return(0,l.jsxs)("div",{className:"border-r border-border bg-card flex flex-col h-full",children:[(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)(x.$,{onClick:t,className:"w-full",children:[(0,l.jsx)(f.A,{})," New Creature"]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(g.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(u.p,{placeholder:"Search creatures...",value:d.searchTerm,onChange:e=>o.setSearchTerm(e.target.value),className:"pl-9"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(j.J,{children:"Filter"}),(0,l.jsx)(x.$,{variant:"ghost",size:"sm",onClick:G,className:"text-xs h-auto p-1",children:"Clear"})]}),(0,l.jsxs)(v.l6,{value:d.templateFilter,onValueChange:o.setTemplateFilter,children:[(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Filter by template"})}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"all",children:"All Templates"}),w.map(e=>(0,l.jsx)(v.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)(v.l6,{value:d.roleFilter,onValueChange:o.setRoleFilter,children:[(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Filter by role"})}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"all",children:"All Roles"}),i.map(e=>(0,l.jsx)(v.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(u.p,{placeholder:"Min Lvl",type:"number",value:d.minLevel,onChange:e=>o.setMinLevel(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,l.jsx)(u.p,{placeholder:"Max Lvl",type:"number",value:d.maxLevel,onChange:e=>o.setMaxLevel(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(u.p,{placeholder:"Min TR",type:"number",value:d.minTR,onChange:e=>o.setMinTR(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,l.jsx)(u.p,{placeholder:"Max TR",type:"number",value:d.maxTR,onChange:e=>o.setMaxTR(e.target.value),className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,l.jsx)(N.F,{value:d.tagFilter?d.tagFilter.split(",").map(e=>e.trim()).filter(Boolean):[],onChange:e=>o.setTagFilter(e.join(",")),placeholder:"Tags (e.g. undead, goblin)",tagSource:"creature"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"Sort by"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(v.l6,{value:d.sortBy,onValueChange:e=>o.setSortBy(e),children:[(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Sort by"})}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"name",children:"Name"}),(0,l.jsx)(v.eb,{value:"TR",children:"TR"}),(0,l.jsx)(v.eb,{value:"level",children:"Level"})]})]}),(0,l.jsxs)(x.$,{variant:"ghost",size:"icon",onClick:()=>o.setSortOrder(e=>"asc"===e?"desc":"asc"),children:["asc"===d.sortOrder?(0,l.jsx)(y.A,{className:"h-4 w-4"}):(0,l.jsx)(b.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Toggle sort order"})]})]})]})]}),(0,l.jsx)(m.w,{}),(0,l.jsx)(h.F,{className:"flex-1",children:(0,l.jsx)("div",{className:"p-4",children:M?(0,l.jsx)("p",{className:"text-muted-foreground text-center",children:"Loading creatures..."}):B.length>0?(0,l.jsx)("ul",{className:"space-y-1",children:B.map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("button",{onClick:()=>s(e.id),className:"w-full text-left p-2 rounded-md transition-colors ".concat(n===e.id?"bg-primary text-primary-foreground":"hover:bg-accent/50"),children:[e.name," ",(0,l.jsxs)("span",{className:"text-xs opacity-70",children:["(Lvl ",e.level," / TR ",e.TR,")"]})]})},e.id))}):(0,l.jsx)("p",{className:"text-muted-foreground text-center",children:"No creatures found."})})})]})}var R=t(2177),S=t(221),M=t(5594),C=t(3930),A=t(4218),B=t(3062),I=t(6695),P=t(8539),D=t(10),H=t(7759),k=t(157);let z=(0,k.A)("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);var T=t(2543),L=t(5599),F=t(8763),J=t(8098);let E=(0,k.A)("Rabbit",[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]]),V=(0,k.A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),q=(0,k.A)("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),$=(0,k.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),O=(0,k.A)("ShieldHalf",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 22V2",key:"zs6s6o"}]]),W=(0,k.A)("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]),U=(0,k.A)("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);var Z=t(7223),K=t(5318),_=t(8046),Y=t(1887),Q=t(3054),X=t(8856),ee=t(8643),es=t(4165),et=t(7262),el=t(8911),er=t(6126),ea=t(7906);let ei=["Normal","Underling","Paragon","Tyrant"],en=M.z.object({start:M.z.string().optional(),base:M.z.string().optional(),hit:M.z.string().optional(),shadow:M.z.string().optional(),end:M.z.string().optional()}),ec=M.z.object({id:M.z.string().optional(),name:M.z.string().min(1,"Deed name is required"),tier:M.z.enum(["light","heavy","mighty"]),actionType:M.z.enum(B.GW),deedType:M.z.enum(B.FC),versus:M.z.enum(B.OJ),target:M.z.string().optional(),effects:en,tags:M.z.array(M.z.string()).optional()}),ed=M.z.object({name:M.z.string().min(1,"Name is required"),level:M.z.coerce.number().int().min(1).max(10),role:M.z.enum(i),template:M.z.enum(ei),TR:M.z.coerce.number().int().min(0),attributes:M.z.object({HP:M.z.coerce.number().int().min(0),Speed:M.z.coerce.number().int().min(0),Initiative:M.z.coerce.number().int().min(0),Accuracy:M.z.coerce.number().int().min(0),Guard:M.z.coerce.number().int().min(0),Resist:M.z.coerce.number().int().min(0),rollBonus:M.z.coerce.number().int().min(0),DMG:M.z.string()}),deeds:M.z.array(ec),abilities:M.z.string().optional(),description:M.z.string().optional(),tags:M.z.array(M.z.string()).optional()}),eo={name:"",level:1,role:"Archer",template:"Normal",TR:1,attributes:{HP:20,Speed:5,Initiative:14,Accuracy:16,Guard:12,Resist:12,rollBonus:4,DMG:"d6"},deeds:[],abilities:"",description:"",tags:[]},eu=e=>{let{onAddDeeds:s,allDeeds:t,existingDeedIds:a}=e,[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(new Set),[o,m]=(0,r.useState)(""),[p,j]=(0,r.useState)("all"),[f,g]=(0,r.useState)(""),y=(0,r.useMemo)(()=>t.filter(e=>{let s=e.name.toLowerCase().includes(o.toLowerCase()),t="all"===p||e.tier===p,l=f.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean),r=0===l.length||e.tags&&l.every(s=>e.tags.some(e=>e.toLowerCase().includes(s)));return s&&t&&r}),[t,o,p,f]),b=e=>{d(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})};return(0,l.jsxs)(es.lG,{open:i,onOpenChange:n,children:[(0,l.jsx)(es.zM,{asChild:!0,children:(0,l.jsxs)(x.$,{type:"button",size:"sm",variant:"outline",children:[(0,l.jsx)(z,{className:"h-4 w-4 mr-2"})," Add From Library"]})}),(0,l.jsxs)(es.Cf,{className:"max-w-2xl h-[70vh] flex flex-col",children:[(0,l.jsxs)(es.c7,{children:[(0,l.jsx)(es.L3,{children:"Select Deeds from Library"}),(0,l.jsx)(es.rr,{children:"Select one or more deeds to add to the creature."})]}),(0,l.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,l.jsx)(u.p,{placeholder:"Search deeds...",value:o,onChange:e=>m(e.target.value),className:"flex-1 min-w-[150px]"}),(0,l.jsxs)(v.l6,{value:p,onValueChange:j,children:[(0,l.jsx)(v.bq,{className:"w-full sm:w-[120px]",children:(0,l.jsx)(v.yv,{placeholder:"Filter tier"})}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"all",children:"All Tiers"}),(0,l.jsx)(v.eb,{value:"light",children:"Light"}),(0,l.jsx)(v.eb,{value:"heavy",children:"Heavy"}),(0,l.jsx)(v.eb,{value:"mighty",children:"Mighty"})]})]}),(0,l.jsx)(u.p,{placeholder:"Filter by tags...",value:f,onChange:e=>g(e.target.value),className:"flex-1 min-w-[150px]"})]}),(0,l.jsx)(h.F,{className:"flex-1 border rounded-md p-4",children:(0,l.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(et.S,{id:"deed-".concat(e.id),onCheckedChange:()=>b(e.id),checked:c.has(e.id),disabled:a.has(e.id)}),(0,l.jsxs)("label",{htmlFor:"deed-".concat(e.id),className:"flex-1",children:[(0,l.jsxs)("p",{className:"font-semibold",children:[e.name," ",(0,l.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.tier,")"]})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.effects.hit})]})]},e.id))})}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,l.jsx)(x.$,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),(0,l.jsx)(x.$,{onClick:()=>{s(t.filter(e=>c.has(e.id))),n(!1),d(new Set),m(""),j("all"),g("")},disabled:0===c.size,children:"Add Selected"})]})]})]})};function ex(e){let{creatureId:s,isCreatingNew:t,template:n,onCreatureSaveSuccess:h,onCreatureDeleteSuccess:f,onUseAsTemplate:g,onEditCancel:y,dataVersion:b,onFilterByClick:w,onBack:G}=e,{toast:M}=(0,p.dj)(),[k,z]=(0,r.useState)(t),[es,et]=(0,r.useState)(!t&&!!s),[en,ec]=(0,r.useState)(null),[ex,eh]=(0,r.useState)([]),em=(0,ea.a)(),ep=(0,r.useMemo)(()=>{if(t)if(n){let e={...eo,...n,abilities:n.abilities||"",description:n.description||"",tags:n.tags||[],deeds:(n.deeds||[]).map(e=>{var s,t,l,r,a;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(t=e.effects)?void 0:t.base)||"",hit:(null==(l=e.effects)?void 0:l.hit)||"",shadow:(null==(r=e.effects)?void 0:r.shadow)||"",end:(null==(a=e.effects)?void 0:a.end)||""},tags:e.tags||[]}})};return delete e.id,e}else{let e=o(eo.role,eo.level);return{...eo,attributes:e||eo.attributes}}return eo},[t,n]),ej=(0,R.mN)({resolver:(0,S.u)(ed),defaultValues:ep}),{fields:ev,append:ef,remove:eg,replace:ey}=(0,R.jz)({control:ej.control,name:"deeds"}),{watch:eb,setValue:eN,getValues:ew}=ej,eG=eb("role"),eR=eb("level"),eS=eb("template"),eM=eb();(0,r.useEffect)(()=>{if(k){let t=o(eG,eR);if(t){var e,s;let l=eR<1||eR>10?0:null!=(s=null==(e=c[eS])?void 0:e[eR-1])?s:0,r=t.HP,a=t.DMG;switch(eS){case"Underling":r=1,a=function(e){let s=d.indexOf(e);return s>0?d[s-1]:d[0]}(t.DMG),ey(ew("deeds").filter(e=>"light"===e.tier));break;case"Paragon":r=2*t.HP;break;case"Tyrant":r=4*t.HP}eN("attributes",{...t,HP:r,DMG:a}),eN("TR",l)}}},[eG,eR,eS,eN,k,ew,ey]),(0,r.useEffect)(()=>{(0,C.xy)().then(eh).catch(e=>console.error("Could not fetch all deeds",e))},[b]),(0,r.useEffect)(()=>{(async()=>{if(t||!s){z(t),et(!1),ec(n||null);return}et(!0),z(!1);try{let e=await (0,a.s2)(s);if(e){let s=await (0,C.pT)(e.deeds),t={...e,deeds:s};ec(t);let l={...eo,...t,abilities:t.abilities||"",description:t.description||"",template:t.template||"Normal",tags:t.tags||[],deeds:s.map(e=>{var s,t,l,r,a;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(t=e.effects)?void 0:t.base)||"",hit:(null==(l=e.effects)?void 0:l.hit)||"",shadow:(null==(r=e.effects)?void 0:r.shadow)||"",end:(null==(a=e.effects)?void 0:a.end)||""},tags:e.tags||[]}})};ej.reset(l)}}catch(e){console.error("Failed to fetch creature data:",e),M({variant:"destructive",title:"Error",description:"Could not load creature data."})}finally{et(!1)}})()},[s,t,ej,M,b,n]);let eC=async e=>{try{"Underling"===e.template&&(e.deeds=e.deeds.filter(e=>"light"===e.tier));let l=e.deeds.map(e=>{if(!e.id){let{id:s,...t}=e,l={...t,tags:t.tags||[]};return(0,C.W$)(l)}return Promise.resolve(e.id)}),r=await Promise.all(l),i={...e,tags:e.tags||[],deeds:r},n=e.tags||[];if(n.length>0&&await (0,A.JE)(n,"creature"),t){let s=await (0,a.RW)(i);M({title:"Creature Created!",description:"".concat(e.name," has been added to the bestiary.")}),h(s)}else s&&(await (0,a.ZK)({...i,id:s}),M({title:"Save Successful",description:"".concat(e.name," has been updated.")}),h(s));z(!1)}catch(e){console.error("Failed to save creature:",e),M({variant:"destructive",title:"Save Failed",description:"Could not save changes."})}},eA=async()=>{if(s)try{await (0,a.PW)(s),M({title:"Creature Deleted",description:"The creature has been removed from the bestiary."}),f()}catch(e){console.error("Failed to delete creature:",e),M({variant:"destructive",title:"Deletion Failed",description:"Could not delete the creature."})}},eB=()=>{if(t)y();else{if(en){let e={...eo,...en,abilities:en.abilities||"",description:en.description||"",template:en.template||"Normal",tags:en.tags||[],deeds:en.deeds.map(e=>{var s,t,l,r,a;return{...e,effects:{start:(null==(s=e.effects)?void 0:s.start)||"",base:(null==(t=e.effects)?void 0:t.base)||"",hit:(null==(l=e.effects)?void 0:l.hit)||"",shadow:(null==(r=e.effects)?void 0:r.shadow)||"",end:(null==(a=e.effects)?void 0:a.end)||""},tags:e.tags||[]}})};ej.reset(e)}z(!1)}},eI={light:0,heavy:1,mighty:2},eP=(0,r.useMemo)(()=>new Set(ev.map(e=>e.id).filter(Boolean)),[ev]);if(es&&!t)return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsxs)(I.Zp,{children:[(0,l.jsxs)(I.aR,{className:"flex flex-row items-center justify-between",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(X.E,{className:"h-8 w-48"}),(0,l.jsx)(X.E,{className:"h-4 w-32"})]}),(0,l.jsx)(X.E,{className:"h-10 w-24"})]}),(0,l.jsxs)(I.Wu,{children:[(0,l.jsx)(m.w,{className:"my-6"}),(0,l.jsx)(X.E,{className:"h-6 w-32 mb-4"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,l.jsx)(X.E,{className:"h-12 w-full"}),(0,l.jsx)(X.E,{className:"h-12 w-full"}),(0,l.jsx)(X.E,{className:"h-12 w-full"}),(0,l.jsx)(X.E,{className:"h-12 w-full"}),(0,l.jsx)(X.E,{className:"h-12 w-full"}),(0,l.jsx)(X.E,{className:"h-12 w-full"}),(0,l.jsx)(X.E,{className:"h-12 w-full"})]}),(0,l.jsx)(m.w,{className:"my-6"}),(0,l.jsx)(X.E,{className:"h-6 w-32 mb-4"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(X.E,{className:"h-24 w-full"}),(0,l.jsx)(X.E,{className:"h-24 w-full"})]})]})]})});if(!t&&!s&&!es)return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsx)(I.Zp,{className:"h-full flex items-center justify-center min-h-[300px]",children:(0,l.jsxs)(I.Wu,{className:"text-center pt-6",children:[(0,l.jsx)("p",{className:"text-xl text-muted-foreground",children:"Select a creature to view"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"or create a new one."})]})})});if(!k&&s&&en){let e=[...en.deeds].sort((e,s)=>eI[e.tier]-eI[s.tier]);return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsxs)(I.Zp,{children:[(0,l.jsx)(I.aR,{children:(0,l.jsxs)("div",{className:"flex flex-row items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[em&&G&&(0,l.jsx)(x.$,{variant:"ghost",size:"icon",onClick:G,className:"-ml-4 -mt-1",children:(0,l.jsx)(T.A,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(I.ZB,{className:"text-3xl font-bold",children:en.name}),(0,l.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground flex flex-col items-start gap-1",children:[(0,l.jsx)("p",{children:(0,l.jsxs)("button",{onClick:e=>w({templateFilter:en.template,roleFilter:en.role,minLevel:en.level,maxLevel:en.level},e),className:"hover:underline p-0 bg-transparent text-inherit",children:["Lvl ",en.level," ",en.template," ",en.role]})}),(0,l.jsx)("p",{children:(0,l.jsxs)("button",{onClick:e=>w({minTR:en.TR,maxTR:en.TR},e),className:"hover:underline p-0 bg-transparent text-inherit",children:["TR ",en.TR]})}),en.tags&&en.tags.length>0&&(0,l.jsx)("div",{className:"flex flex-wrap items-center gap-2 pt-1",children:en.tags.map(e=>(0,l.jsx)("button",{onClick:s=>w({tagFilter:e},s),className:"bg-transparent border-none p-0 m-0",children:(0,l.jsx)(er.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",children:e})},e))})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>{en&&g(en)},children:[(0,l.jsx)(L.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Template"})]}),(0,l.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>z(!0),children:[(0,l.jsx)(F.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]})]})]})}),(0,l.jsxs)(I.Wu,{children:[(0,l.jsx)(m.w,{className:"my-6"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Attributes"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-x-6 gap-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(J.A,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"HP"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.HP})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(E,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"Speed"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.Speed})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(V,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"Initiative"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.Initiative})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(q,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"Accuracy"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.Accuracy})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)($,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"Guard"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.Guard})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(O,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"Resist"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.Resist})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(W,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"Roll Bonus"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.rollBonus>0?"+".concat(en.attributes.rollBonus):en.attributes.rollBonus})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(U,{className:"h-5 w-5 text-accent"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.J,{children:"DMG"}),(0,l.jsx)("p",{className:"text-lg font-bold",children:en.attributes.DMG})]})]})]})]}),(0,l.jsx)(m.w,{className:"my-6"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Deeds"}),e.length>0?e.map((e,s)=>(0,l.jsx)(el.P,{deed:e,dmgReplacement:en.attributes.DMG},s)):(0,l.jsx)("p",{className:"text-muted-foreground",children:"No deeds defined."})]}),(en.abilities||en.description)&&(0,l.jsx)(m.w,{className:"my-6"}),en.abilities&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2 text-primary-foreground",children:"Abilities"}),(0,l.jsx)("p",{className:"text-foreground/90 whitespace-pre-wrap",children:en.abilities})]}),en.description&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2 text-primary-foreground",children:"Description"}),(0,l.jsx)("p",{className:"text-foreground/90 whitespace-pre-wrap",children:en.description})]})]}),(0,l.jsx)(I.wL,{children:(0,l.jsxs)(D.Lt,{children:[(0,l.jsx)(D.tv,{asChild:!0,children:(0,l.jsx)(x.$,{type:"button",variant:"destructive",size:"sm",children:(0,l.jsx)(Z.A,{className:"h-4 w-4"})})}),(0,l.jsxs)(D.EO,{children:[(0,l.jsxs)(D.wd,{children:[(0,l.jsx)(D.r7,{children:"Are you sure?"}),(0,l.jsxs)(D.$v,{children:['This will permanently delete "',ej.getValues("name"),'". This action cannot be undone.']})]}),(0,l.jsxs)(D.ck,{children:[(0,l.jsx)(D.Zr,{children:"Cancel"}),(0,l.jsx)(D.Rx,{onClick:eA,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})})]})})}return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsx)(I.Zp,{children:(0,l.jsx)(H.lV,{...ej,children:(0,l.jsxs)("form",{onSubmit:ej.handleSubmit(eC),className:"space-y-6",children:[(0,l.jsx)(I.aR,{children:(0,l.jsxs)("div",{className:"flex flex-row justify-between items-start",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[em&&G&&(0,l.jsx)(x.$,{type:"button",variant:"ghost",size:"icon",onClick:y,className:"-ml-4",children:(0,l.jsx)(T.A,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(I.ZB,{children:t?em?"New Creature":"Create a New Creature":"Editing: ".concat((null==en?void 0:en.name)||"...")}),(0,l.jsx)(I.BT,{children:t?"Fill out the details for your new creature.":"Make your changes and click Save."})]})]}),!em&&(0,l.jsx)(x.$,{type:"button",variant:"ghost",size:"icon",onClick:eB,className:"text-muted-foreground hover:text-foreground",children:(0,l.jsx)(K.A,{className:"h-5 w-5"})})]})}),(0,l.jsxs)(I.Wu,{className:"space-y-8 pt-0",children:[(0,l.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsx)(H.zB,{name:"name",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{className:"lg:col-span-2",children:[(0,l.jsx)(H.lR,{children:"Name"}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{placeholder:"e.g., Gloomfang Serpent",...s})}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"level",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Level"}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",min:"1",max:"10",...s})}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"TR",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"TR"}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})}),(0,l.jsx)(H.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsx)(H.zB,{name:"template",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Template"}),(0,l.jsxs)(v.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(H.MJ,{children:(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Select a template"})})}),(0,l.jsx)(v.gC,{children:ei.map(e=>(0,l.jsx)(v.eb,{value:e,children:e},e))})]}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"role",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Role"}),(0,l.jsxs)(v.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(H.MJ,{children:(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Select a role"})})}),(0,l.jsx)(v.gC,{children:i.map(e=>(0,l.jsx)(v.eb,{value:e,children:e},e))})]}),(0,l.jsx)(H.C5,{})]})}})]}),(0,l.jsx)(m.w,{}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-primary-foreground",children:"Attributes"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[(0,l.jsx)(H.zB,{name:"attributes.HP",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(J.A,{className:"h-4 w-4 text-accent"}),"HP"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})})]})}}),(0,l.jsx)(H.zB,{name:"attributes.Speed",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(E,{className:"h-4 w-4 text-accent"}),"Speed"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})})]})}}),(0,l.jsx)(H.zB,{name:"attributes.Initiative",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(V,{className:"h-4 w-4 text-accent"}),"Initiative"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})})]})}}),(0,l.jsx)(H.zB,{name:"attributes.Accuracy",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(q,{className:"h-4 w-4 text-accent"}),"Accuracy"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})})]})}}),(0,l.jsx)(H.zB,{name:"attributes.Guard",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)($,{className:"h-4 w-4 text-accent"}),"Guard"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})})]})}}),(0,l.jsx)(H.zB,{name:"attributes.Resist",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(O,{className:"h-4 w-4 text-accent"}),"Resist"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})})]})}}),(0,l.jsx)(H.zB,{name:"attributes.rollBonus",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(W,{className:"h-4 w-4 text-accent"}),"Roll Bonus"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{type:"number",...s})})]})}}),(0,l.jsx)(H.zB,{name:"attributes.DMG",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(U,{className:"h-4 w-4 text-accent"}),"DMG"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{...s})})]})}})]})]}),(0,l.jsx)(m.w,{}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-primary-foreground",children:"Deeds"}),(0,l.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[(0,l.jsx)(eu,{onAddDeeds:e=>{let s=e.map(e=>({...e,tags:e.tags||[]}));if("Underling"===ew("template")){let e=s.filter(e=>"light"===e.tier);e.length<s.length&&M({variant:"destructive",title:"Warning",description:"Only Light deeds can be added to Underlings."}),ef(e)}else ef(s)},allDeeds:ex,existingDeedIds:eP}),(0,l.jsxs)(x.$,{type:"button",size:"sm",variant:"outline",onClick:()=>ef({name:"",tier:"light",actionType:"attack",deedType:"melee",versus:"guard",target:"",effects:{start:"",base:"",hit:"",shadow:"",end:""},tags:[]}),children:[(0,l.jsx)(_.A,{className:"h-4 w-4 mr-2"})," Create New"]})]})]}),(0,l.jsx)("div",{className:"space-y-4",children:ev.map((e,s)=>{var t,r,a,i;return(0,l.jsxs)(ee.Nt,{defaultOpen:!ej.getValues("deeds.".concat(s,".name")),className:"border bg-card-foreground/5 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(ee.R6,{asChild:!0,children:(0,l.jsxs)("button",{type:"button",className:"flex items-center gap-3 text-left w-full",children:[(0,l.jsx)(Y.A,{className:"h-5 w-5 text-muted-foreground"}),(0,l.jsx)("span",{className:"text-lg font-semibold text-primary-foreground",children:(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.name)||"New Deed"}),(null==(i=eM.deeds)||null==(a=i[s])?void 0:a.id)&&(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:"(from library)"})]})}),(0,l.jsx)(x.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>eg(s),className:"text-muted-foreground hover:text-destructive",children:(0,l.jsx)(Z.A,{className:"h-4 w-4"})})]}),(0,l.jsxs)(ee.Ke,{className:"mt-6 space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".name"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Deed Name"}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{placeholder:"e.g., Inferno",...a,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".tier"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Tier"}),(0,l.jsxs)(v.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)||"Underling"===eS,children:[(0,l.jsx)(H.MJ,{children:(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Select tier"})})}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"light",children:"Light"}),(0,l.jsx)(v.eb,{value:"heavy",children:"Heavy"}),(0,l.jsx)(v.eb,{value:"mighty",children:"Mighty"})]})]}),(0,l.jsx)(H.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".deedType"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Deed Type"}),(0,l.jsxs)(v.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id),children:[(0,l.jsx)(H.MJ,{children:(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Type"})})}),(0,l.jsx)(v.gC,{children:B.FC.map(e=>(0,l.jsx)(v.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".actionType"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Action Type"}),(0,l.jsxs)(v.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id),children:[(0,l.jsx)(H.MJ,{children:(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Action"})})}),(0,l.jsx)(v.gC,{children:B.GW.map(e=>(0,l.jsx)(v.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".versus"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Versus"}),(0,l.jsxs)(v.l6,{onValueChange:a.onChange,value:a.value,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id),children:[(0,l.jsx)(H.MJ,{children:(0,l.jsx)(v.bq,{children:(0,l.jsx)(v.yv,{placeholder:"Versus"})})}),(0,l.jsx)(v.gC,{children:B.OJ.map(e=>(0,l.jsx)(v.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,l.jsx)(H.C5,{})]})}})]}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".target"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Target"}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(u.p,{placeholder:"e.g., 1 Creature | Blast 4",...a,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm text-primary-foreground",children:"Effects"}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".effects.start"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{children:["Start ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(P.T,{placeholder:"Effect when a creature starts its turn in an area...",...a,rows:2,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)})})]})}}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".effects.base"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{children:["Base ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(P.T,{placeholder:"Base effect of the deed...",...a,rows:2,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)})})]})}}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".effects.hit"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{children:["Hit ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(P.T,{placeholder:"The primary effect on a successful hit...",...a,rows:3,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".effects.shadow"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{children:["Shadow (Critical) ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(P.T,{placeholder:"The enhanced effect on a critical success...",...a,rows:3,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)})}),(0,l.jsx)(H.C5,{})]})}}),(0,l.jsx)(H.zB,{name:"deeds.".concat(s,".effects.end"),control:ej.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{children:["End ",(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(P.T,{placeholder:"Effect at the end of a creature's turn...",...a,rows:2,disabled:!!(null==(r=eM.deeds)||null==(t=r[s])?void 0:t.id)})})]})}})]})]})]},e.id)})})]}),(0,l.jsx)(m.w,{}),(0,l.jsx)(H.zB,{name:"abilities",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Abilities"}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(P.T,{placeholder:"Special abilities, separated by commas...",...s})})]})}}),(0,l.jsx)(H.zB,{name:"description",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsx)(H.lR,{children:"Description"}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(P.T,{placeholder:"A short description of the creature...",rows:5,...s})})]})}}),(0,l.jsx)(H.zB,{name:"tags",control:ej.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(H.eI,{children:[(0,l.jsxs)(H.lR,{className:"flex items-center gap-2",children:[(0,l.jsx)(Q.A,{className:"h-4 w-4 text-accent"}),"Tags"]}),(0,l.jsx)(H.MJ,{children:(0,l.jsx)(N.F,{value:s.value||[],onChange:s.onChange,placeholder:"Add tags...",tagSource:"creature"})}),(0,l.jsx)(H.C5,{})]})}})]}),(0,l.jsxs)(I.wL,{className:"flex items-center gap-2",children:[!t&&(0,l.jsxs)(D.Lt,{children:[(0,l.jsx)(D.tv,{asChild:!0,children:(0,l.jsx)(x.$,{type:"button",variant:"destructive",size:"sm",children:(0,l.jsx)(Z.A,{className:"h-4 w-4"})})}),(0,l.jsxs)(D.EO,{children:[(0,l.jsxs)(D.wd,{children:[(0,l.jsx)(D.r7,{children:"Are you sure?"}),(0,l.jsxs)(D.$v,{children:['This will permanently delete "',ej.getValues("name"),'". This action cannot be undone.']})]}),(0,l.jsxs)(D.ck,{children:[(0,l.jsx)(D.Zr,{children:"Cancel"}),(0,l.jsx)(D.Rx,{onClick:eA,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]}),(0,l.jsx)("div",{className:"flex-grow"}),!em&&(0,l.jsx)(x.$,{type:"button",variant:"outline",onClick:eB,children:"Cancel"}),(0,l.jsx)(x.$,{type:"submit",children:t?"Create Creature":"Save Changes"})]})]})})})})}var eh=t(31),em=t(2709);function ep(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[c,d]=(0,r.useState)(0),[o,u]=(0,r.useState)(""),[x,h]=(0,r.useState)("all"),[m,p]=(0,r.useState)("all"),[j,v]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[R,S]=(0,r.useState)(""),[M,C]=(0,r.useState)("name"),[A,B]=(0,r.useState)("asc"),[I,P]=(0,r.useState)(!1),D=(0,ea.a)(),[H,k]=(0,r.useState)("list");(0,r.useEffect)(()=>{P(!0)},[]);let z={searchTerm:o,roleFilter:x,templateFilter:m,minLevel:j,maxLevel:f,minTR:y,maxTR:N,tagFilter:R,sortBy:M,sortOrder:A},T={setSearchTerm:u,setRoleFilter:h,setTemplateFilter:p,setMinLevel:v,setMaxLevel:g,setMinTR:b,setMaxTR:w,setTagFilter:S,setSortBy:C,setSortOrder:B},L=(e,s)=>{s.shiftKey?(e.roleFilter&&h(e.roleFilter),e.templateFilter&&p(e.templateFilter),void 0!==e.minLevel&&v(String(e.minLevel)),void 0!==e.maxLevel&&g(String(e.maxLevel)),void 0!==e.minTR&&b(String(e.minTR)),void 0!==e.maxTR&&w(String(e.maxTR)),e.tagFilter&&S(s=>s?s.split(",").map(e=>e.trim()).includes(e.tagFilter)?s:"".concat(s,", ").concat(e.tagFilter):e.tagFilter)):(h(e.roleFilter||"all"),p(e.templateFilter||"all"),v(void 0!==e.minLevel?String(e.minLevel):""),g(void 0!==e.maxLevel?String(e.maxLevel):""),b(void 0!==e.minTR?String(e.minTR):""),w(void 0!==e.maxTR?String(e.maxTR):""),S(e.tagFilter||""))},F=()=>{u(""),h("all"),p("all"),v(""),g(""),b(""),w(""),S(""),C("name"),B("asc")},J=()=>d(e=>e+1),E=e=>{s(e),a(!1),n(null),D&&k("editor")},V=()=>{s(null),a(!0),n(null),D&&k("editor")},q=e=>{let t={...e},l=(e.name||"creature").replace(/^(Copy of\s*)+/,"");t.name="Copy of ".concat(l),delete t.id,s(null),a(!0),n(t),D&&k("editor")},$=e=>{J(),s(e),a(!1),n(null),D&&k("editor")},O=()=>{J(),s(null),a(!1),n(null),D&&k("list")},W=()=>{t&&(a(!1),s(null),D&&k("list"))};return I?D?(0,l.jsx)(em.A,{showSidebarTrigger:!1,children:(0,l.jsx)("div",{className:"h-full w-full",children:"list"===H?(0,l.jsx)(G,{onSelectCreature:E,onNewCreature:V,selectedCreatureId:e,dataVersion:c,filters:z,setFilters:T,onClearFilters:F}):(0,l.jsx)("div",{className:"p-4 sm:p-6 h-full w-full overflow-y-auto",children:(0,l.jsx)(ex,{creatureId:e,isCreatingNew:t,template:i,onCreatureSaveSuccess:$,onCreatureDeleteSuccess:O,onUseAsTemplate:q,onEditCancel:W,dataVersion:c,onFilterByClick:L,onBack:()=>{k("list"),s(null),a(!1),n(null)}},null!=e?e:t?"new":"placeholder")})})}):(0,l.jsx)(eh.GB,{children:(0,l.jsx)(em.A,{children:(0,l.jsxs)("div",{className:"flex w-full h-full overflow-hidden",children:[(0,l.jsx)(eh.Bx,{style:{"--sidebar-width":"380px"},children:(0,l.jsx)(G,{onSelectCreature:E,onNewCreature:V,selectedCreatureId:e,dataVersion:c,filters:z,setFilters:T,onClearFilters:F})}),(0,l.jsx)(eh.sF,{className:"flex-1 overflow-y-auto",children:(0,l.jsx)("div",{className:"bg-background/50 p-4 sm:p-6 md:p-8 w-full",children:(0,l.jsx)(ex,{creatureId:e,isCreatingNew:t,template:i,onCreatureSaveSuccess:$,onCreatureDeleteSuccess:O,onUseAsTemplate:q,onEditCancel:W,dataVersion:c,onFilterByClick:L},null!=e?e:t?"new":"placeholder")})})]})})}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[222,120,427,343,347,239,441,684,358],()=>s(4768)),_N_E=e.O()}]);