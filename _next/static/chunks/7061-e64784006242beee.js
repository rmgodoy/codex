"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7061],{2868:(e,r,t)=>{t.d(r,{At:()=>l,UU:()=>o,_1:()=>n,bj:()=>s});var a=t(82489);let s=async e=>{let r=(await (0,a.Lf)()).transaction(a.$,"readonly").objectStore(a.$);if(!e||"all"===e){let e=r.getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})}let t=r.index("by_calendar").getAll(IDBKeyRange.only(e));return new Promise((e,r)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error)})},o=async e=>{let r=(await (0,a.Lf)()).transaction(a.$,"readwrite").objectStore(a.$),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},n=async e=>{let r=(await (0,a.Lf)()).transaction(a.$,"readwrite").objectStore(a.$).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},l=async e=>{let r=(await (0,a.Lf)()).transaction(a.$,"readwrite").objectStore(a.$).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})}},22346:(e,r,t)=>{t.d(r,{w:()=>l});var a=t(95155),s=t(12115),o=t(87489),n=t(59434);let l=s.forwardRef((e,r)=>{let{className:t,orientation:s="horizontal",decorative:l=!0,...c}=e;return(0,a.jsx)(o.b,{ref:r,decorative:l,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...c})});l.displayName=o.b.displayName},44838:(e,r,t)=>{t.d(r,{SQ:()=>m,_2:()=>f,mB:()=>w,rI:()=>d,ty:()=>u});var a=t(95155),s=t(12115),o=t(76215),n=t(73158),l=t(10518),c=t(70154),i=t(59434);let d=o.bL,u=o.l9;o.YJ,o.ZL,o.Pb,o.z6,s.forwardRef((e,r)=>{let{className:t,inset:s,children:l,...c}=e;return(0,a.jsxs)(o.ZP,{ref:r,className:(0,i.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...c,children:[l,(0,a.jsx)(n.A,{className:"ml-auto"})]})}).displayName=o.ZP.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.G5,{ref:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}).displayName=o.G5.displayName;let m=s.forwardRef((e,r)=>{let{className:t,sideOffset:s=4,...n}=e;return(0,a.jsx)(o.ZL,{children:(0,a.jsx)(o.UC,{ref:r,sideOffset:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});m.displayName=o.UC.displayName;let f=s.forwardRef((e,r)=>{let{className:t,inset:s,...n}=e;return(0,a.jsx)(o.q7,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n})});f.displayName=o.q7.displayName,s.forwardRef((e,r)=>{let{className:t,children:s,checked:n,...c}=e;return(0,a.jsxs)(o.H_,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...c,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(o.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),s]})}).displayName=o.H_.displayName,s.forwardRef((e,r)=>{let{className:t,children:s,...n}=e;return(0,a.jsxs)(o.hN,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(o.VF,{children:(0,a.jsx)(c.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=o.hN.displayName,s.forwardRef((e,r)=>{let{className:t,inset:s,...n}=e;return(0,a.jsx)(o.JU,{ref:r,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...n})}).displayName=o.JU.displayName;let w=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.wv,{ref:r,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...s})});w.displayName=o.wv.displayName},46855:(e,r,t)=>{t.d(r,{A:()=>A});var a=t(95155),s=t(12115),o=t(28341),n=t(82643),l=t(30285),c=t(44838),i=t(38382),d=t(22346),u=t(66424),m=t(20031),f=t(87481),w=t(53648),p=t(38914),h=t(47906),x=t(94039),y=t(50172),j=t(82733),b=t(56013),g=t(16923),N=t(68718),P=t(90010),v=t(54165),S=t(51362),C=t(62523),L=t(85057);function R(){let[e,r]=(0,s.useState)(!1),[t,o]=(0,s.useState)(""),[n,c]=(0,s.useState)(null),[i,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1),{toast:j}=(0,f.dj)();return(0,s.useEffect)(()=>{e&&((0,w.Uj)().then(d),o(""),c(null),m(null),h(!1))},[e]),(0,s.useEffect)(()=>{if(t){let e=t.trim().toLowerCase().replace(/\s+/g,"-");i.some(r=>r.slug===e)?m("A world with this name already exists."):m(null)}else m(null)},[t,i]),(0,a.jsxs)(v.lG,{open:e,onOpenChange:r,children:[(0,a.jsx)(v.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full",children:[(0,a.jsx)(x.A,{className:"mr-2"})," Import New World"]})}),(0,a.jsxs)(v.Cf,{children:[(0,a.jsx)(v.c7,{children:(0,a.jsx)(v.L3,{children:"Import New World from File"})}),(0,a.jsxs)("div",{className:"space-y-4 py-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"world-file",children:"World File (.json)"}),(0,a.jsx)(C.p,{id:"world-file",type:"file",accept:".json",onChange:e=>{var r;let a=null==(r=e.target.files)?void 0:r[0];a&&(c(a),t||o(a.name.replace(/\.json$/,"").replace(/codex_world_/g,"").replace(/_/g," ")))}})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"world-name",children:"New World Name"}),(0,a.jsx)(C.p,{id:"world-name",value:t,onChange:e=>o(e.target.value),placeholder:"e.g., Aethelgard"}),u&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u})]})]}),(0,a.jsxs)(v.Es,{children:[(0,a.jsx)(l.$,{variant:"ghost",onClick:()=>r(!1),children:"Cancel"}),(0,a.jsxs)(l.$,{onClick:()=>{if(!n||!t.trim()||u)return;h(!0);let e=new FileReader;e.onload=async e=>{let r=t.trim().toLowerCase().replace(/\s+/g,"-");try{var a;let s=null==(a=e.target)?void 0:a.result;if("string"!=typeof s)throw Error("File content could not be read.");let o=JSON.parse(s);(0,w.YJ)(r),await (0,w.Qx)(o,t),j({title:"Import Successful",description:'World "'.concat(t,'" has been created.')}),window.location.hash="#/".concat(r),window.location.reload()}catch(e){j({variant:"destructive",title:"Import Failed",description:e.message||"Please check the file format."}),h(!1)}},e.readAsText(n)},disabled:!n||!t||!!u||p,children:[p&&(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Importing...":"Import World"]})]})]})]})}function k(e){let{onExport:r,onImport:t,context:o}=e,n=(0,s.useRef)(null),{setTheme:i}=(0,S.D)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",ref:n,onChange:t,accept:".json",className:"hidden"}),(0,a.jsxs)(v.lG,{children:[(0,a.jsx)(v.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"ghost",size:"icon",title:"Settings",children:[(0,a.jsx)(b.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Settings"})]})}),(0,a.jsxs)(v.Cf,{children:[(0,a.jsx)(v.c7,{children:(0,a.jsx)(v.L3,{children:"Settings"})}),(0,a.jsxs)("div",{className:"space-y-4",children:["landing"===o&&(0,a.jsx)(R,{}),"world"===o&&t&&(0,a.jsxs)(P.Lt,{children:[(0,a.jsx)(P.tv,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full",children:[(0,a.jsx)(g.A,{className:"mr-2"})," Import & Overwrite"]})}),(0,a.jsxs)(P.EO,{children:[(0,a.jsxs)(P.wd,{children:[(0,a.jsx)(P.r7,{children:"Import Data?"}),(0,a.jsx)(P.$v,{children:"This will overwrite all existing data in the current world with data from the selected JSON file. This action cannot be undone."})]}),(0,a.jsxs)(P.ck,{children:[(0,a.jsx)(P.Zr,{children:"Cancel"}),(0,a.jsx)(P.Rx,{onClick:()=>{var e;return null==(e=n.current)?void 0:e.click()},children:"Proceed"})]})]})]}),"world"===o&&r&&(0,a.jsxs)(l.$,{variant:"outline",className:"w-full",onClick:r,children:[(0,a.jsx)(N.A,{className:"mr-2"})," Export Current World"]}),(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)("h3",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Theme"}),(0,a.jsxs)(c.rI,{children:[(0,a.jsx)(c.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-between",children:[(0,a.jsx)("span",{children:"Change Theme"}),(0,a.jsx)(j.A,{})]})}),(0,a.jsxs)(c.SQ,{children:[(0,a.jsx)(c._2,{onClick:()=>i("dark"),children:"Default Dark"}),(0,a.jsx)(c._2,{onClick:()=>i("light"),children:"Oasis"}),(0,a.jsx)(c._2,{onClick:()=>i("dark-red"),children:"Crimson"}),(0,a.jsx)(c._2,{onClick:()=>i("desert"),children:"Desert"}),(0,a.jsx)(c._2,{onClick:()=>i("space"),children:"Space"}),(0,a.jsx)(c._2,{onClick:()=>i("twilight"),children:"Twilight"}),(0,a.jsx)(c._2,{onClick:()=>i("chocolat"),children:"Chocolat"}),(0,a.jsx)(c._2,{onClick:()=>i("emerald"),children:"Emerald"}),(0,a.jsx)(c._2,{onClick:()=>i("silver"),children:"Silver"}),(0,a.jsx)(c._2,{onClick:()=>i("zombie"),children:"Zombie"}),(0,a.jsx)(c._2,{onClick:()=>i("system"),children:"System"})]})]})]}),{})]})]})]})]})}function A(e){let{children:r,showSidebarTrigger:t=!0}=e,{worldSlug:x,worldName:y}=(0,p.q)(),{toast:j}=(0,f.dj)(),[b,g]=(0,s.useState)(""),N=(0,h.a)();(0,s.useEffect)(()=>{let e=()=>{g(window.location.hash)};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);let P=async e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(!t||!x)return;let a=new FileReader;a.onload=async r=>{try{var t;let e=null==(t=r.target)?void 0:t.result;if("string"!=typeof e)throw Error("File content could not be read as text.");let a=JSON.parse(e);await (0,w.Qx)(a),j({title:"Import Successful",description:"Data has been overwritten. The application will now reload."}),setTimeout(()=>{window.location.reload()},1500)}catch(e){console.error("Import failed:",e),j({variant:"destructive",title:"Import Failed",description:e.message||"Please check the file format and content."})}finally{let r=e.target;r&&(r.value="")}},a.readAsText(t)},v=async()=>{if(x)try{let e=await (0,w.P7)(x),r="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e,null,2))),t=document.createElement("a");t.href=r,t.download="tresspasser_world_".concat(y||x,".json"),document.body.appendChild(t),t.click(),document.body.removeChild(t),j({title:"Export Successful",description:'"'.concat(y||x,'" data has been downloaded.')})}catch(e){console.error("Export failed:",e),j({variant:"destructive",title:"Export Failed",description:"Could not export the data."})}},S=(0,s.useMemo)(()=>{let e=b.split("/").filter(e=>e&&"#"!==e).slice(1).join("/"),r="";if(e){let t=e.toLowerCase();t.startsWith("random/encounter-tables")?r="Encounter Tables":t.startsWith("random/treasures")?r="Treasures":t.startsWith("random/commoners")?r="Commoners":t.startsWith("alchemy")?r="Alchemy":t.startsWith("rooms")?r="Rooms":t.startsWith("dungeons")?r="Dungeons":t.startsWith("items")?r="Items":t.startsWith("npcs")?r="NPCs":t.startsWith("factions")?r="Factions":t.startsWith("calendar-models")?r="Calendar Models":t.startsWith("calendar")?r="Calendar":t.startsWith("maps")?r="Maps":t.startsWith("pantheon")?r="Pantheon":t.startsWith("bestiary")?r="Bestiary":t.startsWith("deeds")?r="Deeds":t.startsWith("encounters")?r="Encounters":t.startsWith("cities")&&(r="Cities")}return N?r||y||"Codex":y&&r?"".concat(y," | ").concat(r):y||"Codex"},[b,y,x,N]),C=[{href:"#/".concat(x,"/alchemy"),label:"Alchemy",group:"Compendium"},{href:"#/".concat(x,"/bestiary"),label:"Bestiary",group:"Compendium"},{href:"#/".concat(x,"/cities"),label:"Cities",group:"Compendium"},{href:"#/".concat(x,"/deeds"),label:"Deeds",group:"Compendium"},{href:"#/".concat(x,"/encounters"),label:"Encounters",group:"Compendium"},{href:"#/".concat(x,"/items"),label:"Items",group:"Compendium"},{href:"#/".concat(x,"/npcs"),label:"NPCs",group:"Compendium"},{href:"#/".concat(x,"/factions"),label:"Factions",group:"Compendium"},{href:"#/".concat(x,"/pantheon"),label:"Pantheon",group:"Compendium"},{href:"#/".concat(x,"/rooms"),label:"Rooms",group:"Compendium"},{href:"#/".concat(x,"/random/treasures"),label:"Treasures",group:"Compendium"},{href:"#/".concat(x,"/random/encounter-tables"),label:"Encounter Tables",group:"Random"},{href:"#/".concat(x,"/random/commoners"),label:"Commoners",group:"Random"},{href:"#/".concat(x,"/dungeons"),label:"Dungeons"},{href:"#/".concat(x,"/maps"),label:"Maps"}].sort((e,r)=>e.label.localeCompare(r.label)),L=C.filter(e=>"Compendium"===e.group),R=C.filter(e=>"Random"===e.group),A=C.filter(e=>!e.group),W=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.rI,{children:[(0,a.jsx)(c.ty,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",children:"Compendium"})}),(0,a.jsx)(c.SQ,{children:L.map(e=>(0,a.jsx)("a",{href:e.href,children:(0,a.jsx)(c._2,{children:e.label})},e.href))})]}),(0,a.jsxs)(c.rI,{children:[(0,a.jsx)(c.ty,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",children:"Random"})}),(0,a.jsx)(c.SQ,{children:R.map(e=>(0,a.jsx)("a",{href:e.href,children:(0,a.jsx)(c._2,{children:e.label})},e.href))})]}),A.map(e=>(0,a.jsx)("a",{href:e.href,children:(0,a.jsx)(l.$,{variant:b.endsWith(e.href.split("/").pop())?"secondary":"ghost",children:e.label})},e.href)),(0,a.jsxs)(c.rI,{children:[(0,a.jsx)(c.ty,{asChild:!0,children:(0,a.jsx)(l.$,{variant:b.includes("/calendar")||b.includes("/calendar-models")?"secondary":"ghost",children:"Calendar"})}),(0,a.jsxs)(c.SQ,{children:[(0,a.jsx)("a",{href:"#/".concat(x,"/calendar"),children:(0,a.jsx)(c._2,{children:"Calendars"})}),(0,a.jsx)("a",{href:"#/".concat(x,"/calendar-models"),children:(0,a.jsx)(c._2,{children:"Models"})})]})]})]}),$=(0,a.jsxs)(i.cj,{children:[(0,a.jsx)(i.CG,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(i.h,{side:"right",className:"p-0 flex flex-col",children:[(0,a.jsx)(i.Fm,{className:"p-4 border-b",children:(0,a.jsx)(i.qp,{children:"Menu"})}),(0,a.jsx)(u.F,{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,a.jsx)("p",{className:"font-bold text-lg",children:"Compendium"}),L.map(e=>(0,a.jsx)("a",{href:e.href,children:(0,a.jsx)(l.$,{variant:b.endsWith(e.href.split("/").pop())?"secondary":"ghost",className:"w-full justify-start",children:e.label})},e.href)),(0,a.jsx)(d.w,{className:"my-2"}),(0,a.jsx)("p",{className:"font-bold text-lg",children:"Random"}),R.map(e=>(0,a.jsx)("a",{href:e.href,children:(0,a.jsx)(l.$,{variant:b.endsWith(e.href.split("/").pop())?"secondary":"ghost",className:"w-full justify-start",children:e.label})},e.href)),(0,a.jsx)(d.w,{className:"my-2"}),A.map(e=>(0,a.jsx)("a",{href:e.href,children:(0,a.jsx)(l.$,{variant:b.endsWith(e.href.split("/").pop())?"secondary":"ghost",className:"w-full justify-start",children:e.label})},e.href)),(0,a.jsx)(d.w,{className:"my-2"}),(0,a.jsx)("p",{className:"font-bold text-lg",children:"Calendar"}),(0,a.jsx)("a",{href:"#/".concat(x,"/calendar"),children:(0,a.jsx)(l.$,{variant:b.includes("/calendar")?"secondary":"ghost",className:"w-full justify-start",children:"Calendars"})}),(0,a.jsx)("a",{href:"#/".concat(x,"/calendar-models"),children:(0,a.jsx)(l.$,{variant:b.includes("/calendar-models")?"secondary":"ghost",className:"w-full justify-start",children:"Models"})})]})})]})]}),_=!!x;return(0,a.jsxs)("div",{className:"flex flex-col h-screen",style:{width:"100%"},children:[(0,a.jsxs)("header",{className:"py-4 px-6 md:px-8 border-b border-border flex items-center justify-between shrink-0 bg-background/80 backdrop-blur-sm sticky top-0 z-20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[_&&t&&(0,a.jsx)(m.x2,{}),(0,a.jsxs)("a",{href:"#",className:"flex items-center gap-3",children:[(0,a.jsx)(n.A,{className:"text-primary h-8 w-8"}),(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-headline font-bold text-foreground whitespace-nowrap",children:S})]}),_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.w,{orientation:"vertical",className:"h-6 mx-2 hidden md:block"}),(0,a.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:W})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{context:"world",onImport:P,onExport:v}),(0,a.jsx)("div",{className:"md:hidden",children:$})]}):(0,a.jsx)(k,{context:"landing"})})]}),(0,a.jsx)("main",{className:"flex-1 min-h-0",children:r})]})}},53648:(e,r,t)=>{t.d(r,{wo:()=>_,ep:()=>ey,UU:()=>eN.UU,xN:()=>e_,RW:()=>l,W$:()=>m,yV:()=>X,Fs:()=>y,vg:()=>P,sB:()=>es,B5:()=>O,Ys:()=>eR,NV:()=>ei,SE:()=>ew,TG:()=>I,JE:()=>H,Dp:()=>R,gL:()=>z,A$:()=>eb,$t:()=>ez,PW:()=>i,wz:()=>w,OO:()=>G,ZJ:()=>b,p6:()=>S,Bx:()=>en,LD:()=>B,GY:()=>eA,Pb:()=>eu,Sj:()=>eh,HN:()=>Q,vm:()=>A,uT:()=>a.uT,P7:()=>eP,rD:()=>$,vV:()=>W,bj:()=>eN.bj,FO:()=>ex,HV:()=>eW,OG:()=>s,Ul:()=>eg,xy:()=>d,J0:()=>D,MY:()=>g,eS:()=>h,vq:()=>et,i7:()=>M,xW:()=>eC,Qg:()=>el,Wt:()=>em,SP:()=>U,r:()=>V,h4:()=>C,iS:()=>e$,s2:()=>o,C8:()=>n,hP:()=>eS,rp:()=>u,pT:()=>p,RT:()=>F,eq:()=>x,Uh:()=>N,vR:()=>ea,u_:()=>K,zU:()=>eL,ES:()=>ec,Bf:()=>ef,_w:()=>T,X_:()=>er,qp:()=>L,Qx:()=>ev,Uj:()=>a.Uj,XN:()=>a.XN,YJ:()=>a.YJ,S9:()=>E,md:()=>ej,_1:()=>eN._1,b4:()=>eE,ZK:()=>c,kO:()=>f,sO:()=>J,H$:()=>j,R1:()=>v,mu:()=>eo,fk:()=>Z,cA:()=>ek,T2:()=>ed,mo:()=>ep,xX:()=>q,Ld:()=>k});var a=t(82489);let s=async()=>{let e=(await (0,a.Lf)()).transaction(a.RN,"readonly").objectStore(a.RN).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},o=async e=>{let r=(await (0,a.Lf)()).transaction(a.RN,"readonly").objectStore(a.RN).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},n=async e=>{if(!e||0===e.length)return[];let r=(await (0,a.Lf)()).transaction(a.RN,"readonly").objectStore(a.RN),t=[],s=e.map(e=>new Promise((a,s)=>{let o=r.get(e);o.onsuccess=()=>{o.result&&t.push(o.result),a()},o.onerror=()=>s(o.error)}));return await Promise.all(s),t},l=async e=>{let r=(await (0,a.Lf)()).transaction(a.RN,"readwrite").objectStore(a.RN),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},c=async e=>{let r=(await (0,a.Lf)()).transaction(a.RN,"readwrite").objectStore(a.RN).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},i=async e=>{let r=(await (0,a.Lf)()).transaction(a.RN,"readwrite").objectStore(a.RN).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},d=async()=>{let e=(await (0,a.Lf)()).transaction(a.qi,"readonly").objectStore(a.qi).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},u=async e=>{let r=(await (0,a.Lf)()).transaction(a.qi,"readonly").objectStore(a.qi).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},m=async e=>{let r=(await (0,a.Lf)()).transaction(a.qi,"readwrite").objectStore(a.qi),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},f=async e=>{let r=(await (0,a.Lf)()).transaction(a.qi,"readwrite").objectStore(a.qi).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},w=async e=>{let r=(await (0,a.Lf)()).transaction(a.qi,"readwrite").objectStore(a.qi).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},p=async e=>{if(!e||0===e.length)return[];let r=(await (0,a.Lf)()).transaction(a.qi,"readonly").objectStore(a.qi),t=[],s=e.map(e=>new Promise((a,s)=>{let o=r.get(e);o.onsuccess=()=>{o.result&&t.push(o.result),a()},o.onerror=()=>s(o.error)}));return await Promise.all(s),t},h=async()=>{let e=(await (0,a.Lf)()).transaction(a.l_,"readonly").objectStore(a.l_).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},x=async e=>{let r=(await (0,a.Lf)()).transaction(a.l_,"readonly").objectStore(a.l_).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},y=async e=>{let r=(await (0,a.Lf)()).transaction(a.l_,"readwrite").objectStore(a.l_),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},j=async e=>{let r=(await (0,a.Lf)()).transaction(a.l_,"readwrite").objectStore(a.l_).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},b=async e=>{let r=(await (0,a.Lf)()).transaction(a.l_,"readwrite").objectStore(a.l_).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},g=async()=>{let e=(await (0,a.Lf)()).transaction(a.yX,"readonly").objectStore(a.yX).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},N=async e=>{let r=(await (0,a.Lf)()).transaction(a.yX,"readonly").objectStore(a.yX).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},P=async e=>{let r=(await (0,a.Lf)()).transaction(a.yX,"readwrite").objectStore(a.yX),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},v=async e=>{let r=(await (0,a.Lf)()).transaction(a.yX,"readwrite").objectStore(a.yX).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},S=async e=>{let r=(await (0,a.Lf)()).transaction(a.yX,"readwrite").objectStore(a.yX).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},C=async()=>{let e=(await (0,a.Lf)()).transaction(a.zG,"readonly").objectStore(a.zG).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},L=async e=>{let r=(await (0,a.Lf)()).transaction(a.zG,"readonly").objectStore(a.zG).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},R=async e=>{let r=(await (0,a.Lf)()).transaction(a.zG,"readwrite").objectStore(a.zG),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},k=async e=>{let r=(await (0,a.Lf)()).transaction(a.zG,"readwrite").objectStore(a.zG).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},A=async e=>{let r=(await (0,a.Lf)()).transaction(a.zG,"readwrite").objectStore(a.zG).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},W=async()=>{let e=(await (0,a.Lf)()).transaction(a.rP,"readonly").objectStore(a.rP).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},$=async e=>{let r=(await (0,a.Lf)()).transaction(a.rP,"readonly").objectStore(a.rP).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},_=async e=>{let r=(await (0,a.Lf)()).transaction(a.rP,"readwrite").objectStore(a.rP),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},E=async e=>{let r=(await (0,a.Lf)()).transaction(a.rP,"readwrite").objectStore(a.rP).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},z=async e=>{let r=(await (0,a.Lf)()).transaction(a.rP,"readwrite").objectStore(a.rP).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},U=async()=>{let e=(await (0,a.Lf)()).transaction(a.NK,"readonly").objectStore(a.NK).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},T=async e=>{let r=(await (0,a.Lf)()).transaction(a.NK,"readonly").objectStore(a.NK).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},I=async e=>{let r=(await (0,a.Lf)()).transaction(a.NK,"readwrite").objectStore(a.NK),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},q=async e=>{let r=(await (0,a.Lf)()).transaction(a.NK,"readwrite").objectStore(a.NK).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},Q=async e=>{let r=(await (0,a.Lf)()).transaction(a.NK,"readwrite").objectStore(a.NK).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},D=async()=>{let e=(await (0,a.Lf)()).transaction(a.Qu,"readonly").objectStore(a.Qu).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},F=async e=>{let r=(await (0,a.Lf)()).transaction(a.Qu,"readonly").objectStore(a.Qu).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},X=async e=>{let r=(await (0,a.Lf)()).transaction(a.Qu,"readwrite").objectStore(a.Qu),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},J=async e=>{let r=(await (0,a.Lf)()).transaction(a.Qu,"readwrite").objectStore(a.Qu).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},G=async e=>{let r=(await (0,a.Lf)()).transaction(a.Qu,"readwrite").objectStore(a.Qu).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},M=async()=>{let e=(await (0,a.Lf)()).transaction(a.TP,"readonly").objectStore(a.TP).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},K=async e=>{let r=(await (0,a.Lf)()).transaction(a.TP,"readonly").objectStore(a.TP).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},O=async e=>{let r=(await (0,a.Lf)()).transaction(a.TP,"readwrite").objectStore(a.TP),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},Z=async e=>{let r=(await (0,a.Lf)()).transaction(a.TP,"readwrite").objectStore(a.TP).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},B=async e=>{let r=(await (0,a.Lf)()).transaction(a.TP,"readwrite").objectStore(a.TP).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},V=async()=>{let e=(await (0,a.Lf)()).transaction(a.C2,"readonly").objectStore(a.C2).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},Y=async e=>{let r=(await (0,a.Lf)()).transaction(a.C2,"readwrite").objectStore(a.C2).add(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>{var a;(null==(a=r.error)?void 0:a.name)!=="ConstraintError"?t(r.error):e()}})},H=async(e,r)=>{e&&0!==e.length&&await Promise.all(e.map(e=>Y({name:e,source:r})))},ee=async(e,r)=>{let t=r.transaction(e,"readonly").objectStore(e).getAll();return new Promise((e,r)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error)})},er=async(e,r)=>{let t,s=await (0,a.Lf)();switch(e){case"creature":t=a.RN;break;case"deed":t=a.qi;break;case"encounter":t=a.l_;break;case"encounterTable":t=a.yX;break;case"treasure":t=a.zG;break;case"alchemicalItem":t=a.rP;break;case"room":t=a.NK;break;case"item":t=a.TP;break;case"faction":t=a.U3;break;case"npc":t=a.Xc;break;case"pantheon":t=a.W7;break;case"city":t=a.QW;break;default:return[]}let o=await ee(t,s),n=new Map;for(let e of o)if(e.tags&&Array.isArray(e.tags))for(let r of e.tags)n.set(r,(n.get(r)||0)+1);return Array.from(n.entries()).sort((e,r)=>r[1]-e[1]).map(e=>e[0]).slice(0,r)},et=async()=>{let e=(await (0,a.Lf)()).transaction(a.U3,"readonly").objectStore(a.U3).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},ea=async e=>{let r=(await (0,a.Lf)()).transaction(a.U3,"readonly").objectStore(a.U3).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},es=async e=>{let r=(await (0,a.Lf)()).transaction(a.U3,"readwrite").objectStore(a.U3),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},eo=async e=>{let r=(await (0,a.Lf)()).transaction(a.U3,"readwrite").objectStore(a.U3).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},en=async e=>{let r=(await (0,a.Lf)()).transaction(a.U3,"readwrite").objectStore(a.U3).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},el=async()=>{let e=(await (0,a.Lf)()).transaction(a.Xc,"readonly").objectStore(a.Xc).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},ec=async e=>{let r=(await (0,a.Lf)()).transaction(a.Xc,"readonly").objectStore(a.Xc).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},ei=async e=>{let r=(await (0,a.Lf)()).transaction(a.Xc,"readwrite").objectStore(a.Xc),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},ed=async e=>{let r=(await (0,a.Lf)()).transaction(a.Xc,"readwrite").objectStore(a.Xc).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},eu=async e=>{let r=(await (0,a.Lf)()).transaction(a.Xc,"readwrite").objectStore(a.Xc).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},em=async()=>{let e=(await (0,a.Lf)()).transaction(a.W7,"readonly").objectStore(a.W7).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},ef=async e=>{let r=(await (0,a.Lf)()).transaction(a.W7,"readonly").objectStore(a.W7).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},ew=async e=>{let r=(await (0,a.Lf)()).transaction(a.W7,"readwrite").objectStore(a.W7),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},ep=async e=>{let r=(await (0,a.Lf)()).transaction(a.W7,"readwrite").objectStore(a.W7).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},eh=async e=>{let r=(await (0,a.Lf)()).transaction(a.W7,"readwrite").objectStore(a.W7).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},ex=async()=>{let e=(await (0,a.Lf)()).transaction(a.qo,"readonly").objectStore(a.qo).getAll();return new Promise((r,t)=>{e.onsuccess=()=>{r(e.result.sort((e,r)=>e.name.localeCompare(r.name)))},e.onerror=()=>t(e.error)})},ey=async e=>{let r=(await (0,a.Lf)()).transaction(a.qo,"readwrite").objectStore(a.qo),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},ej=async e=>{let r=(await (0,a.Lf)()).transaction(a.qo,"readwrite").objectStore(a.qo).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},eb=async e=>{let r=(await (0,a.Lf)()).transaction([a.qo,a.$],"readwrite"),t=r.objectStore(a.qo),s=r.objectStore(a.$),o=s.index("by_calendar");return new Promise((a,n)=>{t.delete(e).onerror=n;let l=o.openKeyCursor(IDBKeyRange.only(e));l.onsuccess=()=>{let e=l.result;e&&(s.delete(e.primaryKey),e.continue())},l.onerror=n,r.oncomplete=()=>a(),r.onerror=()=>n(r.error)})},eg=async()=>{let e=(await (0,a.Lf)()).transaction(a.a9,"readonly").objectStore(a.a9).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})};var eN=t(2868);t(83011);let eP=async e=>{(0,a.YJ)(e);let r=await (0,a.Lf)(),t=a.Ni,s=r.transaction(t,"readonly"),o=t.map(e=>new Promise((r,t)=>{let a=s.objectStore(e).getAll();a.onsuccess=()=>r({name:e,data:a.result}),a.onerror=()=>t(a.error)})),n=await Promise.all(o),l={};return n.forEach(e=>{l[e.name]=e.data}),l},ev=async(e,r)=>{let t=await (0,a.Lf)(),s=t.name.replace("TresspasserDB_","");if("object"!=typeof e||null===e)return Promise.reject(Error("Invalid import file format. Expected an object with arrays of data."));if(r){let e=indexedDB.open("TresspasserWorldsMetadata",1);await new Promise((t,o)=>{e.onsuccess=()=>{let n=e.result.transaction(a.sb,"readwrite");n.objectStore(a.sb).put({slug:s,name:r,description:"Imported from file."}),n.oncomplete=()=>t(),n.onerror=()=>o(n.error)},e.onerror=()=>o(e.error)})}let o=a.Ni,n=t.transaction(o,"readwrite"),l={};o.forEach(e=>{l[e]=n.objectStore(e),l[e].clear()});let c=new Map,i=(e,r)=>{e&&Array.isArray(e)&&e.forEach(e=>{let t="".concat(e,"|").concat(r);c.has(t)||c.set(t,{name:e,source:r})})},d=(e,r)=>{r&&Array.isArray(r)&&r.forEach(r=>{r.id||(r.id=(0,a.$C)()),"calendars"!==e||"modelId"in r||(r.modelId=void 0),"creatures"===e&&Array.isArray(r.abilities)&&r.abilities.forEach(e=>{e.id||(e.id=(0,a.$C)())}),l[e].put(r),"tags"in r&&i(r.tags,e)})};return o.forEach(r=>{d(r,e[r])}),c.forEach(e=>{try{l.tags.put({...e,id:(0,a.$C)()})}catch(r){console.error("Error creating tag ".concat(e.name,": ").concat(r))}}),new Promise((e,r)=>{n.oncomplete=()=>e(),n.onerror=()=>r(n.error)})},eS=async e=>{if(!e||0===e.length)return[];let r=await n(e);if(0===r.length)return[];let t=[...new Set(r.flatMap(e=>e.deeds))],a=new Map((await p(t)).map(e=>[e.id,e]));return r.map(e=>{let r=[];return"string"==typeof e.abilities&&e.abilities.length>0?r=e.abilities.split("\n\n").map(e=>{let r=e.match(RegExp("\\*\\*(.*?):\\*\\*\\s*(.*)","s"));return r&&r[1]&&r[2]?{id:crypto.randomUUID(),name:r[1],description:r[2].trim()}:!r&&e.trim()?{id:crypto.randomUUID(),name:"Ability",description:e.trim()}:null}).filter(e=>null!==e):Array.isArray(e.abilities)&&(r=e.abilities.map(e=>({...e,id:e.id||crypto.randomUUID()}))),{...e,abilities:r,deeds:e.deeds.map(e=>a.get(e)).filter(e=>!!e)}})},eC=async()=>{let e=(await (0,a.Lf)()).transaction(a.ux,"readonly").objectStore(a.ux).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},eL=async e=>{let r=(await (0,a.Lf)()).transaction(a.ux,"readonly").objectStore(a.ux).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},eR=async e=>{let r=(await (0,a.Lf)()).transaction(a.ux,"readwrite").objectStore(a.ux),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},ek=async e=>{let r=(await (0,a.Lf)()).transaction(a.ux,"readwrite").objectStore(a.ux).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},eA=async e=>{let r=(await (0,a.Lf)()).transaction(a.ux,"readwrite").objectStore(a.ux).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},eW=async()=>{let e=(await (0,a.Lf)()).transaction(a.QW,"readonly").objectStore(a.QW).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},e$=async e=>{let r=(await (0,a.Lf)()).transaction(a.QW,"readonly").objectStore(a.QW).get(e);return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},e_=async e=>{let r=(await (0,a.Lf)()).transaction(a.QW,"readwrite").objectStore(a.QW),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},eE=async e=>{let r=(await (0,a.Lf)()).transaction(a.QW,"readwrite").objectStore(a.QW).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},ez=async e=>{let r=(await (0,a.Lf)()).transaction(a.QW,"readwrite").objectStore(a.QW).delete(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})}},54165:(e,r,t)=>{t.d(r,{Cf:()=>m,Es:()=>w,L3:()=>p,c7:()=>f,lG:()=>c,rr:()=>h,zM:()=>i});var a=t(95155),s=t(12115),o=t(45821),n=t(25318),l=t(59434);let c=o.bL,i=o.l9,d=o.ZL;o.bm;let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.hJ,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=o.hJ.displayName;let m=s.forwardRef((e,r)=>{let{className:t,children:s,...c}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(o.UC,{ref:r,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[s,(0,a.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=o.UC.displayName;let f=e=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",r),...t})};f.displayName="DialogHeader";let w=e=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};w.displayName="DialogFooter";let p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.hE,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});p.displayName=o.hE.displayName;let h=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.VY,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});h.displayName=o.VY.displayName},62523:(e,r,t)=>{t.d(r,{p:()=>n});var a=t(95155),s=t(12115),o=t(59434);let n=s.forwardRef((e,r)=>{let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n})});n.displayName="Input"},66424:(e,r,t)=>{t.d(r,{F:()=>l});var a=t(95155),s=t(12115),o=t(47655),n=t(59434);let l=s.forwardRef((e,r)=>{let{className:t,children:s,...l}=e;return(0,a.jsxs)(o.bL,{ref:r,className:(0,n.cn)("relative overflow-hidden",t),...l,children:[(0,a.jsx)(o.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,a.jsx)(c,{}),(0,a.jsx)(o.OK,{})]})});l.displayName=o.bL.displayName;let c=s.forwardRef((e,r)=>{let{className:t,orientation:s="vertical",...l}=e;return(0,a.jsx)(o.VM,{ref:r,orientation:s,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,a.jsx)(o.lr,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=o.VM.displayName},66695:(e,r,t)=>{t.d(r,{BT:()=>i,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>l,wL:()=>u});var a=t(95155),s=t(12115),o=t(59434);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});n.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...s})});i.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},83011:(e,r,t)=>{t.d(r,{AI:()=>l,D3:()=>o,Ul:()=>s,ZM:()=>n});var a=t(82489);let s=async()=>{let e=(await (0,a.Lf)()).transaction(a.a9,"readonly").objectStore(a.a9).getAll();return new Promise((r,t)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>t(e.error)})},o=async e=>{let r=(await (0,a.Lf)()).transaction(a.a9,"readwrite").objectStore(a.a9),t=(0,a.$C)(),s={...e,id:t},o=r.add(s);return new Promise((e,r)=>{o.onsuccess=()=>e(t),o.onerror=()=>r(o.error)})},n=async e=>{let r=(await (0,a.Lf)()).transaction(a.a9,"readwrite").objectStore(a.a9).put(e);return new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})},l=async e=>{let r=(await (0,a.Lf)()).transaction([a.a9,a.qo,a.$],"readwrite"),t=r.objectStore(a.a9),s=r.objectStore(a.qo),o=r.objectStore(a.$),n=o.index("by_calendar");return new Promise((a,l)=>{t.delete(e).onerror=l;let c=s.getAll();c.onsuccess=()=>{let r=c.result.filter(r=>r.modelId===e).map(e=>e.id);if(0===r.length)return;r.forEach(e=>{s.delete(e).onerror=l});let t=n.openKeyCursor();t.onsuccess=()=>{let e=t.result;e&&(r.includes(e.key)&&(o.delete(e.primaryKey).onerror=l),e.continue())},t.onerror=l},c.onerror=l,r.oncomplete=()=>a(),r.onerror=()=>l(r.error)})}},85057:(e,r,t)=>{t.d(r,{J:()=>i});var a=t(95155),s=t(12115),o=t(40968),n=t(74466),l=t(59434);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.b,{ref:r,className:(0,l.cn)(c(),t),...s})});i.displayName=o.b.displayName},90010:(e,r,t)=>{t.d(r,{$v:()=>h,EO:()=>m,Lt:()=>c,Rx:()=>x,Zr:()=>y,ck:()=>w,r7:()=>p,tv:()=>i,wd:()=>f});var a=t(95155),s=t(12115),o=t(62278),n=t(59434),l=t(30285);let c=o.bL,i=o.l9,d=o.ZL,u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r})});u.displayName=o.hJ.displayName;let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(o.UC,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});m.displayName=o.UC.displayName;let f=e=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...t})};f.displayName="AlertDialogHeader";let w=e=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};w.displayName="AlertDialogFooter";let p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.hE,{ref:r,className:(0,n.cn)("text-lg font-semibold",t),...s})});p.displayName=o.hE.displayName;let h=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.VY,{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});h.displayName=o.VY.displayName;let x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.rc,{ref:r,className:(0,n.cn)((0,l.r)(),t),...s})});x.displayName=o.rc.displayName;let y=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.ZD,{ref:r,className:(0,n.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});y.displayName=o.ZD.displayName}}]);