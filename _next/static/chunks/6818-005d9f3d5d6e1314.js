"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6818],{46818:(e,s,l)=>{l.r(s),l.d(s,{default:()=>q});var t=l(95155),a=l(12115),r=l(92745),n=l(62523),i=l(30285),c=l(66424),d=l(22346),o=l(87481),x=l(34301),h=l(75074),j=l(20203),u=l(73926),m=l(59409),p=l(85057),f=l(90648);function g(e){let{onSelectDeed:s,onNewDeed:l,selectedDeedId:g,dataVersion:v,filters:N,setFilters:y,onClearFilters:w}=e,[C,b]=(0,a.useState)([]),[S,z]=(0,a.useState)(!0),{toast:T}=(0,o.dj)();(0,a.useEffect)(()=>{(async()=>{z(!0);try{let e=await (0,r.xy)();b(e)}catch(e){console.error("Error fetching deeds:",e),T({variant:"destructive",title:"Error",description:"Could not fetch deeds from database."})}finally{z(!1)}})()},[v,T]);let F=(0,a.useMemo)(()=>{let e=C.filter(e=>{let s=e.name.toLowerCase().includes(N.searchTerm.toLowerCase()),l="all"===N.tierFilter||e.tier===N.tierFilter,t=!0,a=N.tagFilter.toLowerCase().split(",").map(e=>e.trim()).filter(Boolean);return a.length>0&&(t=!!e.tags&&a.every(s=>e.tags.some(e=>e.toLowerCase().includes(s)))),s&&l&&t}),s={light:1,heavy:2,mighty:3,tyrant:4,special:5},l=e.sort((e,l)=>{if("tier"===N.sortBy){let t=(s[e.tier]||0)-(s[l.tier]||0);if(0!==t)return t}return e.name.localeCompare(l.name)});return"desc"===N.sortOrder&&l.reverse(),l},[C,N]);return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)(i.$,{onClick:l,className:"w-full",children:[(0,t.jsx)(x.A,{})," New Deed"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.p,{placeholder:"Search deeds...",value:N.searchTerm,onChange:e=>y.setSearchTerm(e.target.value),className:"pl-9"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(p.J,{children:"Filter"}),(0,t.jsx)(i.$,{variant:"ghost",size:"sm",onClick:w,className:"text-xs h-auto p-1",children:"Clear"})]}),(0,t.jsxs)(m.l6,{value:N.tierFilter,onValueChange:y.setTierFilter,children:[(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{placeholder:"Filter by tier"})}),(0,t.jsxs)(m.gC,{children:[(0,t.jsx)(m.eb,{value:"all",children:"All Tiers"}),(0,t.jsx)(m.eb,{value:"light",children:"Light"}),(0,t.jsx)(m.eb,{value:"heavy",children:"Heavy"}),(0,t.jsx)(m.eb,{value:"mighty",children:"Mighty"}),(0,t.jsx)(m.eb,{value:"tyrant",children:"Tyrant"}),(0,t.jsx)(m.eb,{value:"special",children:"Special"})]})]}),(0,t.jsx)(f.F,{value:N.tagFilter?N.tagFilter.split(",").map(e=>e.trim()).filter(Boolean):[],onChange:e=>y.setTagFilter(e.join(",")),placeholder:"Tags (e.g. fire, control)",tagSource:"deed"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.J,{children:"Sort by"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(m.l6,{value:N.sortBy,onValueChange:e=>y.setSortBy(e),children:[(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{placeholder:"Sort by"})}),(0,t.jsxs)(m.gC,{children:[(0,t.jsx)(m.eb,{value:"name",children:"Name"}),(0,t.jsx)(m.eb,{value:"tier",children:"Tier"})]})]}),(0,t.jsxs)(i.$,{variant:"ghost",size:"icon",onClick:()=>y.setSortOrder(e=>"asc"===e?"desc":"asc"),children:["asc"===N.sortOrder?(0,t.jsx)(j.A,{className:"h-4 w-4"}):(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle sort order"})]})]})]})]}),(0,t.jsx)(d.w,{}),(0,t.jsx)(c.F,{className:"flex-1",children:(0,t.jsx)("div",{className:"p-4",children:S?(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"Loading deeds..."}):F.length>0?(0,t.jsx)("ul",{className:"space-y-1",children:F.map(e=>(0,t.jsx)("li",{children:(0,t.jsxs)("button",{onClick:()=>s(e.id),className:"w-full text-left p-2 rounded-md transition-colors ".concat(g===e.id?"bg-primary text-primary-foreground":"hover:bg-accent/50"),children:[e.name," ",(0,t.jsxs)("span",{className:"text-xs opacity-70",children:["(",e.tier,")"]})]})},e.id))}):(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"No deeds found."})})})]})}var v=l(62177),N=l(90221),y=l(55594),w=l(23062),C=l(66695),b=l(88539),S=l(90010),z=l(17759),T=l(12543),F=l(15599),k=l(18763),B=l(77223),E=l(25318),D=l(53054),A=l(68856),V=l(88911),I=l(26126),J=l(47906);let R=y.z.object({start:y.z.string().optional(),base:y.z.string().optional(),hit:y.z.string().optional(),spark:y.z.string().optional(),shadow:y.z.string().optional(),after:y.z.string().optional()}),M=y.z.object({name:y.z.string().min(1,"Deed name is required"),tier:y.z.enum(["light","heavy","mighty","tyrant","special"]),actionType:y.z.enum(w.GW),deedType:y.z.enum(w.FC),versus:y.z.enum(w.OJ),target:y.z.string().optional(),effects:R,tags:y.z.array(y.z.string()).optional()}),$={name:"",tier:"light",actionType:"attack",deedType:"melee",versus:"guard",target:"",effects:{start:"",base:"",hit:"",spark:"",shadow:"",after:""},tags:[]};function O(e){let{deedId:s,isCreatingNew:l,template:c,onDeedSaveSuccess:x,onDeedDeleteSuccess:h,onUseAsTemplate:j,onEditCancel:u,dataVersion:p,onFilterByClick:g,onBack:y}=e,{toast:R}=(0,o.dj)(),[O,L]=(0,a.useState)(l),[Z,q]=(0,a.useState)(!l&&!!s),[W,H]=(0,a.useState)(null),_=(0,J.a)(),G=(0,v.mN)({resolver:(0,N.u)(M),defaultValues:c||$});(0,a.useEffect)(()=>{(async()=>{if(l){G.reset(c?{...c,tags:c.tags||[]}:$),H(c||null),L(!0),q(!1);return}if(!s){L(!1),q(!1),H(null);return}q(!0),L(!1);try{let e=await (0,r.rp)(s);if(e){let s={...e,tags:e.tags||[]};G.reset(s),H(e)}else H(null)}catch(e){console.error("Failed to fetch deed data:",e),R({variant:"destructive",title:"Error",description:"Could not load deed data."})}finally{q(!1)}})()},[s,l,c,G,R,p]);let P=()=>{if(l)u();else if(W){let e={...W,tags:W.tags||[]};G.reset(e),L(!1)}},U=async e=>{try{let t={...e,tags:e.tags||[]},a=e.tags||[];if(a.length>0&&await (0,r.JE)(a,"deed"),l){let s=await (0,r.W$)(t);R({title:"Deed Created!",description:"".concat(e.name," has been added to the library.")}),x(s)}else s&&(await (0,r.kO)({...t,id:s}),R({title:"Save Successful",description:"".concat(e.name," has been updated.")}),x(s));L(!1)}catch(e){console.error("Failed to save deed:",e),R({variant:"destructive",title:"Save Failed",description:"Could not save changes."})}},K=async()=>{if(s)try{await (0,r.wz)(s),R({title:"Deed Deleted",description:"The deed has been removed from the library."}),h()}catch(e){console.error("Failed to delete deed:",e),R({variant:"destructive",title:"Deletion Failed",description:"Could not delete the deed."})}};return Z?(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsxs)(C.Zp,{children:[(0,t.jsxs)(C.aR,{children:[(0,t.jsx)(A.E,{className:"h-8 w-48"}),(0,t.jsx)(A.E,{className:"h-4 w-32"})]}),(0,t.jsxs)(C.Wu,{className:"space-y-6",children:[(0,t.jsx)(A.E,{className:"h-10 w-full"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(A.E,{className:"h-10 w-full"}),(0,t.jsx)(A.E,{className:"h-10 w-full"})]}),(0,t.jsx)(d.w,{}),(0,t.jsx)(A.E,{className:"h-20 w-full"}),(0,t.jsx)(A.E,{className:"h-20 w-full"}),(0,t.jsx)(A.E,{className:"h-20 w-full"})]})]})}):s||l?!O&&W?(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsxs)("div",{className:"flex flex-row items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[_&&y&&(0,t.jsx)(i.$,{variant:"ghost",size:"icon",onClick:y,className:"-ml-4 -mt-2",children:(0,t.jsx)(T.A,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.ZB,{className:"text-3xl font-bold",children:W.name}),(0,t.jsx)(C.BT,{className:"mt-1 capitalize",children:(0,t.jsx)("button",{onClick:e=>g({tierFilter:W.tier},e),className:"hover:underline p-0 bg-transparent text-inherit",children:W.tier})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{W&&j(W)},children:[(0,t.jsx)(F.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Template"})]}),(0,t.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>L(!0),children:[(0,t.jsx)(k.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]})]})]})}),(0,t.jsxs)(C.Wu,{children:[(0,t.jsx)(V.P,{deed:W}),W.tags&&W.tags.length>0&&(0,t.jsx)("div",{className:"mt-4 pt-3 border-t border-border/50",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:W.tags.map(e=>(0,t.jsx)("button",{onClick:s=>g({tagFilter:e},s),className:"bg-transparent border-none p-0 m-0",children:(0,t.jsx)(I.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",children:e})},e))})})]}),(0,t.jsx)(C.wL,{children:(0,t.jsxs)(S.Lt,{children:[(0,t.jsx)(S.tv,{asChild:!0,children:(0,t.jsx)(i.$,{type:"button",variant:"destructive",size:"sm",children:(0,t.jsx)(B.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(S.EO,{children:[(0,t.jsxs)(S.wd,{children:[(0,t.jsx)(S.r7,{children:"Are you sure?"}),(0,t.jsxs)(S.$v,{children:['This will permanently delete "',G.getValues("name"),'". This action cannot be undone.']})]}),(0,t.jsxs)(S.ck,{children:[(0,t.jsx)(S.Zr,{children:"Cancel"}),(0,t.jsx)(S.Rx,{onClick:K,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})})]})}):(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsx)(C.Zp,{children:(0,t.jsx)(z.lV,{...G,children:(0,t.jsxs)("form",{onSubmit:G.handleSubmit(U),className:"space-y-6",children:[(0,t.jsx)(C.aR,{children:(0,t.jsxs)("div",{className:"flex flex-row justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[_&&y&&(0,t.jsx)(i.$,{type:"button",variant:"ghost",size:"icon",onClick:P,className:"-ml-4",children:(0,t.jsx)(T.A,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.ZB,{children:l?_?"New Deed":"Create a New Deed":"Editing: ".concat(G.getValues("name")||"...")}),(0,t.jsx)(C.BT,{children:l?"Fill out the details for your new deed.":"Make your changes and click Save."})]})]}),!_&&(0,t.jsx)(i.$,{type:"button",variant:"ghost",size:"icon",onClick:P,className:"text-muted-foreground hover:text-foreground",children:(0,t.jsx)(E.A,{className:"h-5 w-5"})})]})}),(0,t.jsxs)(C.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(z.zB,{name:"name",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsx)(z.lR,{children:"Deed Name"}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(n.p,{placeholder:"e.g., Inferno",...s})}),(0,t.jsx)(z.C5,{})]})}}),(0,t.jsx)(z.zB,{name:"tier",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsx)(z.lR,{children:"Tier"}),(0,t.jsxs)(m.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(z.MJ,{children:(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{placeholder:"Select tier"})})}),(0,t.jsxs)(m.gC,{children:[(0,t.jsx)(m.eb,{value:"light",children:"Light"}),(0,t.jsx)(m.eb,{value:"heavy",children:"Heavy"}),(0,t.jsx)(m.eb,{value:"mighty",children:"Mighty"}),(0,t.jsx)(m.eb,{value:"tyrant",children:"Tyrant"}),(0,t.jsx)(m.eb,{value:"special",children:"Special"})]})]}),(0,t.jsx)(z.C5,{})]})}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(z.zB,{name:"deedType",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsx)(z.lR,{children:"Deed Type"}),(0,t.jsxs)(m.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(z.MJ,{children:(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{placeholder:"Select deed type"})})}),(0,t.jsx)(m.gC,{children:w.FC.map(e=>(0,t.jsx)(m.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,t.jsx)(z.C5,{})]})}}),(0,t.jsx)(z.zB,{name:"actionType",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsx)(z.lR,{children:"Action Type"}),(0,t.jsxs)(m.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(z.MJ,{children:(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{placeholder:"Select action type"})})}),(0,t.jsx)(m.gC,{children:w.GW.map(e=>(0,t.jsx)(m.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,t.jsx)(z.C5,{})]})}}),(0,t.jsx)(z.zB,{name:"versus",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsx)(z.lR,{children:"Versus"}),(0,t.jsxs)(m.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(z.MJ,{children:(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{placeholder:"Select versus"})})}),(0,t.jsx)(m.gC,{children:w.OJ.map(e=>(0,t.jsx)(m.eb,{value:e,className:"capitalize",children:e},e))})]}),(0,t.jsx)(z.C5,{})]})}})]}),(0,t.jsx)(z.zB,{name:"target",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsx)(z.lR,{children:"Target"}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(n.p,{placeholder:"e.g., 1 Creature | Blast 4",...s})}),(0,t.jsx)(z.C5,{})]})}}),(0,t.jsx)(z.zB,{name:"tags",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsxs)(z.lR,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 text-accent"}),"Tags"]}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(f.F,{value:s.value||[],onChange:s.onChange,placeholder:"Add tags...",tagSource:"deed"})}),(0,t.jsx)(z.C5,{})]})}}),(0,t.jsx)(d.w,{}),(0,t.jsx)("h4",{className:"font-semibold text-primary-foreground",children:"Effects"}),(0,t.jsx)(z.zB,{name:"effects.start",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsxs)(z.lR,{children:["Start ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(b.T,{placeholder:"Effect when a creature starts its turn in an area...",...s,rows:2})})]})}}),(0,t.jsx)(z.zB,{name:"effects.base",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsxs)(z.lR,{children:["Base ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(b.T,{placeholder:"Base effect of the deed...",...s,rows:2})})]})}}),(0,t.jsx)(z.zB,{name:"effects.hit",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsxs)(z.lR,{children:["Hit ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(b.T,{placeholder:"The primary effect on a successful hit...",...s,rows:3})}),(0,t.jsx)(z.C5,{})]})}}),(0,t.jsx)(z.zB,{name:"effects.spark",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsxs)(z.lR,{children:["Spark (Critical Hit) ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(b.T,{placeholder:"The effect on a critical hit...",...s,rows:2})})]})}}),(0,t.jsx)(z.zB,{name:"effects.shadow",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsxs)(z.lR,{children:["Shadow (Critical Failure) ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(b.T,{placeholder:"The effect on a critical failure...",...s,rows:3})}),(0,t.jsx)(z.C5,{})]})}}),(0,t.jsx)(z.zB,{name:"effects.after",control:G.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(z.eI,{children:[(0,t.jsxs)(z.lR,{children:["After ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Optional)"})]}),(0,t.jsx)(z.MJ,{children:(0,t.jsx)(b.T,{placeholder:"Effect at the end of a creature's turn...",...s,rows:2})})]})}})]}),(0,t.jsxs)(C.wL,{className:"flex items-center gap-2",children:[!l&&(0,t.jsxs)(S.Lt,{children:[(0,t.jsx)(S.tv,{asChild:!0,children:(0,t.jsx)(i.$,{type:"button",variant:"destructive",size:"sm",children:(0,t.jsx)(B.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(S.EO,{children:[(0,t.jsxs)(S.wd,{children:[(0,t.jsx)(S.r7,{children:"Are you sure?"}),(0,t.jsxs)(S.$v,{children:['This will permanently delete "',G.getValues("name"),'". This action cannot be undone.']})]}),(0,t.jsxs)(S.ck,{children:[(0,t.jsx)(S.Zr,{children:"Cancel"}),(0,t.jsx)(S.Rx,{onClick:K,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]}),(0,t.jsx)("div",{className:"flex-grow"}),!_&&(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:P,children:"Cancel"}),(0,t.jsx)(i.$,{type:"submit",children:l?"Create Deed":"Save Changes"})]})]})})})}):(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsx)(C.Zp,{className:"h-full flex items-center justify-center min-h-[300px]",children:(0,t.jsxs)(C.Wu,{className:"text-center pt-6",children:[(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Select a deed to view"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"or create a new one."})]})})})}var L=l(99982),Z=l(20031);function q(){let[e,s]=(0,a.useState)(null),[l,r]=(0,a.useState)(0),[n,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[o,x]=(0,a.useState)(""),[h,j]=(0,a.useState)("all"),[u,m]=(0,a.useState)(""),[p,f]=(0,a.useState)("name"),[v,N]=(0,a.useState)("asc"),[y,w]=(0,a.useState)(!1),C=(0,J.a)(),[b,S]=(0,a.useState)("list");(0,a.useEffect)(()=>{w(!0)},[]);let z={searchTerm:o,tierFilter:h,tagFilter:u,sortBy:p,sortOrder:v},T={setSearchTerm:x,setTierFilter:j,setTagFilter:m,setSortBy:f,setSortOrder:N},F=(e,s)=>{s.shiftKey?(e.tierFilter&&j(e.tierFilter),e.tagFilter&&m(s=>s?s.split(",").map(e=>e.trim()).includes(e.tagFilter)?s:"".concat(s,", ").concat(e.tagFilter):e.tagFilter)):(j(e.tierFilter||"all"),m(e.tagFilter||""))},k=()=>{x(""),j("all"),m(""),f("name"),N("asc")},B=()=>r(e=>e+1),E=e=>{s(e),i(!1),d(null),C&&S("editor")},D=()=>{s(null),i(!0),d(null),C&&S("editor")},A=e=>{let l={...e};l.name="Copy of ".concat(e.name||"deed"),delete l.id,s(null),i(!0),d(l),C&&S("editor")},V=e=>{B(),s(e),i(!1),d(null),C&&S("editor")},I=()=>{B(),s(null),i(!1),d(null),C&&S("list")},R=()=>{n&&(i(!1),s(null),C&&S("list"))};return y?C?(0,t.jsx)(L.A,{children:(0,t.jsx)("div",{className:"h-full w-full",children:"list"===b?(0,t.jsx)(g,{onSelectDeed:E,onNewDeed:D,selectedDeedId:e,dataVersion:l,filters:z,setFilters:T,onClearFilters:k}):(0,t.jsx)("div",{className:"h-full w-full overflow-y-auto",children:(0,t.jsx)("div",{className:"p-4 sm:p-6",children:(0,t.jsx)(O,{deedId:e,isCreatingNew:n,template:c,onDeedSaveSuccess:V,onDeedDeleteSuccess:I,onUseAsTemplate:A,onEditCancel:R,dataVersion:l,onFilterByClick:F,onBack:()=>{S("list"),s(null),i(!1),d(null)}},null!=e?e:n?"new":"placeholder")})})})}):(0,t.jsx)(Z.SidebarProvider,{children:(0,t.jsx)(L.A,{children:(0,t.jsxs)("div",{className:"flex w-full h-full overflow-hidden",children:[(0,t.jsx)(Z.Bx,{style:{"--sidebar-width":"380px"},children:(0,t.jsx)(g,{onSelectDeed:E,onNewDeed:D,selectedDeedId:e,dataVersion:l,filters:z,setFilters:T,onClearFilters:k})}),(0,t.jsx)(Z.sF,{className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"bg-background/50 p-4 sm:p-6 md:p-8 w-full",children:(0,t.jsx)(O,{deedId:e,isCreatingNew:n,template:c,onDeedSaveSuccess:V,onDeedDeleteSuccess:I,onUseAsTemplate:A,onEditCancel:R,dataVersion:l,onFilterByClick:F},null!=e?e:n?"new":"placeholder")})})]})})}):null}}}]);